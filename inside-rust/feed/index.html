<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>The Inside Rust Blog</title>
        <link>https://xampprocky.github.io/blog.rust-lang.org</link>
        <description></description>
        <generator>Zola</generator>
        <language>en</language>
        <atom:link href="https://xampprocky.github.io/blog.rust-lang.org/inside-rustfeed.xml" rel="self" type="application/rss+xml"/>
        <lastBuildDate>Thu, 23 Apr 2020 06:27:17 +0000</lastBuildDate><item>
            <title>Traits working group 2020 sprint 1 summary</title>
            <pubDate>Sat, 28 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/traits-sprint-1/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/traits-sprint-1/</guid>
            <description>&lt;p&gt;This Tuesday, the traits working group finished our first sprint of 2020, last 6 weeks from February 11th through March 24th. The last sprint was about a year ago, but we decided to resurrect the format in order to help push forward traits-related work in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&quot;&gt;Chalk&lt;&#x2F;a&gt; and rustc.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-is-wg-traits-and-what-do-we-do&quot;&gt;What is wg-traits and what do we do?&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;goal-an-efficient-extensible-and-reusable-crate-for-the-rust-trait-system&quot;&gt;Goal: An efficient, extensible, and reusable crate for the Rust trait system&lt;&#x2F;h3&gt;
&lt;p&gt;The overarching goal of the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;wg-traits&#x2F;&quot;&gt;traits working group&lt;&#x2F;a&gt; is to create a performant, extensible, and clean implementation of Rust&#x27;s trait system. This implementation should scale not only to existing Rust features but also to new and upcoming features, such as:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Implied bounds (&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;2089-implied-bounds.html&quot;&gt;RFC&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Const generics (&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;2000-const-generics.html&quot;&gt;RFC&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Generic associated types (GATs) (&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;1598-generic_associated_types.html&quot;&gt;RFC&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Inherent associated items (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;8995&quot;&gt;tracking issue&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;As if that weren&#x27;t enough, we&#x27;d like the implementaton to be &lt;strong&gt;reusable&lt;&#x2F;strong&gt;, too -- meaning that it can be used by rustc, yes, but also rust-analyzer and potentially other contexts as well. &lt;&#x2F;p&gt;
&lt;p&gt;This effort is part of one of the big, longer term goals for the compiler team: &lt;strong&gt;library-ification&lt;&#x2F;strong&gt;. This refers to the idea of breaking apart the compiler into independent libraries that can be learned, tested, and developed independently.&lt;&#x2F;p&gt;
&lt;p&gt;In order to achieve these and future features, our work is split into two parts: 1) Improving rustc&#x27;s existing trait solver. 2) Design and implement the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&quot;&gt;Chalk&lt;&#x2F;a&gt; trait solver, work towards integration into rustc. The Chalk trait solver, briefly, is a logic-based trait solver, designed to be independent of rustc internals. In addition to it being more powerful than the current rustc trait solving implementation, Chalk can be used as a library for compiler-related work, such as IDE integration (e.g. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-analyzer&#x2F;rust-analyzer&quot;&gt;rust-analyzer&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;Coming into 2020, we — the traits working group — knew we wanted to get more organized and start to push more on getting Chalk fully integrated into rustc, by cleaning up the Chalk codebase itself, fixing bugs, implementing new features, and ultimately integrating Chalk into rustc itself. In addition, we are committed to documenting design considerations and decisions for better accesibility now and in the future. For example, we now publish a Chalk &lt;a href=&quot;http:&#x2F;&#x2F;rust-lang.github.io&#x2F;chalk&#x2F;book&#x2F;&quot;&gt;book&lt;&#x2F;a&gt; which, while incomplete, attempts to document the Chalk internals somewhat akin to the &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc dev guide&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;a-note-about-chalk-integration-in-rustc&quot;&gt;A note about Chalk integration in rustc&lt;&#x2F;h4&gt;
&lt;p&gt;An experimental integration of Chalk was in rustc (under the &lt;code&gt;-Z chalk&lt;&#x2F;code&gt; flag) for over a year, but since its initial implementation, little work had been done while much work had been done on Chalk itself. This ultimately meant that the initial implementation based on the older Chalk version looks very different from what an implementation based on the current Chalk would and should look like. Under this reasoning, that experimental implementation has been removed.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2020-sprint-1&quot;&gt;2020 sprint 1&lt;&#x2F;h2&gt;
&lt;p&gt;Ok, with the background finished, that brings us to the actual 2020 sprint 1. Going into this, we didn&#x27;t &lt;em&gt;quite&lt;&#x2F;em&gt; know what our goals would be. In this post, we&#x27;ll share an overview of each of the things that were accomplished during this sprint, which actually was quite a lot!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;credit-where-credit-is-due&quot;&gt;Credit where credit is due&lt;&#x2F;h3&gt;
&lt;p&gt;A big thank you :hearts: to the folks who participated in this sprint:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;davidbarsky&quot;&gt;David Barsky&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;detrumi&quot;&gt;detrumi&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;flodiebold&quot;&gt;Florian Diebold&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jackh726&quot;&gt;Jack Huey&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;crlf0710&quot;&gt;Charles Lew&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;yaahc&quot;&gt;Jane Lusby&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nikomatsakis&quot;&gt;Niko Matsakis&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;wg-traits-skill-tree&quot;&gt;wg-traits skill tree&lt;&#x2F;h3&gt;
&lt;p&gt;Our &amp;quot;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;wg-traits&#x2F;roadmap&#x2F;skill-tree.html&quot;&gt;skill tree&lt;&#x2F;a&gt;&amp;quot; is how we track our &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;wg-traits&#x2F;roadmap.html&quot;&gt;development roadmap&lt;&#x2F;a&gt;. It shows some of the major goals we are working towards (e.g., having chalk be usable as a standalone library) along with some of the major tasks that we have to complete along the way. You can click on the tasks to be taken to a github issue or other explanation. We try to update it after every meeting so that we have some idea of what we&#x27;re doing and why.&lt;&#x2F;p&gt;
&lt;p&gt;The skill tree structure was inspired by &lt;a href=&quot;https:&#x2F;&#x2F;hacks.mozilla.org&#x2F;2018&#x2F;10&#x2F;webassemblys-post-mvp-future&#x2F;&quot;&gt;this blog post about WebAssembly&lt;&#x2F;a&gt;, which in turn borrowed the term from games. Sadly, the current tool that generates the skill tree doesn&#x27;t yet make anything as beautiful as the hand-drawn art in the WASM post. If anybody is interested in improving the tool&#x27;s output, that is on the list of &#x27;stretch goals&#x27; for this coming sprint!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;chalk-book-chalk-engine-chapter&quot;&gt;Chalk book &lt;code&gt;chalk-engine&lt;&#x2F;code&gt; chapter&lt;&#x2F;h3&gt;
&lt;p&gt;As mentioned before, in our effort to document Chalk internals, we started publishing a &lt;a href=&quot;http:&#x2F;&#x2F;rust-lang.github.io&#x2F;chalk&#x2F;book&#x2F;&quot;&gt;book&lt;&#x2F;a&gt; late last year. Near the beginning of this sprint, we added a whole chapter about &lt;a href=&quot;http:&#x2F;&#x2F;rust-lang.github.io&#x2F;chalk&#x2F;book&#x2F;engine.html&quot;&gt;&lt;code&gt;chalk-engine&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; itself. This is the core crate of Chalk that solves a given set of &lt;code&gt;Goal&lt;&#x2F;code&gt;s. While there is always more that can be documented, we hope this at least is a start in helping people, potentially newcomers, to understand how Chalk works internally.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;work-on-basic-support-for-impl-trait&quot;&gt;Work on basic support for &lt;code&gt;impl Trait&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;In Rust, there are a few places, currently and in the future, where you may specify &lt;code&gt;impl Trait&lt;&#x2F;code&gt; instead of a specific struct. For example, the signature of a function may be &lt;code&gt;fn foo() -&amp;gt; impl Debug&lt;&#x2F;code&gt;. Another place where you may use the &lt;code&gt;impl Trait&lt;&#x2F;code&gt; syntax in the future is with &lt;code&gt;type Foo = impl Trait&lt;&#x2F;code&gt; (currently under the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;63063&quot;&gt;&lt;code&gt;type_alias_impl_trait&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; feature). This would allow you to use &lt;code&gt;Foo&lt;&#x2F;code&gt; as if it was a concrete type. During this sprint, we made significant progress in allowing both of these to work with Chalk. We&#x27;ll be doing follow-up work on this in the upcoming sprint, and hopefully landing support.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;creating-a-proposal-for-a-shared-type-library&quot;&gt;Creating a proposal for a shared type library&lt;&#x2F;h3&gt;
&lt;p&gt;Currently, rustc, rust-analyzer, and chalk each represent Rust types using a different set of structs. This means that when rustc or rust-analyzer wish to invoke chalk functions, we have to convert the representation of Rust types back and forth. This is fine for the time being, but eventually we would like to be having everyone use the same representation, so that no interconversion is required. This is a bit tricky, though, because the requirements of rustc (a batch compiler) and rust-analyzer (an IDE) are somewhat different. During this sprint, we wrote up a proposal for a shared type library, and led a design meeting on the topic. You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;design-meeting&#x2F;2020-03-12-shared-library-for-types&#x2F;&quot;&gt;record of that meeting here&lt;&#x2F;a&gt;, which also includes the proposal.&lt;&#x2F;p&gt;
&lt;p&gt;During this upcoming sprint, we&#x27;ll be following up on this design by starting to do some of the preliminary refactorings in rustc.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;refactoring-for-passing-interner-around&quot;&gt;Refactoring for passing &lt;code&gt;Interner&lt;&#x2F;code&gt; around&lt;&#x2F;h3&gt;
&lt;p&gt;One of the requirements for a shared type library is that it needs to support interning and arena allocation of types. &lt;em&gt;Interning&lt;&#x2F;em&gt; a type means to re-use the same memory each time you have an equivalent type, rather than allocating multiples copies. &lt;em&gt;Arena allocation&lt;&#x2F;em&gt; is a memory management strategy where you allocate all the memory in an ever-growing pool and then free the entire pool at once, rather than tracking and freeing individual allocations. &lt;&#x2F;p&gt;
&lt;p&gt;Chalk&#x27;s existing type library was implemented with simplicity in mind, however, and couldn&#x27;t support either of these use-cases. The problem was that to support interning and arena allocation, you need to track around an &lt;em&gt;interner&lt;&#x2F;em&gt; variable that contains the hash-maps, arenas, and other supporting data structures, and chalk&#x27;s APIs didn&#x27;t have any space for that. This sprint, we fixed that, so that we now pass along an &lt;code&gt;interner&lt;&#x2F;code&gt; value throughout chalk, meaning we can bridge to rustc and rust-analyzer more easily.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;refactoring-how-chalk-represents-bound-types-and-lifetimes&quot;&gt;Refactoring how chalk represents bound types and lifetimes&lt;&#x2F;h3&gt;
&lt;p&gt;Some of the details of how chalk represented types with &lt;em&gt;bound variables&lt;&#x2F;em&gt; (e.g., the &lt;code&gt;&#x27;a&lt;&#x2F;code&gt; in &lt;code&gt;for&amp;lt;&#x27;a&amp;gt; fn(&amp;amp;&#x27;a u32)&lt;&#x2F;code&gt;) differed from how rustc was handling such types. This made bridging from rustc to chalk much harder.  We found that the design we ultimately want was a hybrid of what rustc and and chalk have. During this sprint, we did most of the chalk refactoring, and in the upcoming sprint, we&#x27;ll work on the rustc side of the work.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;work-on-adding-tracing-support-to-chalk&quot;&gt;Work on adding &lt;code&gt;tracing&lt;&#x2F;code&gt; support to Chalk&lt;&#x2F;h3&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;tracing&quot;&gt;&lt;code&gt;tracing&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; crate provides a framework for collecting event-based diagnostic information. Currently, in Chalk, we only have basic logging support. By adding &lt;code&gt;tracing&lt;&#x2F;code&gt; support, we expect to get more fine-grained control of Chalk diagnostics. Initial support is nearly finished and hopefully will get merged soon.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;exploratory-rustc-integration-mvp&quot;&gt;Exploratory rustc integration MVP&lt;&#x2F;h3&gt;
&lt;p&gt;As mentioned before, the previous experimental Chalk integration was removed from rustc since it was outdated. Since there are quite a few design differences between Chalk and rustc&#x27;s current trait solver, some subtle, it&#x27;s not always clear what &lt;em&gt;exactly&lt;&#x2F;em&gt; needs to be modified to makes things work correctly. We have &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;69406&quot;&gt;started&lt;&#x2F;a&gt; writing the experimental Chalk integration. The goal, at least to start, is to create a minimal implementation as a basis for future work. While the pull request is not &lt;em&gt;quite&lt;&#x2F;em&gt; there, it&#x27;s close and has been tremendously helpful in uncovering blocking issues in Chalk that hold up progress.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;exploratory-recursive-solver&quot;&gt;Exploratory recursive solver&lt;&#x2F;h3&gt;
&lt;p&gt;One of the interesting aspects of chalk&#x27;s design is that it separates out the &lt;strong&gt;solver strategy&lt;&#x2F;strong&gt; from other parts of the trait system implementation. In addition to our existing solver, the so-called &lt;a href=&quot;http:&#x2F;&#x2F;smallcultfollowing.com&#x2F;babysteps&#x2F;blog&#x2F;2018&#x2F;01&#x2F;31&#x2F;an-on-demand-slg-solver-for-chalk&#x2F;&quot;&gt;&amp;quot;on demand slg solver&amp;quot;&lt;&#x2F;a&gt;, we are exploring a &lt;a href=&quot;https:&#x2F;&#x2F;gist.github.com&#x2F;nikomatsakis&#x2F;bfbdbe588d6fc61ecb09e3b51847fb7c&quot;&gt;&amp;quot;recursive solver&amp;quot;&lt;&#x2F;a&gt; design. We began by resurrecting an older version of this code that was removed and have been exploring adapting it to the newer ideas.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;minor-chalk-cleanups&quot;&gt;Minor Chalk cleanups&lt;&#x2F;h3&gt;
&lt;p&gt;Over the last sprint, there have been a couple smaller cleanups to Chalk to mention. It can build rustc again, passing rustc&#x27;s lints. We removed an unneeded dependency (well, it&#x27;s technically there for tests). Finally, we also made Chalk a bit more panic-safe.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2020-sprint-2&quot;&gt;2020 sprint 2&lt;&#x2F;h2&gt;
&lt;p&gt;We plan to begin the next sprint of 2020 next Tuesday, March 31st. We&#x27;ll briefly cover a few goals:&lt;&#x2F;p&gt;
&lt;h3 id=&quot;how-to-get-involved&quot;&gt;How to get involved&lt;&#x2F;h3&gt;
&lt;p&gt;If you&#x27;d like to get involved, please drop in on the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;&quot;&gt;rust-lang Zulip&lt;&#x2F;a&gt; in the &lt;code&gt;#wg-traits&lt;&#x2F;code&gt; stream. We also have a &lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=b2hhbXZ2YzcxNzhsMTZqNHFibGxpMmZubjRfMjAyMDAzMzFUMjAwMDAwWiA2dTVycnRjZTZscnR2MDdwZmkzZGFtZ2p1c0Bn&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&amp;amp;scp=ALL&quot;&gt;weekly design meeting&lt;&#x2F;a&gt; (held on Zulip) that we use to sync up on progress and discuss tricky issues.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;chalk-rustc-integration-mvp&quot;&gt;Chalk rustc-integration MVP&lt;&#x2F;h3&gt;
&lt;p&gt;It will be a bit of a stretch, but we hope that this sprint we can complete work on a &amp;quot;MVP&amp;quot; of chalk-rustc integration that we can use to drive further development. This MVP will be unsound and incomplete (for example, it will likely not enforce borrow checker rules correctly), but it will help us to uncover corner cases and to validate the design of the chalk solver. Towards this end, we have a number of concrete tasks:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&#x2F;issues&#x2F;363&quot;&gt;Extending chalk with support for builtin traits like &lt;code&gt;Sized&lt;&#x2F;code&gt;, &lt;code&gt;Copy&lt;&#x2F;code&gt;, and &lt;code&gt;Clone&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
&lt;ul&gt;
&lt;li&gt;There are several traits for which the precise rules are not expressed as ordinary impls, but rather require special integration in the library itself. Chalk doesn&#x27;t currently have any support for these traits, so we need to extend it.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Land existing branch &lt;&#x2F;li&gt;
&lt;li&gt;Converting rustc types into chalk types
&lt;ul&gt;
&lt;li&gt;Eventually, we hope to have rustc and chalk sharing the same type library, so that no bridging is needed between them. But creating such a library will take a while. So, in the interim, we will write code that converts rustc types into chalk types on demand. (Some of the other sprint goals, meanwhile, will be adapting rustc types so that we are also moving towards our eventual goal.)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;design-meeting-for-const-integration&quot;&gt;Design meeting for &lt;code&gt;const&lt;&#x2F;code&gt; integration&lt;&#x2F;h3&gt;
&lt;p&gt;As mentioned in the previous section, our initial Chalk rustc-integration MVP won&#x27;t have support for &lt;code&gt;const&lt;&#x2F;code&gt;. During this sprint, we plan on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-traits&#x2F;issues&#x2F;15&quot;&gt;scheduling a design meeting&lt;&#x2F;a&gt; to specifically flesh out some of the design about what &lt;code&gt;const&lt;&#x2F;code&gt; &lt;em&gt;would&lt;&#x2F;em&gt; look like. Actual implementation will be left for a later sprint.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;move-towards-aligning-rustc-and-chalk-types&quot;&gt;Move towards aligning rustc and Chalk types&lt;&#x2F;h3&gt;
&lt;p&gt;During this sprint, we plan to start working towards extracting a shared library for Rust types, as discussed in the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;design-meeting&#x2F;2020-03-12-shared-library-for-types&#x2F;&quot;&gt;design meeting&lt;&#x2F;a&gt; mentioned previously. This will involve work on refactoring rustc as well as changes to chalk. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-traits&#x2F;issues&#x2F;16&quot;&gt;Tracking issue.&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;h3 id=&quot;land-basic-support-for-impl-trait&quot;&gt;Land basic support for &lt;code&gt;impl Trait&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;We expect to land basic support for &lt;code&gt;impl Trait&lt;&#x2F;code&gt; fairly early in the next sprint. However, there is some &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&#x2F;issues&#x2F;335&quot;&gt;followup work&lt;&#x2F;a&gt; to be done to further refine the implementation.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;exploratory-implementations-and-research&quot;&gt;Exploratory implementations and research&lt;&#x2F;h3&gt;
&lt;p&gt;In addition to the more concrete goals, there is also some exploratory work being done:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&#x2F;issues&#x2F;351&quot;&gt;Implementating a recursive solver&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&#x2F;issues&#x2F;364&quot;&gt;Converting semantic to syntactic equality&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&#x2F;issues&#x2F;365&quot;&gt;Outputting a file for reproducing bugs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;chalk-performance-work&quot;&gt;Chalk performance work&lt;&#x2F;h3&gt;
&lt;p&gt;Most of the work on Chalk has been focused on design, and &lt;em&gt;not much&lt;&#x2F;em&gt; has been done to optimize performance. While the particular &amp;quot;end goal&amp;quot; isn&#x27;t clear here, we hope to start by createing a set of memory, cpu, and time benchmarks for Chalk. With this framework, we can diagnose specific performance issues and monitor future changes for regressions. Part of this will be to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;chalk&#x2F;issues&#x2F;337&quot;&gt;land&lt;&#x2F;a&gt; &lt;code&gt;tracing&lt;&#x2F;code&gt; support.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;improving-the-skill-tree&quot;&gt;Improving the skill tree&lt;&#x2F;h3&gt;
&lt;p&gt;The skill tree has been a useful tool for helping us organize our work and track our status and overall plan. However, the current output is not exactly self explanatory, nor is it particularly attractive. The ultimate goal is to generate pictures similar to Lin&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;hacks.mozilla.org&#x2F;2018&#x2F;10&#x2F;webassemblys-post-mvp-future&#x2F;&quot;&gt;hand drawn artwork&lt;&#x2F;a&gt;. There are also some missing features. If there is someone out there interested in taking a stab at improving the quality of the output, or adding features, that would be great! skill-tree lives in its own &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nikomatsakis&#x2F;skill-tree&quot;&gt;github repo&lt;&#x2F;a&gt;, but just drop by the &lt;code&gt;#wg-traits&lt;&#x2F;code&gt; stream on Zulip to chat about it.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Goodbye, docs team</title>
            <pubDate>Fri, 27 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/goodbye-docs-team/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/goodbye-docs-team/</guid>
            <description>&lt;p&gt;I&#x27;ll cut right to the chase: the docs team no longer exists.&lt;&#x2F;p&gt;
&lt;p&gt;Back in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;pull&#x2F;1683&quot;&gt;August of 2016&lt;&#x2F;a&gt;, we
formed a team to work on documenting Rust. Here&#x27;s the original description
and motivation:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Rust documentation team will be responsible for all of the things
listed above. Specifically, they will pertain to these areas of the Rust
project:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The standard library documentation&lt;&#x2F;li&gt;
&lt;li&gt;The book and other long-form docs&lt;&#x2F;li&gt;
&lt;li&gt;Cargo&#x27;s documentation&lt;&#x2F;li&gt;
&lt;li&gt;The Error Index&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Furthermore, the documentation team will be available to help with
ecosystem documentation, in a few ways. Firstly, in an advisory capacity:
helping people who want better documentation for their crates to understand
how to accomplish that goal. Furthermore, monitoring the overall ecosystem
documentation, and identifying places where we could contribute and make a
large impact for all Rustaceans. If the Rust project itself has wonderful
docs, but the ecosystem has terrible docs, then people will still be
frustrated with Rust&#x27;s documentation situation, especially given our
anti-batteries-included attitude. To be clear, this does not mean owning the
ecosystem docs, but rather working to contribute in more ways than just the
Rust project itself.&lt;&#x2F;p&gt;
&lt;p&gt;We will coordinate in the #rust-docs IRC room, and have regular meetings,
as the team sees fit. Regular meetings will be important to coordinate
broader goals; and participation will be important for team members. We hold
meetings weekly.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;At the time, all of this was sorely needed. There weren&#x27;t as many people working
on Rust, and there wasn&#x27;t that much documentation.&lt;&#x2F;p&gt;
&lt;p&gt;But documentation is a funny thing. It&#x27;s really a cross-cutting concern. One
team of folks writing docs for tons of other teams of folks doesn&#x27;t really
&lt;em&gt;work&lt;&#x2F;em&gt;, long-term. In the short term, it was an absolutely necessary and good
strategy. Today, it doesn&#x27;t make as much sense. Let&#x27;s look again at those original
resources:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The standard library&#x27;s documentation is pretty much filled out, and when new APIs
are added, the libs team writes some initial docs.&lt;&#x2F;li&gt;
&lt;li&gt;The book is maintained by Steve and Carol.&lt;&#x2F;li&gt;
&lt;li&gt;Cargo&#x27;s documentation is the responsibility of the Cargo team (and the docs
team never really helped here. I always wanted to, but years later, it just
hasn&#x27;t worked out.)&lt;&#x2F;li&gt;
&lt;li&gt;The error index describes compiler errors, and so that&#x27;s the compiler team&#x27;s
job.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;ve also added way more stuff:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Rust by Example&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;rustc&lt;&#x2F;code&gt; book and &lt;code&gt;rustc&lt;&#x2F;code&gt; guide&lt;&#x2F;li&gt;
&lt;li&gt;The reference&lt;&#x2F;li&gt;
&lt;li&gt;The nomicon&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The list goes on and on. And all this time, the membership of the team didn&#x27;t
really grow; I tried several times to get folks involved, but most people
just plain don&#x27;t like writing docs. At this point, the only person really
writing docs is me, and I haven&#x27;t had a ton of time lately either. So we
haven&#x27;t had a docs team meeting since August of 2018. There also aren&#x27;t
really docs RFCs these days. As such, this blog post isn&#x27;t really announcing
the end of the docs team as much as it is describing what is already true
today.&lt;&#x2F;p&gt;
&lt;p&gt;I will still be doing my work on core, and the book. And I plan on submitting
some more docs PRs in the future.&lt;&#x2F;p&gt;
&lt;p&gt;I would like to thank everyone who&#x27;s been on the team in the past, and
everyone who&#x27;s submitted documentation PRs over the years. A lot of people
really love Rust&#x27;s documentation, and that wouldn&#x27;t have been possible
without all of you.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>rustc-dev-guide Overview</title>
            <pubDate>Thu, 26 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/rustc-dev-guide-overview/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/rustc-dev-guide-overview/</guid>
            <description>&lt;p&gt;The &lt;code&gt;rustc&lt;&#x2F;code&gt; compiler includes over 380,000 lines of source across more than 40 crates&lt;sup&gt;1&lt;&#x2F;sup&gt; to support the lexing through binary linking stages of the Rust compile process. It is daunting for newcomers, and we recognize that a high-level survey of the pipeline is warranted.&lt;&#x2F;p&gt;
&lt;p&gt;In our &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;inside-rust&#x2F;2019&#x2F;12&#x2F;20&#x2F;wg-learning-update.html&quot;&gt;December update&lt;&#x2F;a&gt;, we announced plans for the publication of the &amp;quot;rustc-dev-guide Overview&amp;quot;. Our goal is to describe the integrated components of the compiler in a high-level document for users and potential developers. The Overview will be published at the beginning of the &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc-dev-guide&lt;&#x2F;a&gt; to orient readers to the more detailed documentation of the compiler in subsequent chapters.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;rustc-overview-structure&quot;&gt;Rustc Overview Structure&lt;&#x2F;h2&gt;
&lt;p&gt;We will break the compiler down to address two questions at a high-level:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;What does the compiler do to your source code?&lt;&#x2F;li&gt;
&lt;li&gt;How does the compiler do it?&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;As we address these general areas, we will provide a synopsis that briefly covers frequent community questions like:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;What are the conflicting goals of the compiler, and how are issues like compiler speed, compiler memory usage, program speed, program size, and compiler stability&#x2F;correctness balanced?&lt;&#x2F;li&gt;
&lt;li&gt;What are the stages of the compile process, and how do they fit together?&lt;&#x2F;li&gt;
&lt;li&gt;What are the intermediate representations of my source code?&lt;&#x2F;li&gt;
&lt;li&gt;What happens to generics during the compile process?&lt;&#x2F;li&gt;
&lt;li&gt;What kind of optimizations are performed during the compile process?&lt;&#x2F;li&gt;
&lt;li&gt;How does incremental compilation work?&lt;&#x2F;li&gt;
&lt;li&gt;Does &lt;code&gt;rustc&lt;&#x2F;code&gt; have support for parallel compilation?&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;get-involved&quot;&gt;Get Involved!&lt;&#x2F;h2&gt;
&lt;p&gt;Work is in progress on the Overview, and we need your help. A working draft of the document is available in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&#x2F;pull&#x2F;633&quot;&gt;this pull request&lt;&#x2F;a&gt; on the &lt;code&gt;rustc-dev-guide&lt;&#x2F;code&gt; GitHub repository.&lt;&#x2F;p&gt;
&lt;p&gt;If there is an area of &lt;code&gt;rustc&lt;&#x2F;code&gt; that you would like to understand better and it is appropriate for an overview document, please open an issue on our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&#x2F;issues&quot;&gt;issue tracker&lt;&#x2F;a&gt; to let us know.&lt;&#x2F;p&gt;
&lt;p&gt;And if you know the compiler and want to pitch in on the rustc-dev-guide Overview, open a pull request with your revisions. We welcome your contributions and look forward to your participation!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;interested-in-learning-working-group&quot;&gt;Interested in Learning (Working Group)?&lt;&#x2F;h2&gt;
&lt;p&gt;Are you interested in learning more about the &lt;code&gt;rustc&lt;&#x2F;code&gt; compiler and teaching others? Drop by our &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;196385-t-compiler.2Fwg-learning&quot;&gt;Zulip stream&lt;&#x2F;a&gt; and say hello!&lt;&#x2F;p&gt;
&lt;p&gt;+++&lt;&#x2F;p&gt;
&lt;p&gt;&lt;sup&gt;1&lt;&#x2F;sup&gt; These numbers account for lines in Rust files across all dependencies necessary to build &lt;code&gt;rustc&lt;&#x2F;code&gt;. Thanks to @LeSeulArtichaut for these calculations! See &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;196385-t-compiler.2Fwg-learning&#x2F;topic&#x2F;The.20Rustc.20Overview.3A.20blog.20post&#x2F;near&#x2F;189441101&quot;&gt;the notes on Zulip&lt;&#x2F;a&gt; for additional details.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Resolving Rust&#x27;s forward progress guarantees</title>
            <pubDate>Thu, 19 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/terminating-rust/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/terminating-rust/</guid>
            <description>&lt;p&gt;There has been a longstanding miscompilation in Rust: programs that do not make
&lt;a href=&quot;https:&#x2F;&#x2F;en.cppreference.com&#x2F;w&#x2F;cpp&#x2F;language&#x2F;memory_model#Forward_progress&quot;&gt;forward progress&lt;&#x2F;a&gt;. Note that the previous link is to the C++ definition; Rust
is not C++, but currently LLVM optimizes all LLVM IR with the assumption that a
lack of forward progress is undefined behavior.&lt;&#x2F;p&gt;
&lt;p&gt;Note also that Rust does not define a lack of forward progress as &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;unsafe-code-guidelines&#x2F;glossary.html#undefined-behavior&quot;&gt;undefined
behavior&lt;&#x2F;a&gt;, while C++ does. It is particularly common to encounter the
miscompilation &amp;quot;intentionally&amp;quot; when writing panic handlers and other such code
with a body of &lt;code&gt;loop {}&lt;&#x2F;code&gt;. Some users also report that they&#x27;ve unintentionally
hit this bug in recursive code which accidentally lacks a base case.&lt;&#x2F;p&gt;
&lt;p&gt;Somewhat recently, LLVM added an intrinsic which tells the optimizer that
forward progress has been made. On nightly Rust, you can enable this with
&lt;code&gt;-Zinsert-sideeffect&lt;&#x2F;code&gt;, which will use some heuristics to insert it where it&#x27;s
possibly needed (currently, massively overshooting the minimal set).&lt;&#x2F;p&gt;
&lt;p&gt;However, recent attempts to enable this intrinsic by default hit a snag: it&#x27;s
very expensive on compile times to do so (&lt;a href=&quot;https:&#x2F;&#x2F;perf.rust-lang.org&#x2F;compare.html?start=66b0c97070f422cb82baaaafc79ee94cab4396c5&amp;amp;end=548b5e75afd6bad696920dfdb69c9812ce0488f1&quot;&gt;3-30% regressions&lt;&#x2F;a&gt;). There is some runtime effect as well; check builds (which do not
generate LLVM IR or run LLVM passes) regressed by up to 3-7%.&lt;&#x2F;p&gt;
&lt;p&gt;The current implementation in rustc emits calls to the side effect intrinsic
very aggressively; certainly in way more cases than is strictly necessary.
However, there&#x27;s not really any good ideas on how to improve the analysis rustc
does without missing edge cases: we&#x27;d have to be &amp;quot;as good&amp;quot; as LLVM to emit only
when necessary.&lt;&#x2F;p&gt;
&lt;p&gt;Upstream, in LLVM, discussion has been ongoing for some time around whether, and
how to, adjust LLVM&#x27;s model to permit frontends for languages like Rust to
opt-out of the forward progress guarantees. It seems unlikely that a solution
will materialize in upstream LLVM that allows us to opt-out in the short term.&lt;&#x2F;p&gt;
&lt;p&gt;However, having said that, side effect itself is likely improvable to at least
avoid the excessive consecutive calls, as demonstrated by this &lt;a href=&quot;https:&#x2F;&#x2F;gist.github.com&#x2F;nikic&#x2F;7e521def71d106c345a255e464b18d3f&quot;&gt;IR&lt;&#x2F;a&gt;
that occurs after LLVM optimizations. It seems plausible that those
improvements may also reduce the compile time hit that we see when enabling
side effect on the rustc side. Having said that, how simple these improvements
are is unclear.&lt;&#x2F;p&gt;
&lt;p&gt;We would love to hear feedback and suggestions on how to resolve this problem!
Please leave feedback on &lt;a href=&quot;https:&#x2F;&#x2F;internals.rust-lang.org&#x2F;t&#x2F;resolving-rusts-forward-progress-guarantees&#x2F;12003&quot;&gt;this internals
thread&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>All Hands Retrospective</title>
            <pubDate>Wed, 18 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/all-hands-retrospective/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/all-hands-retrospective/</guid>
            <description>&lt;p&gt;If you&#x27;re not already aware, the Rust All Hands event, originally scheduled for
March 16th–20th in Thessaloníki, Greece was cancelled in January. The All Hands&#x27;
is one of our members&#x27; favourite events of the year and we were quite
disappointed that we weren&#x27;t able to pull off the event this year. In the
interest of being transparent, as well as documenting for future events, we
have written a retrospective about what happened, what we learned, and the
future of the All Hands.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;timeline&quot;&gt;Timeline&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;context&quot;&gt;Context&lt;&#x2F;h3&gt;
&lt;p&gt;Both previous All Hands took place in Mozilla&#x27;s Berlin office. Mozilla
traditionally sponsored the event, providing the venue and catering, and also
paying for the flights and accommodation of volunteers who didn&#x27;t have a
company or other person to pay for them. It was a good way to bring the entire
community together for a week of planning, discussions, and camaraderie.&lt;&#x2F;p&gt;
&lt;p&gt;Still, after the last All Hands, it was clear that we couldn&#x27;t do a third one
in Mozilla&#x27;s Berlin office. The Rust org was simply growing too big. The
Berlin office didn&#x27;t really have the space to accommodate us.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;finding-a-space&quot;&gt;Finding a space.&lt;&#x2F;h3&gt;
&lt;p&gt;As a group, our first step was to see if we could find other companies to
sponsor a space. We followed a number of leads but ultimately never found
anyone that had a space to offer at a suitable time. We started looking
at other options, like private hacker spaces and universities. The University
of Macedonia in Thessaloniki, Greece made us a quite attractive offer, and
they had the right time available, so we decided to go for that.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;budgeting-and-sponsorships&quot;&gt;Budgeting and sponsorships.&lt;&#x2F;h3&gt;
&lt;p&gt;We in the All Hands group did our best to create a budget. Unfortunately we
did not have access to any expense reports from the previous years. We had a
survey we could use to estimate the number of attendees and a rough idea where
they were coming from. We knew the costs of the venue. We added fudge factors.
We thought we&#x27;d done a good job, though it would turn out that we were quite
off in our calculations.&lt;&#x2F;p&gt;
&lt;p&gt;However even based on our estimated budget, it was clear that Mozilla was not
going to be able to cover the costs alone. This seemed like a good opportunity
to try and build relationships with some of the companies that have started to
use Rust by approaching them for sponsorships. We weren&#x27;t sure, though, how 
many sponsorships we&#x27;d be able to get, and so we hit upon the idea of using
paid tickets.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;tickets&quot;&gt;Tickets&lt;&#x2F;h3&gt;
&lt;p&gt;The idea was that people could purchase a ticket to the event, which would
help to cover the costs, but that it was also okay to have a &lt;em&gt;&amp;quot;gratis&amp;quot;&lt;&#x2F;em&gt;
ticket. Tickets have the advantage of being relatively easy for people to
submit in their expense report if they are travelling with a company. We also
found a number of companies who might be interested in a more
traditional sponsorship.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;finding-a-bank-account&quot;&gt;Finding a bank account.&lt;&#x2F;h3&gt;
&lt;p&gt;Still, we had another problem. The Rust organisation does not have a bank
account we could use to collect and distribute money, and we didn&#x27;t have an
obvious entity to sign legal agreements.&lt;&#x2F;p&gt;
&lt;p&gt;At this point, we spoke to a company that might serve as a bank account. We
had a quick call and went over a plan that seemed promising. Mozilla would
contract with them for their services managing and organising the event, and
this would serve as Mozilla&#x27;s sponsorship. The other sponsorships and proceeds
from ticket sales would collect in their bank account and we would
manage distributions.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;pulling-the-trigger&quot;&gt;Pulling the trigger.&lt;&#x2F;h3&gt;
&lt;p&gt;At that point, we sent mail encouraging people to book tickets, and we also
started following up more with sponsors. Our expectation was that we would
soon have a bank account for collecting funds, and we started collecting
information to repay people who had booked travel.&lt;&#x2F;p&gt;
&lt;p&gt;In retrospect, it&#x27;s clear that this was premature. It seemed like all the
pieces were in place, and we knew that if people didn&#x27;t start booking tickets,
they never would. But the pieces were not in place, not actually, and we clearly
should have taken this moment ask whether we were really going to be able to
pull this off.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;realising-it-won-t-work&quot;&gt;Realising it won&#x27;t work.&lt;&#x2F;h3&gt;
&lt;p&gt;This all started to unravel about a month before the event. In short, we
encountered some logistical hurdles around finalising the business and legal
aspects within the organisation&#x27;s constraints that also prompted us to review
the finances in more detail. This revealed that our estimates were off. Thus,
we were faced with a tough decision:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;If we continue with the event, there was the chance that the logistics would
just fail to come together. That would leave attendees in Greece, out of
pocket, and without an All Hands to attend.&lt;&#x2F;li&gt;
&lt;li&gt;Further, we might not be able to raise enough money to be able to pay for
the entirety of people&#x27;s travel and lodging as we had promised. This would be
unfortunate, though perhaps something people could live with.&lt;&#x2F;li&gt;
&lt;li&gt;On the other hand, if we cancel, we have to deal with the fact that people
had already started booking travel, and not everyone would be able to get a
refund from their airline&#x2F;hotel, and accept that there might not be an
All Hands this year.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;After much analysis and discussion with the Rust core team, we ultimately
opted for the painful but ultimately safer route: cancelling the event. The
cost to cover cancelling in January was relatively low, and even if it did
come together we were worried about the high stress of pulling it off burning
people out of the project.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Addendum&lt;&#x2F;strong&gt; Since we cancelled the All Hands, outbreak of the &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;2019%E2%80%9320_coronavirus_pandemic&quot;&gt;COVID-19&lt;&#x2F;a&gt; in
Europe in the recent weeks, would have caused the event to be cancelled
regardless. In a weird twist of fate, we were fortunate to cancel when we did.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;lessons-learned&quot;&gt;Lessons Learned&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;strong&gt;Bound uncertainty and total cost.&lt;&#x2F;strong&gt; — Promising to cover all travel with
no kind of upper limit was unwise. It had worked in the past, perhaps, but the
event was growing, and that was partly luck. Organising an event is very complex
and there are a lot of unknowns, and it was clear for some of them we didn&#x27;t have
the time or resources to resolve them adequately.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Location, location, location&lt;&#x2F;strong&gt; — It was hard to find a good location. While
Thessaloníki was cheap and great in some ways, we encountered some logistical
hiccups that made it less than ideal. For example; we found that the cost of a
lot of the flights for our international members were quite high compared to
other European cities.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Know your audience&lt;&#x2F;strong&gt; — Some companies weren&#x27;t interested in sponsoring
because the event wasn&#x27;t sufficiently high profile, or because the &amp;quot;ROI&amp;quot;
(&amp;quot;Return On Investment&amp;quot;) didn&#x27;t quite fit into the budgets and categories it
would have to come from. We also had some uncertainty about how much
&amp;quot;participation&amp;quot; to offer in exchange for sponsorship, since we didn&#x27;t want to
give the impression that anyone could just &amp;quot;buy their way&amp;quot; into the All Hands —
at the same time, there is clear value to the Rust organisation in having
sponsors participate.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-future&quot;&gt;The Future&lt;&#x2F;h2&gt;
&lt;p&gt;Right now, we&#x27;re currently organising with Mozilla reimbursing anyone who had
purchased non-refundable ticket. We&#x27;re also going to take the time to step back
and re-evaluate what kind of event is possible, and what kind of event our
members want to attend.&lt;&#x2F;p&gt;
&lt;p&gt;If you&#x27;re a member of the Rust programming language organisation, you should
have received an email containing a link to a survey asking you about what
kind of All Hands you&#x27;d enjoy, and what you would want to attend. Once people
have had enough time to respond, we&#x27;ll publish the results on the
&amp;quot;Inside Rust&amp;quot; blog.&lt;&#x2F;p&gt;
&lt;p&gt;If you didn&#x27;t receive an email and you believe you should have, or you have
anything you&#x27;d like to mention in private to organisers. Please email us
at &lt;a href=&quot;mailto:rust-all-hands@rust-lang.org&quot;&gt;rust-all-hands@rust-lang.org&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s very unfortunate that we weren&#x27;t able to have the All Hands like we
planned. We know that it&#x27;s a lot of our members favourite Rust event, and we
would like to thank everyone for reaching out and being so understanding.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance Working Group Update: Meeting 12 March 2020</title>
            <pubDate>Tue, 17 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/mar-2020-first-governance-wg-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/mar-2020-first-governance-wg-meeting/</guid>
            <description>&lt;p&gt;Hello everyone! &lt;&#x2F;p&gt;
&lt;p&gt;We held another meeting of the Rust Governance Working Group on Zulip on 12 March.&lt;&#x2F;p&gt;
&lt;p&gt;The agenda included&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Follow up on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;pull&#x2F;2856&quot;&gt;the Project Group RFC&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Follow up on moving repositories (community, devtools, and nursery) into the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;&quot;&gt;Rust-Lang GitHub Org&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Pre-RFC process&lt;&#x2F;li&gt;
&lt;li&gt;How to manage RFC discussion&lt;&#x2F;li&gt;
&lt;li&gt;Plan Agenda for Next time&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;You can find the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2020.03.12.md&quot;&gt;detailed minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&quot;&gt;wg-governance&lt;&#x2F;a&gt; repository, but here is a quick summary: &lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Follow up on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;pull&#x2F;2856&quot;&gt;Project Group RFC&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Follow up on moving repos from community, devtools, and nursery into the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&quot;&gt;Rust-Lang GitHub Org&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Pre-RFC process&lt;&#x2F;li&gt;
&lt;li&gt;Managing RFC discussions&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;next-meeting&quot;&gt;Next meeting&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Our next meeting will be 26 March 2020 via &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;223182-wg-governance&quot;&gt;Zulip&lt;&#x2F;a&gt; 18-19 CET &#x2F; 1pm-2pm EST &#x2F; 10-11am PST.&lt;&#x2F;li&gt;
&lt;li&gt;In 2020 the agenda is always at https:&#x2F;&#x2F;hackmd.io&#x2F;ATj1rZJaRimaIfIWfAOYfQ&lt;&#x2F;li&gt;
&lt;li&gt;Current plan is:
&lt;ol&gt;
&lt;li&gt;Domain Working Group changes&lt;&#x2F;li&gt;
&lt;li&gt;Pre-RFC RFC (if ready)&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>Upcoming compiler-team design meetings</title>
            <pubDate>Fri, 13 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/mar-2020-upcoming-compiler-team-design-meetings/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/mar-2020-upcoming-compiler-team-design-meetings/</guid>
            <description>&lt;p&gt;In our &lt;a href=&quot;https:&#x2F;&#x2F;zulip-archive.rust-lang.org&#x2F;131828tcompiler&#x2F;40166planningmeeting20200313.html&quot;&gt;planning meeting today&lt;&#x2F;a&gt;, the &lt;a href=&quot;https:&#x2F;&#x2F;www.rust-lang.org&#x2F;governance&#x2F;teams&#x2F;compiler&quot;&gt;compiler team&lt;&#x2F;a&gt; has scheduled our
next batch of upcoming design meetings. You can find the exact times
on the compiler team&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;#meeting-calendar&quot;&gt;meeting calendar&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;On April 3rd (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=NGxqdmpndjI3N3FsZTM0bnRyNDU2NHNoYjMgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;), we will discuss
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;257&quot;&gt;rust-lang&#x2F;compiler-team#257&lt;&#x2F;a&gt;, which is a proposal to move the
&amp;quot;in-progress&amp;quot; rustc cranelift backend in tree.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;did-you-know&quot;&gt;Did you know?&lt;&#x2F;h3&gt;
&lt;p&gt;Most weeks, the compiler team has some sort of design meeting. These
meetings take place on Zulip and are open to all. Every 4 weeks, we do
a planning meeting to pick the next few meetings from the list of open
proposals. You can find &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;about&#x2F;steering-meeting&#x2F;&quot;&gt;more details about how the compiler-team
steering meeting process here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>The rustc-guide is now rustc-dev-guide</title>
            <pubDate>Fri, 13 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/rename-rustc-guide/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/rename-rustc-guide/</guid>
            <description>&lt;p&gt;You may or may not be aware of two similarly named resources:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustc&#x2F;index.html&quot;&gt;The rustc book&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;The rustc-guide&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;What&#x27;s the difference? The &amp;quot;rustc book&amp;quot; is intended as a guide for &lt;em&gt;users&lt;&#x2F;em&gt; of the
compiler. The &amp;quot;rustc-guide&amp;quot; is intended as a guide for &lt;em&gt;developers&lt;&#x2F;em&gt; of the
compiler. However, the names have always been confusingly similar.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;For that reason, we have decided to rename the &lt;code&gt;rustc-guide&lt;&#x2F;code&gt; to
&lt;code&gt;rustc-dev-guide&lt;&#x2F;code&gt;. You can now find it at &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&lt;&#x2F;a&gt;.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;We have put significant work into finding and updating links around the
&lt;code&gt;rust-lang&#x2F;*&lt;&#x2F;code&gt; repos. We have also put up a website in place of the former
&lt;code&gt;rustc-guide&lt;&#x2F;code&gt; website that redirects to the new one.&lt;&#x2F;p&gt;
&lt;p&gt;To update your git clone of the (former) &lt;code&gt;rustc-guide&lt;&#x2F;code&gt; repo, you can do the following:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;git remote set-url origin https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide.git
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will change where git thinks the &lt;code&gt;origin&lt;&#x2F;code&gt; remote repo is to
&lt;code&gt;rust-lang&#x2F;rustc-dev-guide&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;You can find more information in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&#x2F;issues&#x2F;602&quot;&gt;this issue&lt;&#x2F;a&gt;. If you have any questions or
concerns, please feel free to contact us either by opening an &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&quot;&gt;issue on the
rustc-dev-guide repo&lt;&#x2F;a&gt; or on our &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;196385-t-compiler.2Fwg-learning&quot;&gt;zulip channel&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>This Week in Rust is looking for a new maintainer.</title>
            <pubDate>Fri, 13 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/twir-new-lead/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/twir-new-lead/</guid>
            <description>&lt;p&gt;Vikrant Chaudhary (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nasa42&quot;&gt;@nasa42&lt;&#x2F;a&gt;) is retiring from &lt;a href=&quot;https:&#x2F;&#x2F;this-week-in-rust.org&quot;&gt;This Week in Rust&lt;&#x2F;a&gt;. He joined This Week in Rust in June 2015 with issue 84 and has been part of Rust Community team since February 2018. We&#x27;d like to thank Vikrant for his stewardship of TWiR these past five years, and making TWiR one of the community&#x27;s favourite newsletters. We wish him all the best in his future projects.&lt;&#x2F;p&gt;
&lt;p&gt;TWiR is now looking for a new lead maintainer. To help smooth the transition, Vikrant will be writing TWiR for 4 more weeks while we onboard a new maintainer. If you&#x27;re interested please, express your interest on our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;emberian&#x2F;this-week-in-rust&#x2F;issues&#x2F;1167&quot;&gt;GitHub Issue&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>March Lang Team Design Meetings</title>
            <pubDate>Wed, 11 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/mar-2020-lang-team-design-meetings/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/mar-2020-lang-team-design-meetings/</guid>
            <description>&lt;p&gt;We&#x27;ve scheduled our &lt;strong&gt;language team design meetings&lt;&#x2F;strong&gt; for March. We have plans for two meetings:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;March 16th -- we will summarize discussions from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;project-ffi-unwind&quot;&gt;the ffi-unwind project group&lt;&#x2F;a&gt; about whether we should permit foreign exceptions to propagate across the &amp;quot;C&amp;quot; ABI boundary, or establish a separate ABI (e.g., &amp;quot;C unwind&amp;quot;) for such cases.&lt;&#x2F;li&gt;
&lt;li&gt;March 23rd -- we will talk with James Munns about Sealed Rust (see the blog posts &lt;a href=&quot;https:&#x2F;&#x2F;ferrous-systems.com&#x2F;blog&#x2F;sealed-rust-the-pitch&#x2F;&quot;&gt;The Pitch&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;ferrous-systems.com&#x2F;blog&#x2F;sealed-rust-the-plan&#x2F;&quot;&gt;The Plan&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;about-the-language-team-design-meetings&quot;&gt;About the language team design meetings&lt;&#x2F;h2&gt;
&lt;p&gt;The idea of the design meeting is that it&#x27;s a time for us to have
in-depth discussions on some particular topic. This might be a burning
problem that we&#x27;ve discovered, an update on some existing design work,
or a forward looking proposal.&lt;&#x2F;p&gt;
&lt;p&gt;The meetings are open for anyone to listen in and attend. They are
typically also recorded and posted online, along with minutes, after
the fact. They generally take place on Mondays at &amp;quot;noon Boston time&amp;quot;
-- but for the precise scheduling you should check the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;#meeting-calendar&quot;&gt;lang team
calendar&lt;&#x2F;a&gt;. Scheduled meetings are subject to change and
cancelation. In that case, the calendar events will be updated.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Recent and future pattern matching improvements</title>
            <pubDate>Wed, 04 Mar 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/recent-future-pattern-matching-improvements/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/recent-future-pattern-matching-improvements/</guid>
            <description>&lt;p&gt;Much of writing software revolves around checking if some data has some shape (&amp;quot;pattern&amp;quot;), extracting information from it, and then reacting if there was a match. To facilitate this, many modern languages, Rust included, support what is known as &amp;quot;pattern matching&amp;quot;.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you are new to Rust or want to refresh your knowledge, you may first want to read chapters &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;book&#x2F;ch06-00-enums.html&quot;&gt;6, Enums and Pattern Matching&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;book&#x2F;ch18-00-patterns.html&quot;&gt;18, Patterns and Matching&lt;&#x2F;a&gt; in the book, or read more about &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;reference&#x2F;expressions&#x2F;match-expr.html&quot;&gt;&lt;code&gt;match&lt;&#x2F;code&gt; expressions&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;reference&#x2F;patterns.html&quot;&gt;patterns&lt;&#x2F;a&gt; in the reference.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Pattern matching in Rust works by checking if a &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;reference&#x2F;expressions.html#place-expressions-and-value-expressions&quot;&gt;&lt;em&gt;place&lt;&#x2F;em&gt;&lt;&#x2F;a&gt; in memory (the &amp;quot;data&amp;quot;) matches a certain &lt;em&gt;pattern&lt;&#x2F;em&gt;. In this post, we will look at some recent improvements to patterns soon available in stable Rust as well as some more already available in nightly.&lt;&#x2F;p&gt;
&lt;p&gt;If you are familiar with the nightly features discussed and would like to help out with the efforts to drive them to stable, jump ahead to &lt;a href=&quot;https:&#x2F;&#x2F;xampprocky.github.io&#x2F;blog.rust-lang.org&#x2F;inside-rust&#x2F;recent-future-pattern-matching-improvements&#x2F;#how-can-i-help?&quot;&gt;*How can I help?&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;subslice-patterns-head-tail&quot;&gt;Subslice patterns, &lt;code&gt;[head, tail @ ..]&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Lists are one of the most basic and common data structures found in software. In Rust, lists are usually a contiguous sequence of elements in memory, or a &lt;em&gt;slice&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Since slices are so commonplace, it is important that working with them is easy. To that end, we stabilized &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;2018&#x2F;05&#x2F;10&#x2F;Rust-1.26.html#basic-slice-patterns&quot;&gt;&lt;em&gt;fixed-length slice patterns&lt;&#x2F;em&gt; in Rust 1.26.0&lt;&#x2F;a&gt;. So now it is possible to e.g., write &lt;code&gt;let [a, b, c] = my_array;&lt;&#x2F;code&gt; to destructure an array of 3 elements. Oftentimes, however, we&#x27;re working with a slice of unknown length, so given only fixed-length slice patterns, we have to provide a fallback &lt;code&gt;match&lt;&#x2F;code&gt; arm with e.g. &lt;code&gt;_&lt;&#x2F;code&gt; as the pattern.&lt;&#x2F;p&gt;
&lt;p&gt;In Rust 1.42.0, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;67712&quot;&gt;we are stabilizing &lt;em&gt;subslice patterns&lt;&#x2F;em&gt;&lt;&#x2F;a&gt;. To introduce a subslice pattern, we use &lt;code&gt;..&lt;&#x2F;code&gt; which denotes a variable-length gap, matching as many elements as possible not matched by the patterns before and after the &lt;code&gt;..&lt;&#x2F;code&gt;. For example, in a parser, we would like to error when a list of attributes, &lt;code&gt;attrs&lt;&#x2F;code&gt;, is not followed by an item, &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;nightly-rustc&#x2F;rustc_parse&#x2F;parser&#x2F;struct.Parser.html#method.recover_attrs_no_item&quot;&gt;so we write&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;&#x2F; Recover if we parsed attributes and expected an item but there was none.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;recover_attrs_no_item&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;mut &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;attrs&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &amp;amp;[Attribute]) -&amp;gt; PResult&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;&amp;#39;a&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, ()&amp;gt; {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(start, end) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; attrs {
        [] =&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;Ok(()),
        [x0] =&amp;gt; (x0, x0),
        [x0, .., xn] =&amp;gt; (x0, xn),
    };
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; msg = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; end.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;is_doc_comment&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;expected item after doc comment&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;
    } &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;{
        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;expected item after attributes&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;
    };
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let mut&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; err = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;struct_span_err&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(end.span, msg);
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; end.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;is_doc_comment&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
        err.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;span_label&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(end.span, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;this doc comment doesn&amp;#39;t document anything&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;);
    }
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;[.., penultimate, _] = attrs {
        err.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;span_label&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(start.span.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;to&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(penultimate.span), &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;other attributes here&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;);
    }
    Err(err)
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here we have two subslice patterns, the first one being &lt;code&gt;[x0, .., xn]&lt;&#x2F;code&gt;. In this case, the pattern binds &lt;code&gt;x0&lt;&#x2F;code&gt;, the first element, and &lt;code&gt;xn&lt;&#x2F;code&gt;, the last element, and ignores everything in the middle, matching a slice with at least two elements in total. Meanwhile, &lt;code&gt;[]&lt;&#x2F;code&gt; and &lt;code&gt;[x0]&lt;&#x2F;code&gt; match cases with fewer than two elements, so the compiler knows that we have covered all possibilities. In the latter case, we extract the &lt;code&gt;penultimate&lt;&#x2F;code&gt; element of the slice, which, as the name suggests, also requires that the slice has at least two elements.&lt;&#x2F;p&gt;
&lt;p&gt;We can also bind a subslice to a variable. For example, suppose we want to disallow &lt;code&gt;...&lt;&#x2F;code&gt; in all but the last parameter of a function. If so, we can write:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;match &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;amp;*fn_decl.inputs {
    ... &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; other arms
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;[ps @ .., _] =&amp;gt; {
        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Param { ty, span, .. } in ps {
            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;TyKind::CVarArgs = ty.kind {
                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;err_handler&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;span_err&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(
                    *span,
                    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;`...` must be the last argument of a C-variadic function&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;,
                );
            }
        }
    }
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here, &lt;code&gt;ps @ ..&lt;&#x2F;code&gt; will bind the initial elements of the slice to &lt;code&gt;ps&lt;&#x2F;code&gt; and ignore the last element.&lt;&#x2F;p&gt;
&lt;p&gt;After more than 7 years of baking in nightly, with many twists and turns, subslice patterns will finally be stable. To get here, we&#x27;ve had to redesign the feature, plug soundness holes in the borrow checker, and substantially refactor the exhaustiveness checker. For more on how we got here, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;67712&quot;&gt;read the stabilization report&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;thomashartmann.dev&#x2F;blog&#x2F;feature(slice_patterns)&#x2F;&quot;&gt;Thomas Hartmann&#x27;s blog post&lt;&#x2F;a&gt;, and stay tuned for the 1.42.0 release announcement  on the 12th of March.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;nested-or-patterns&quot;&gt;Nested OR-patterns&lt;&#x2F;h2&gt;
&lt;p&gt;When pattern matching on an &lt;code&gt;enum&lt;&#x2F;code&gt;, the logic for some of the variants may be exactly the same. To avoid repeating ourselves, the &lt;code&gt;|&lt;&#x2F;code&gt; separator in &lt;code&gt;match&lt;&#x2F;code&gt;, &lt;code&gt;if let&lt;&#x2F;code&gt;, or &lt;code&gt;while let&lt;&#x2F;code&gt; expressions can be used to say that the branch should be taken if any of the &lt;code&gt;|&lt;&#x2F;code&gt;-separated patterns match. For example, we may write:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Any local node that may call something in its body block should be explored.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;should_explore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tcx&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: TyCtxt&amp;lt;&amp;#39;_&amp;gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hir_id&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: hir::HirId) -&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;bool &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;{
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tcx.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;hir&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;find&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(hir_id) {
        Some(Node::Item(..))
        | Some(Node::ImplItem(..))
        | Some(Node::ForeignItem(..))
        | Some(Node::TraitItem(..))
        | Some(Node::Variant(..))
        | Some(Node::AnonConst(..))
        | Some(Node::Pat(..)) =&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
        _ =&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
    }
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is serviceable, but &lt;code&gt;Some(_)&lt;&#x2F;code&gt; is still repeated several times. With &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;54883&quot;&gt;&lt;code&gt;#![feature(or_patterns)]&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, which recently became usable on nightly, this repetition can be avoided:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Any local node that may call something in its body block should be explored.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;should_explore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tcx&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: TyCtxt&amp;lt;&amp;#39;_&amp;gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hir_id&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: hir::HirId) -&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;bool &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;{
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tcx.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;hir&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;find&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(hir_id) {
        Some(
            Node::Item(..)
            | Node::ImplItem(..)
            | Node::ForeignItem(..)
            | Node::TraitItem(..)
            | Node::Variant(..)
            | Node::AnonConst(..)
            | Node::Pat(..),
        ) =&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
        _ =&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
    }
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Previously, when using &lt;code&gt;|&lt;&#x2F;code&gt; in a &lt;code&gt;match&lt;&#x2F;code&gt; expression, the &lt;code&gt;|&lt;&#x2F;code&gt; syntax was part of &lt;code&gt;match&lt;&#x2F;code&gt; itself. With &lt;code&gt;or_patterns&lt;&#x2F;code&gt;, this is now part of patterns themselves, so you can nest OR-patterns arbitrarily, and use them in &lt;code&gt;let&lt;&#x2F;code&gt; statements too:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;Ok(x) | Err(x) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;();
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;An OR-pattern covers the &lt;em&gt;union&lt;&#x2F;em&gt; of all the &lt;code&gt;|&lt;&#x2F;code&gt;-ed (&amp;quot;or-ed&amp;quot;) patterns. To ensure that whatever alternative matched, all bindings are consistent and initialized, each or-ed pattern must include the exact same set of bindings, with the same types, and the same binding modes.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bindings-after&quot;&gt;Bindings after &lt;code&gt;@&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;When matching on a certain substructure, you sometimes want to hold on to the whole. For example, given &lt;code&gt;Some(Expr { .. })&lt;&#x2F;code&gt;, you would like to bind the outer &lt;code&gt;Some(_)&lt;&#x2F;code&gt; layer. In Rust, this can be done using e.g., &lt;code&gt;expr @ Some(Expr { .. })&lt;&#x2F;code&gt;, which binds the matched place to &lt;code&gt;expr&lt;&#x2F;code&gt; while also ensuring that it matches &lt;code&gt;Some(Expr { .. })&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Suppose also that &lt;code&gt;Expr&lt;&#x2F;code&gt; has a field &lt;code&gt;span&lt;&#x2F;code&gt; that you would also use. In ancient times, that is before Rust 1.0, this was possible, but today, it results in an error:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;error[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;E0303&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;]: pattern bindings are not allowed after an `@`
 --&amp;gt; src&#x2F;lib.rs:L:C
  |
L |         bar @ Some(Expr { span }) =&amp;gt; {}
  |                           ^^^^ not allowed after `@`
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This was turned into an error in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;16053&quot;&gt;#16053&lt;&#x2F;a&gt;, mainly due to the difficulties of encoding borrow checking rules in a sound way in the old AST based borrow checker.&lt;&#x2F;p&gt;
&lt;p&gt;Since then, we have &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;64790&quot;&gt;removed the old borrow checker&lt;&#x2F;a&gt; in favor of one based on &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;mir&#x2F;index.html&quot;&gt;MIR&lt;&#x2F;a&gt;, which is a simpler, and more appropriate data structure for borrow checking. Specifically, in the case of a statement like &lt;code&gt;let ref x @ ref y = a;&lt;&#x2F;code&gt;, we would get roughly the same MIR as if we had used &lt;code&gt;let x = &amp;amp;a; let y = &amp;amp;a;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;So now that having bindings to the right of &lt;code&gt;@&lt;&#x2F;code&gt; is handled uniformly and correctly by the borrow checker (e.g., the compiler won&#x27;t allow &lt;code&gt;ref x @ ref mut y&lt;&#x2F;code&gt;), we have decided to allow them under &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;65490&quot;&gt;&lt;code&gt;#![feature(bindings_after_at)]&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, now available on nightly. With the feature gate enabled, you may for example write:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;#![&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;feature&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(bindings_after_at)]

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x @ Some(y) = Some(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;) {
        dbg!(x, y);
    }
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Our hope is that with providing this feature, we remove one surprising corner of the language.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;combining-by-move-and-by-ref-bindings&quot;&gt;Combining by-move and by-&lt;code&gt;ref&lt;&#x2F;code&gt; bindings&lt;&#x2F;h2&gt;
&lt;p&gt;For similar reasons as noted in the case of bindings after &lt;code&gt;@&lt;&#x2F;code&gt;, Rust does not currently allow you to combine normal by-move bindings with those that are by-&lt;code&gt;ref&lt;&#x2F;code&gt;. For example, should you write...:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tup = (&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;to_string&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(), &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(x, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ref&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; y) = tup;
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;... you would get an error:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;error[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;E0009&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;]: cannot bind by-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;move&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; and by-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ref &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;in the same pattern
 --&amp;gt; src&#x2F;main.rs:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10
  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(x, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ref&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; y) = tup;
  |          ^  ----- by-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ref&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; pattern &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;here
  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|          |
  |          by-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;move&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; pattern here
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;At the same time, however, the compiler is perfectly happy to allow...:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tup = (&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;to_string&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(), &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x = tup.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let ref&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; y = tup.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;... even though there is no semantic difference between these programs.&lt;&#x2F;p&gt;
&lt;p&gt;Now that we have moved to the new borrow checker, as outlined in the previous section, we have relaxed this restriction on nightly as well, so under &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;68354&quot;&gt;&lt;code&gt;#![feature(move_ref_pattern)]&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, you may write:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;#![&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;feature&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(move_ref_pattern)]

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tup = (&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;to_string&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(), &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(x, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ref&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; y) = tup;
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;how-can-i-help&quot;&gt;How can I help?&lt;&#x2F;h2&gt;
&lt;p&gt;To recap, we have three unstable features, all improving pattern matching in different ways:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;54883&quot;&gt;&lt;code&gt;#![feature(or_patterns)]&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, which allows you to arbitrarily nest or-patterns e.g. &lt;code&gt;Some(Foo | Bar)&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;65490&quot;&gt;&lt;code&gt;#![feature(bindings_after_at)]&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, which allows e.g., &lt;code&gt;ref x @ Some(ref y)&lt;&#x2F;code&gt; &lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;68354&quot;&gt;&lt;code&gt;#![feature(move_ref_pattern)]&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, which allows e.g., &lt;code&gt;(x, ref y)&lt;&#x2F;code&gt; where &lt;code&gt;x&lt;&#x2F;code&gt; is by-move and &lt;code&gt;y&lt;&#x2F;code&gt; is by-reference&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;To help us transition these features over to stable Rust, we need your help to ensure that they meet the expected quality standards. To help out, consider:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Using the features in your code where applicable, if a nightly compiler is something you are OK with, and reporting any bugs, problems, deficiencies in diagnostics, etc. as issues.&lt;&#x2F;li&gt;
&lt;li&gt;Looking through the reported issues under the feature gate labels (e.g., &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;labels&#x2F;F-or_patterns&quot;&gt;&lt;code&gt;F-or_patterns&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;) and seeing if you can help out with any of them.
&lt;ul&gt;
&lt;li&gt;In particular, if you can help out with writing tests, that is appreciated.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Thanks for reading, and happy pattern matching!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance Working Group Update: Meeting 27 February 2020</title>
            <pubDate>Thu, 27 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-second-governance-wg-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-second-governance-wg-meeting/</guid>
            <description>&lt;p&gt;Hello everyone! &lt;&#x2F;p&gt;
&lt;p&gt;This was the first governance working group meeting on Zulip.
The following meeting will take place on 12 March.
Reminder that EST &amp;amp; PST have changed to DST (summer time) as of 8 March, and CET will not change to DST until 29 March. These are most active timezones at present in governance wg so other timezones not evaluated. &lt;&#x2F;p&gt;
&lt;p&gt;The agenda included &lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Access policy RFC draft from Nell&lt;&#x2F;li&gt;
&lt;li&gt;Pre-RFC process - determine right place to talk about this&lt;&#x2F;li&gt;
&lt;li&gt;Follow-up on moving (community, devtools, nursery) to rust-lang&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;You can find the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2020.02.27&quot;&gt;detailed minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;&quot;&gt;wg-governance&lt;&#x2F;a&gt; repository, but here is a quick summary: &lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Access policy RFC draft
&lt;ul&gt;
&lt;li&gt;Approved to submit as RFC&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Pre-RFC process
&lt;ul&gt;
&lt;li&gt;Discussing on 12 March&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Follow-up on moving (community, devtools, nursery) to rust-lang
&lt;ul&gt;
&lt;li&gt;Not complete, but some items discussed, list in official minutes&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;There was additional off-agenda discussion after meeting about&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Meeting Length&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Outcome: 45-60 minutes&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Handling Alumni&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Need to define what info is needed&lt;&#x2F;li&gt;
&lt;li&gt;How talk about team Alumni who are not project alumni&lt;&#x2F;li&gt;
&lt;li&gt;Further discussion between XAMPPRocky and PietroAlbini, needs to be reported&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Intro to contributing&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Need a general intro as current info focused on main groups&lt;&#x2F;li&gt;
&lt;li&gt;Needs followup&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Followup items not addressed on 12 March can be addressed in later meetings or async on Zulip, outcomes will be reported. &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;223182-wg-governance&#x2F;topic&#x2F;meeting.202020-02-27&quot;&gt;Zulip thread&lt;&#x2F;a&gt; links will be included in meeting summary blog posts in future. &lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;next-meeting&quot;&gt;Next meeting&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Our next meeting will be 12 March 2020 via Zulip 18-19 CET &#x2F; 1pm-2pm EST &#x2F; 10-11am PST.&lt;&#x2F;li&gt;
&lt;li&gt;In 2020 the agenda is always at https:&#x2F;&#x2F;hackmd.io&#x2F;ATj1rZJaRimaIfIWfAOYfQ&lt;&#x2F;li&gt;
&lt;li&gt;Current plan is:
&lt;ol&gt;
&lt;li&gt;Pre-RFC process&lt;&#x2F;li&gt;
&lt;li&gt;How to manage RFC discussion&lt;&#x2F;li&gt;
&lt;li&gt;Plan agenda for next time, see Action Items in minutes from Feb 27&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>Announcing the first FFI-unwind project design meeting</title>
            <pubDate>Thu, 27 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/ffi-unwind-design-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/ffi-unwind-design-meeting/</guid>
            <description>&lt;p&gt;The FFI-unwind project group, announced in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;pull&#x2F;2797&quot;&gt;this RFC&lt;&#x2F;a&gt;, is
working to extend the language to support unwinding that crosses FFI
boundaries.&lt;&#x2F;p&gt;
&lt;p&gt;We have reached our first technical decision point, on a question we have been
discussing internally for quite a while. This blog post lays out the arguments
on each side of the issue and invites the Rust community to join us at an
upcoming meeting to help finalize our decision, which will be formalized and
published as our first language-change RFC. This RFC will propose an &amp;quot;MVP&amp;quot;
specification for well-defined cross-language unwinding.&lt;&#x2F;p&gt;
&lt;p&gt;The meeting will be on &lt;a href=&quot;https:&#x2F;&#x2F;arewemeetingyet.com&#x2F;UTC&#x2F;2020-03-02&#x2F;17:00&#x2F;Lang%20Team%20Design%20Meeting:%20FFI-unwind#eyJ1cmwiOiJodHRwczovL21vemlsbGEuem9vbS51cy9qLzc2ODIzMTc2MCJ9&quot;&gt;March 2nd&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;background-what-is-unwinding&quot;&gt;Background: what is unwinding?&lt;&#x2F;h2&gt;
&lt;p&gt;Exceptions are a familiar control flow mechanism in many programming languages.
They are particularly commonplace in managed languages such as Java, but they
are also part of the C++ language, which introduced them to the world of
unmanaged systems programming.&lt;&#x2F;p&gt;
&lt;p&gt;When an exception is thrown, the runtime &lt;em&gt;unwinds&lt;&#x2F;em&gt; the stack, essentially
traversing it backwards and calling clean-up or error-recovery code such as
destructors or &lt;code&gt;catch&lt;&#x2F;code&gt; blocks.&lt;&#x2F;p&gt;
&lt;p&gt;Compilers may implement their own unwinding mechanisms, but in native code such
as Rust binaries, the mechanism is more commonly provided by the platform ABI.&lt;&#x2F;p&gt;
&lt;p&gt;It is well known that Rust does not have exceptions as such. But Rust &lt;em&gt;does&lt;&#x2F;em&gt;
support unwinding! There are two scenarios that will cause unwinding to occur:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;By default, Rust&#x27;s &lt;code&gt;panic!()&lt;&#x2F;code&gt; unwinds the stack.&lt;&#x2F;li&gt;
&lt;li&gt;Using FFI, Rust can call functions in other languages (such as C++) that can
unwind the stack.
&lt;ul&gt;
&lt;li&gt;There are some special cases where C libraries can actually cause
unwinding.  For instance, on Microsoft platforms, &lt;code&gt;longjmp&lt;&#x2F;code&gt; is implemented
as &amp;quot;forced unwinding&amp;quot; (see below)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Currently, when foreign (non-Rust) code invokes Rust code, the behavior of a
&lt;code&gt;panic!()&lt;&#x2F;code&gt; unwind that &amp;quot;escapes&amp;quot; from Rust is explicitly undefined. Similarly,
when Rust calls a foreign function that unwinds, the behavior once the unwind
operation encounters Rust frames is undefined. The primary reason for this is
to ensure that Rust implementations may use their own unwinding mechanism,
which may not be compatible with the platform-provided &amp;quot;native&amp;quot; unwinding
mechanism. Currently, however, &lt;code&gt;rustc&lt;&#x2F;code&gt; uses the native mechanism, and there are
no plans to change this.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;forced-unwinding&quot;&gt;Forced unwinding&lt;&#x2F;h3&gt;
&lt;p&gt;Platform ABIs can define a special kind of unwinding called &amp;quot;forced unwinding.&amp;quot;
This type of unwinding works regardless of whether the code being unwound
supports unwinding or not. However, destructors may not be executed if the
frames being unwound do not have unwinding support.&lt;&#x2F;p&gt;
&lt;p&gt;There are two common examples of forced unwinding:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;On Windows platforms, &lt;code&gt;longjmp&lt;&#x2F;code&gt; is implemented as a forced unwind.&lt;&#x2F;li&gt;
&lt;li&gt;On glibc Linux, &lt;code&gt;pthread_exit&lt;&#x2F;code&gt; and &lt;code&gt;pthread_cancel&lt;&#x2F;code&gt; are implemented as a forced unwind.
&lt;ul&gt;
&lt;li&gt;In fact, &lt;code&gt;pthread_cancel&lt;&#x2F;code&gt; can cause all manner of C functions to unwind,
including common functions like &lt;code&gt;read&lt;&#x2F;code&gt; and &lt;code&gt;write&lt;&#x2F;code&gt;.  (For a complete list,
search for &amp;quot;cancellation points&amp;quot; in the &lt;a href=&quot;http:&#x2F;&#x2F;man7.org&#x2F;linux&#x2F;man-pages&#x2F;man7&#x2F;pthreads.7.html&quot;&gt;pthreads man page&lt;&#x2F;a&gt;.)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;requirements-for-any-cross-language-unwinding-specification&quot;&gt;Requirements for any cross-language unwinding specification&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Unwinding between Rust functions (and in particular unwinding of Rust panics)
may not necessarily use the system unwinding mechanism
&lt;ul&gt;
&lt;li&gt;In practice, we do use the system mechanism today, but we would like to
reserve the freedom to change this.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;If you enable &lt;code&gt;-Cpanic=abort&lt;&#x2F;code&gt;, we are able to optimize the size of binaries
to remove most code related to unwinding.
&lt;ul&gt;
&lt;li&gt;Even with &lt;code&gt;-Cpanic=unwind&lt;&#x2F;code&gt; it should be possible to optimize away code when
unwinding is known to never occur.&lt;&#x2F;li&gt;
&lt;li&gt;In practice, most &amp;quot;C&amp;quot; functions are never expected to unwind (because they
are written in C, for example, and not in C++).
&lt;ul&gt;
&lt;li&gt;However, because unwinding is now part of most system ABIs, even C
functions can unwind — most notably cancellation points triggered
by &lt;code&gt;pthread_cancel&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Changing the behavior from &lt;code&gt;-Cpanic=unwind&lt;&#x2F;code&gt; to &lt;code&gt;-Cpanic=abort&lt;&#x2F;code&gt; should not
cause Undefined Behavior.
&lt;ul&gt;
&lt;li&gt;However, this may not be tenable, or at least not without making binaries
much larger. See the discussion below for more details.&lt;&#x2F;li&gt;
&lt;li&gt;It may, of course, cause programs to abort that used to execute
successfully. This could occur if a panic would&#x27;ve been caught and
recovered.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;We cannot change the ABI (the &lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; in &lt;code&gt;extern &amp;quot;C&amp;quot;&lt;&#x2F;code&gt;) of functions in the libc
crate, because this would be a breaking change: function pointers of different
ABIs have different types.
&lt;ul&gt;
&lt;li&gt;This is relevant for the libc functions which may perform forced unwinding
when &lt;code&gt;pthread_cancel&lt;&#x2F;code&gt; is called.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;the-primary-question-introduce-a-new-abi-or-let-the-c-abi-permit-unwinding&quot;&gt;The primary question: introduce a new ABI, or let the &lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; ABI permit unwinding?&lt;&#x2F;h2&gt;
&lt;p&gt;The core question that we would like to decide is whether the &lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; ABI, as
defined by Rust, should permit unwinding.&lt;&#x2F;p&gt;
&lt;p&gt;This is not a question we expected to be debating. We&#x27;ve long declared that
unwinding through Rust&#x27;s &lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; ABI is undefined behavior. In part, this is
because nobody had spent the time to figure out what the correct behavior would
be, or how to implement it, although (as we&#x27;ll see shortly) there are other
good reasons for this choice. &lt;&#x2F;p&gt;
&lt;p&gt;In any case, in PR #65646, @Amanieu proposed that we could, in fact, simply
define the behavior of unwinding across &lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; boundaries. In discussing this,
discovered that the question of whether the &lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; ABI should permit unwinding was
less clear-cut than we had assumed.&lt;&#x2F;p&gt;
&lt;p&gt;If the &lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; ABI does not permit unwinding, a new ABI, called &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt;,
will be introduced specifically to support unwinding.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;three-specific-proposals&quot;&gt;Three specific proposals&lt;&#x2F;h2&gt;
&lt;p&gt;The project group has narrowed the design space down to three specific
proposals. Two of these introduce the new &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt; ABI, and one does not.&lt;&#x2F;p&gt;
&lt;p&gt;Each proposal specifies the behavior of each type of unwind (Rust &lt;code&gt;panic!&lt;&#x2F;code&gt;,
foreign (e.g. C++), and forced (e.g. &lt;code&gt;pthread_exit&lt;&#x2F;code&gt;)) when it encounters an
ABI boundary under either the &lt;code&gt;panic=unwind&lt;&#x2F;code&gt; or &lt;code&gt;panic=abort&lt;&#x2F;code&gt; compile-mode.&lt;&#x2F;p&gt;
&lt;p&gt;Note that currently, &lt;code&gt;catch_unwind&lt;&#x2F;code&gt; does not intercept foreign unwinding
(forced or unforced), and our initial RFCs will not change that. We may decide
at a later date to define a way for Rust code to intercept foreign exceptions.&lt;&#x2F;p&gt;
&lt;p&gt;Throughout, the  unwind generated by &lt;code&gt;panic!&lt;&#x2F;code&gt; will be referred to as
&lt;code&gt;panic&lt;&#x2F;code&gt;-unwind.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;proposal-1-introduce-c-unwind-minimal-specification&quot;&gt;Proposal 1: Introduce &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt;, minimal specification&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; ABI boundary, &lt;code&gt;panic=&amp;lt;any&amp;gt;&lt;&#x2F;code&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;panic&lt;&#x2F;code&gt;-unwind: program aborts&lt;&#x2F;li&gt;
&lt;li&gt;forced unwinding, no destructors: unwind behaves normally&lt;&#x2F;li&gt;
&lt;li&gt;other foreign unwinding: undefined behavior&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt; ABI boundary
&lt;ul&gt;
&lt;li&gt;With &lt;code&gt;panic=unwind&lt;&#x2F;code&gt;: all types of unwinding behave normally&lt;&#x2F;li&gt;
&lt;li&gt;With &lt;code&gt;panic=abort&lt;&#x2F;code&gt;: all types of unwinding abort the program&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This proposal provides 2 ABIs, each suited for different purposes: you would
generally use &lt;code&gt;extern &amp;quot;C&amp;quot;&lt;&#x2F;code&gt; when interacting with C APIs (making sure to avoid
destructors where &lt;code&gt;longjmp&lt;&#x2F;code&gt; might be used), and &lt;code&gt;extern &amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt;
when interacting with C++ APIs. The main advantage of this proposal is that
switching between &lt;code&gt;panic=unwind&lt;&#x2F;code&gt; and &lt;code&gt;panic=abort&lt;&#x2F;code&gt; does not introduce UB if you
have correctly marked all potential unwinding calls as &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt; (your
program will abort instead).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;proposal-2-introduce-c-unwind-forced-unwinding-always-permitted&quot;&gt;Proposal 2: Introduce &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt;, forced unwinding always permitted&lt;&#x2F;h3&gt;
&lt;p&gt;This is the same as the previous design, except that when compiled with
&lt;code&gt;panic=abort&lt;&#x2F;code&gt;, forced unwinding would &lt;em&gt;not&lt;&#x2F;em&gt; be intercepted at &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt; ABI
boundaries; that is, they would behave normally (though still UB if there are
any destructors), without causing the program to abort. &lt;code&gt;panic&lt;&#x2F;code&gt;-unwind and
non-forced foreign exceptions would still cause the program to abort.&lt;&#x2F;p&gt;
&lt;p&gt;The advantage of treating forced unwinding differently is that it reduces
portability incompatibilities. Specifically, it ensures that using &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt;
cannot cause &lt;code&gt;longjmp&lt;&#x2F;code&gt; or &lt;code&gt;pthread_exit&lt;&#x2F;code&gt; to stop working (abort the program)
when the target platform and&#x2F;or compile flags are changed.  With proposal 1,
&lt;code&gt;longjmp&lt;&#x2F;code&gt; will be able to cross &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt; boundaries &lt;em&gt;except&lt;&#x2F;em&gt; on Windows
with MSVC under &lt;code&gt;panic=abort&lt;&#x2F;code&gt;, and &lt;code&gt;pthread_exit&lt;&#x2F;code&gt; will work inside &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt;
functions &lt;em&gt;except&lt;&#x2F;em&gt; when linked with glibc under &lt;code&gt;panic=abort&lt;&#x2F;code&gt;. The downside of
this proposal is that the abort stubs around &lt;code&gt;&amp;quot;C unwind&amp;quot;&lt;&#x2F;code&gt; calls in &lt;code&gt;panic=abort&lt;&#x2F;code&gt;
become more complicated since they need to distinguish between different types
of foreign exceptions.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;proposal-3-no-new-abi&quot;&gt;Proposal 3: No new ABI&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;panic=unwind&lt;&#x2F;code&gt;: unwind behaves normally&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;panic=abort&lt;&#x2F;code&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;panic&lt;&#x2F;code&gt;-unwind: does not exist; &lt;code&gt;panic!&lt;&#x2F;code&gt; aborts the program&lt;&#x2F;li&gt;
&lt;li&gt;forced unwinding, no destructors: unwind behaves normally&lt;&#x2F;li&gt;
&lt;li&gt;other foreign unwinding: undefined behavior&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The main advantage of this proposal is its simplicity: there is only one ABI and
the behavior of &lt;code&gt;panic=abort&lt;&#x2F;code&gt; is identical to that of &lt;code&gt;-fno-exceptions&lt;&#x2F;code&gt; in C++.
However this comes with the downside that switching to &lt;code&gt;panic=abort&lt;&#x2F;code&gt; may in some
cases introduce UB (though only in unsafe code) if FFI calls unwind through Rust
code.&lt;&#x2F;p&gt;
&lt;p&gt;Another advantage is that forced unwinding from existing functions defined in
the &lt;code&gt;libc&lt;&#x2F;code&gt; crate such as &lt;code&gt;pthread_exit&lt;&#x2F;code&gt; and &lt;code&gt;longjmp&lt;&#x2F;code&gt; will be able to unwind
frames with destructors when compiled with &lt;code&gt;panic=unwind&lt;&#x2F;code&gt;, which is not possible
with the other proposals.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;comparison-table-for-the-proposed-designs&quot;&gt;Comparison table for the proposed designs&lt;&#x2F;h2&gt;
&lt;p&gt;In this table, &amp;quot;UB&amp;quot; stands for &amp;quot;undefined behavior&amp;quot;. We believe that all of
these instances of undefined behavior could be detected at runtime, but the
code to do so would impose an undesirable code-size penalty, entirely negating
the optimizations made possible by using &lt;code&gt;panic=unwind&lt;&#x2F;code&gt; or the non-unwinding
&lt;code&gt;&amp;quot;C&amp;quot;&lt;&#x2F;code&gt; ABI. This code would therefore only be appropriate for debug builds.
Additionally, the complexity of implementing such checks may outweight their
benefits.&lt;&#x2F;p&gt;
&lt;p&gt;Note that unwinding through a frame that has destructors without running those
destructors (e.g. because they have been optimized out by &lt;code&gt;panic=abort&lt;&#x2F;code&gt;) is
always undefined behavior.&lt;&#x2F;p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;&#x2F;th&gt;
&lt;th&gt;&lt;code&gt;panic&lt;&#x2F;code&gt;-unwind&lt;&#x2F;th&gt;
&lt;th&gt;Forced unwind, no destructors&lt;&#x2F;th&gt;
&lt;th&gt;Forced unwind with destructors&lt;&#x2F;th&gt;
&lt;th&gt;Other foreign unwind&lt;&#x2F;th&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Proposals 1 &amp;amp; 2, &lt;code&gt;&quot;C&quot;&lt;&#x2F;code&gt; boundary, &lt;code&gt;panic=unwind&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;
&lt;td&gt;abort&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;UB&lt;&#x2F;td&gt;
&lt;td&gt;UB&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Proposals 1 &amp;amp; 2, &lt;code&gt;&quot;C&quot;&lt;&#x2F;code&gt; boundary, &lt;code&gt;panic=abort&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;
&lt;td&gt;&lt;code&gt;panic!&lt;&#x2F;code&gt; aborts (no unwinding occurs)&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;UB&lt;&#x2F;td&gt;
&lt;td&gt;UB&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Proposals 1 &amp;amp; 2, &lt;code&gt;&quot;C unwind&quot;&lt;&#x2F;code&gt; boundary, &lt;code&gt;panic=unwind&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Proposal 1, &lt;code&gt;&quot;C unwind&quot;&lt;&#x2F;code&gt; boundary, &lt;code&gt;panic=abort&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;
&lt;td&gt;&lt;code&gt;panic!&lt;&#x2F;code&gt; aborts&lt;&#x2F;td&gt;
&lt;td&gt;abort&lt;&#x2F;td&gt;
&lt;td&gt;abort&lt;&#x2F;td&gt;
&lt;td&gt;abort&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Proposal 2, &lt;code&gt;&quot;C unwind&quot;&lt;&#x2F;code&gt; boundary, &lt;code&gt;panic=abort&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;
&lt;td&gt;&lt;code&gt;panic!&lt;&#x2F;code&gt; aborts&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;UB&lt;&#x2F;td&gt;
&lt;td&gt;abort&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Proposal 3,  &lt;code&gt;&quot;C&quot;&lt;&#x2F;code&gt; boundary, &lt;code&gt;panic=unwind&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;tr&gt;
&lt;td&gt;Proposal 3, &lt;code&gt;&quot;C&quot;&lt;&#x2F;code&gt; boundary, &lt;code&gt;panic=abort&lt;&#x2F;code&gt;&lt;&#x2F;td&gt;
&lt;td&gt;&lt;code&gt;panic!&lt;&#x2F;code&gt; aborts&lt;&#x2F;td&gt;
&lt;td&gt;unwind&lt;&#x2F;td&gt;
&lt;td&gt;UB&lt;&#x2F;td&gt;
&lt;td&gt;UB&lt;&#x2F;td&gt;
&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;
&lt;&#x2F;table&gt;
</description>
        </item><item>
            <title>Pietro Albini has joined the core team</title>
            <pubDate>Thu, 27 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/pietro-joins-core-team/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/pietro-joins-core-team/</guid>
            <description>&lt;p&gt;We are very happy to announce that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pietroalbini&quot;&gt;Pietro Albini&lt;&#x2F;a&gt; has joined the core team. Pietro joined us back on December 24th 2019 (a Christmas present for the core team!), but we have been a bit late in announcing it (sorry Pietro!).&lt;&#x2F;p&gt;
&lt;p&gt;Pietro co-leads the infrastructure and docs.rs teams, and is a member of the crates.io and release teams, and the security response working group. He has been instrumental in setting up and maintaining the various services and technology which keeps the Rust project moving quickly and smoothly.&lt;&#x2F;p&gt;
&lt;p&gt;Pietro will continue to focus on infrastructure issues, starting with setting up a team to coordinate Rust&#x27;s web presence - the website, crates.io, docs.rs, etc.&lt;&#x2F;p&gt;
&lt;p&gt;Aidan will co-lead the infrastructure team and gradually hand over full leadership to Pietro.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>crates.io incident report for 2020-02-20</title>
            <pubDate>Wed, 26 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/crates-io-incident-report/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/crates-io-incident-report/</guid>
            <description>&lt;p&gt;On 2020-02-20 at 21:28 UTC we received a report from a user of crates.io that
their crate was not available on the index even after 10 minutes since the
upload. This was a bug in the crates.io webapp exposed by a GitHub outage.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;root-cause-of-the-outage&quot;&gt;Root cause of the outage&lt;&#x2F;h2&gt;
&lt;p&gt;In some corner cases the code that uploads new commits to the GitHub repository
of the index was returning a successful status even though the push itself
failed. The bug caused the job scheduler to think the upload was actually
successful, causing the job to be removed from the queue and producing a data
loss.&lt;&#x2F;p&gt;
&lt;p&gt;The outage was caused by that bug, triggered by an unexpected response during
&lt;a href=&quot;https:&#x2F;&#x2F;www.githubstatus.com&#x2F;incidents&#x2F;bd29l6zgr43g&quot;&gt;the GitHub outage&lt;&#x2F;a&gt; happening at the same time.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;resolution&quot;&gt;Resolution&lt;&#x2F;h2&gt;
&lt;p&gt;The team analyzed the code of the background job uploading commits to the
index, and found a possible cause of the misreported success. A team member
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;pull&#x2F;2207&quot;&gt;wrote the fix&lt;&#x2F;a&gt;, another one reviewed it and we then deployed the patch
directly to production.&lt;&#x2F;p&gt;
&lt;p&gt;At the same time, once we saw the index started to be updated again, we removed
the broken entries in the database manually and asked the reporter to upload
their crates again.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;affected-crates&quot;&gt;Affected crates&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;kaze&quot;&gt;&lt;code&gt;kaze&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; 0.1.6&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;wasmer-runtime-core&quot;&gt;&lt;code&gt;wasmer-runtime-core&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; 0.14.0&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;wasmer-win-exception-handler&quot;&gt;&lt;code&gt;wasmer-win-exception-handler&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; 0.14.0&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;postmortem&quot;&gt;Postmortem&lt;&#x2F;h2&gt;
&lt;p&gt;Deploying the change took way longer than expected: there were changes landed
in master but waiting to be deployed on production, increasing the length of
the build process and the risks of the deploy. In the future we should deploy
hotfixes by branching off the current deployed commit, and cherry-picking the
fix on top of that. We should also strive to reduce the amount of time PRs sit
in master without being live.&lt;&#x2F;p&gt;
&lt;p&gt;Nobody was paged due to this incident, as our monitoring and alerting system
wasn’t able to catch the problem: we have monitoring in place for jobs failing
to execute, but in this case the job was mistakenly marked as correct. We
should implement periodic checks that ensure the database and the index are
correctly synchronized.&lt;&#x2F;p&gt;
&lt;p&gt;We were lucky that two members of the team with access to both the support
email and the production environment were online during the outage: without
paging available we could’ve noticed it way later than we did.&lt;&#x2F;p&gt;
&lt;p&gt;During the incident investigation we also found that our logging was not good
enough to properly diagnose the problem: there is no message logged when a
commit is pushed to the index, nor when a background job is executed. Also, the
API call to publish new crates doesn’t include the crate name in its line. We
should enhance our logging capabilities to find the root cause of issues
quickly during future incidents.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;timeline-of-events&quot;&gt;Timeline of events&lt;&#x2F;h2&gt;
&lt;p&gt;It took 1 hour and 31 minutes from the start of the incident to the deploy of
the fix.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;2020-02-20&quot;&gt;2020-02-20&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;21:17 UTC: the authors of &lt;code&gt;kaze&lt;&#x2F;code&gt;, &lt;code&gt;wasmer-runtime-core&lt;&#x2F;code&gt;
and &lt;code&gt;wasmer-win-exception-handler&lt;&#x2F;code&gt; published them on crates.io&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;21:28 UTC: the author of &lt;code&gt;wasmer-runtime-core&lt;&#x2F;code&gt; and
&lt;code&gt;wasmer-win-exception-handler&lt;&#x2F;code&gt; reports the issue to help@crates.io&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;21:31 UTC: GitHub updates their status page to report an outage&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;21:33 UTC: Pietro notices the support mail, pings Sean on Discord, Sean
starts investigating&lt;&#x2F;li&gt;
&lt;li&gt;21:35 UTC: Pietro got back to the author saying that the team was
investigating&lt;&#x2F;li&gt;
&lt;li&gt;21:37 UTC: Sean and Pietro find the symptoms of the incident&lt;&#x2F;li&gt;
&lt;li&gt;21:50 UTC: Sean finds a possible cause for the bug&lt;&#x2F;li&gt;
&lt;li&gt;22:01 UTC: Sean deletes the affected versions from the database&lt;&#x2F;li&gt;
&lt;li&gt;22:09 UTC: Sean opens up &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;pull&#x2F;2207&quot;&gt;PR 2207&lt;&#x2F;a&gt; with the fix&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;22:16 UTC: GitHub updates their status page to say the problem is fixed&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;22:17 UTC: Pietro asks for changes on the PR&lt;&#x2F;li&gt;
&lt;li&gt;22:20 UTC: Sean addresses Pietro’s concerns in the PR&lt;&#x2F;li&gt;
&lt;li&gt;22:23 UTC: PR merged, Sean deploys it directly to master&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;22:48 UTC: Fix deployed on production&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;2020-02-21&quot;&gt;2020-02-21&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;09:27 UTC: the author of &lt;code&gt;kaze&lt;&#x2F;code&gt; reports their crate was affected to
help@crates.io&lt;&#x2F;li&gt;
&lt;li&gt;12:55 UTC: Pietro deletes the affected version of &lt;code&gt;kaze&lt;&#x2F;code&gt; from the database
and gets back to the author of the crate&lt;&#x2F;li&gt;
&lt;li&gt;14:10 UTC: Pietro analyzes the crates.io database and finds out no other
crate was affected&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;action-items&quot;&gt;Action items&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;issues&#x2F;2226&quot;&gt;#2226&lt;&#x2F;a&gt;: Add simple logging when we start the index publishing process.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;issues&#x2F;2227&quot;&gt;#2227&lt;&#x2F;a&gt;: Add a periodic job that checks the index and the database for
consistency, paging the on-call person if there are any mismatches. The job
will need to account for the crates not yet published on the index but in the
queue.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;issues&#x2F;2228&quot;&gt;#2228&lt;&#x2F;a&gt;: Include the crate name in the HTTP log entry for the publish API
call.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;issues&#x2F;2229&quot;&gt;#2229&lt;&#x2F;a&gt;: Add in-depth logging for swirl background jobs, with information
such as the job name or the parameters.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;issues&#x2F;2230&quot;&gt;#2230&lt;&#x2F;a&gt;: Investigate whether we want to implement a self-healing feature to
automatically synchronize the index in cases of mismatch.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>Intro to rustc&#x27;s self profiler</title>
            <pubDate>Tue, 25 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/intro-rustc-self-profile/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/intro-rustc-self-profile/</guid>
            <description>&lt;p&gt;Over the last year, the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;self-profile&#x2F;&quot;&gt;Self-Profile Working Group&lt;&#x2F;a&gt; has been building tools to profile &lt;code&gt;rustc&lt;&#x2F;code&gt; because we often hear requests to know where compilation time is being spent.
This is useful when optimizing the compiler, one of the Compiler Team&#x27;s ongoing efforts to improve compile times, but it&#x27;s also useful to users who want to refactor their crate so that it will compile faster.
We&#x27;ve been working on a new feature that will help with that and this blog post gives a preview of how it works.
Be warned, though: it is still experimental and we expect the interface to change over time.
The Rust Unstable Book has &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;unstable-book&#x2F;compiler-flags&#x2F;self-profile.html&quot;&gt;documentation for this feature&lt;&#x2F;a&gt; and we&#x27;ll keep that up to date so you can always find the latest instructions there.&lt;&#x2F;p&gt;
&lt;p&gt;In this post, we&#x27;ll look at the tools currently available and use them to profile &lt;code&gt;rustc&lt;&#x2F;code&gt; while it compiles an example crate.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;setup&quot;&gt;Setup&lt;&#x2F;h2&gt;
&lt;p&gt;First, we&#x27;ll install the tools we&#x27;re going to use from the &lt;code&gt;measureme&lt;&#x2F;code&gt; repository to analyze self-profile trace data.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cargo install&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;measureme crox flamegraph summarize
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now that we have our tools, let&#x27;s download an example crate to profile its build.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cd ..
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; git clone https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;regex.git
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cd regex
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We&#x27;ll need to use a recent nightly compiler to get access to unstable &lt;code&gt;-Z&lt;&#x2F;code&gt; flags.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; rustup override set nightly
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you haven&#x27;t installed a nightly compiler before, this will download the nightly compiler for you.
If you have, then update it to make sure you&#x27;re on a recent version.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; rustup update nightly
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;profiling-the-compiler&quot;&gt;Profiling the compiler&lt;&#x2F;h2&gt;
&lt;p&gt;Now we can build it and tell &lt;code&gt;rustc&lt;&#x2F;code&gt; to profile the build of the &lt;code&gt;regex&lt;&#x2F;code&gt; crate.
This will cause three new files to be created in the working directory which contain the profling data.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cargo rustc -- -Zself-profile
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; ls
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CHANGELOG.md&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;        LICENSE-APACHE       UNICODE.md              regex-17088.string_data       regex-syntax         target
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Cargo.lock&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;          LICENSE-MIT          bench                   regex-17088.string_index      rustfmt.toml         test
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Cargo.toml&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;          PERFORMANCE.md       examples                regex-capi                    scripts              tests
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HACKING.md&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;          README.md            regex-17088.events      regex-debug                   src
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The new files follow the format &lt;code&gt;{crate name}-{rustc process id}.{events,string_data,string_index}&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ll use each of the three main tools to analyze the profiling data:&lt;&#x2F;p&gt;
&lt;h3 id=&quot;summarize&quot;&gt;&lt;code&gt;summarize&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;As its name suggests, this tool summarizes the data found in the trace files.
Additionally, &lt;code&gt;summarize&lt;&#x2F;code&gt; can also show a &amp;quot;diff&amp;quot; between two trace files but we won&#x27;t be using this mode.&lt;&#x2F;p&gt;
&lt;p&gt;Let&#x27;s run the tool, passing just the file name (but not the extension) for the trace:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; summarize summarize regex-17088
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Item                                          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Self&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; time | % of total time | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Time     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Item&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; count |
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;LLVM_module_codegen_emit_obj                  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4.89s     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;42.752          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4.89s    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;159        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;codegen_module                                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.25s     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;10.967          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.37s    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;159        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;LLVM_module_optimize_module_passes            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.15s     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;10.022          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.15s    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;159        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;LLVM_module_codegen_make_bitcode              &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;786.56ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;6.875           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;960.73ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;159        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;typeck_tables_of                              &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;565.18ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4.940           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;689.39ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;848        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;LLVM_module_codegen                           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;408.01ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;3.566           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;6.26s    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;159        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mir_borrowck                                  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;224.03ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.958           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;543.33ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;848        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;LLVM_module_codegen_emit_compressed_bitcode   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;174.17ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.522           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;174.17ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;159        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;optimized_mir                                 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;157.91ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.380           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;205.29ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1996       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;evaluate_obligation                           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;146.50ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.281           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;184.17ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;8304       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;codegen_crate                                 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;139.48ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.219           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.58s    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mir_built                                     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;123.88ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1.083           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;168.01ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;848        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metadata_decode_entry                         &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;88.36ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.772           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;117.77ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;55642      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;incr_comp_copy_cgu_workproducts               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;64.21ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.561           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;64.21ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;monomorphization_collector_graph_walk         &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;54.11ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.473           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;344.00ms &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;link_rlib                                     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;43.21ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.378           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;43.21ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;check_impl_item_well_formed                   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;41.36ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.362           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;77.14ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;736        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;codegen_fulfill_obligation                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;40.36ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.353           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;51.56ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1759       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;expand_crate                                  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;37.24ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.326           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;48.52ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;symbol_name                                   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;36.31ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.317           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;39.06ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5513       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;free_global_ctxt                              &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;34.34ms   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0.300           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;34.34ms  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;|
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;+-----------------------------------------------+-----------+-----------------+----------+------------+
...
Total&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cpu time: 11.440758871s
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The output is sorted by the self time (time spent in the query or activity but not other queries or activities called by itself).
As you can see, most of the compilation time is spent in LLVM generating the binary code for the executable.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;flamegraph&quot;&gt;&lt;code&gt;flamegraph&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;As you may have guessed, &lt;code&gt;flamegraph&lt;&#x2F;code&gt; will produce a &lt;a href=&quot;http:&#x2F;&#x2F;www.brendangregg.com&#x2F;flamegraphs.html&quot;&gt;flame graph&lt;&#x2F;a&gt; of the profiling data.
To run the tool, we&#x27;ll pass just the filename without a file extension like we did for &lt;code&gt;summarize&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; flamegraph regex-17088
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will create a file called &lt;code&gt;rustc.svg&lt;&#x2F;code&gt; in the working directory:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;flamegraph_image.png&quot;&gt;&lt;img src=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;flamegraph_image.png&quot; alt=&quot;Image of flamegraph output&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;rustc.svg&quot;&gt;Click here&lt;&#x2F;a&gt; to try the interactive svg.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;crox&quot;&gt;&lt;code&gt;crox&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;This tool processes self-profiling data into the JSON format that the Chromium profiler understands.
You can use it to create a graphical timeline showing exactly when various traced events occurred.&lt;&#x2F;p&gt;
&lt;p&gt;In this section, we&#x27;ll cover a few different modes &lt;code&gt;crox&lt;&#x2F;code&gt; can run in such as profiling an entire crate compilation including dependencies and filtering out small events.
Let&#x27;s get started with the basics!&lt;&#x2F;p&gt;
&lt;h4 id=&quot;basic-usage&quot;&gt;Basic usage&lt;&#x2F;h4&gt;
&lt;p&gt;To run the tool, we&#x27;ll just pass the filename without a file extension like we&#x27;ve done before:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; crox regex-17088
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This creates a file called &lt;code&gt;chrome_profiler.json&lt;&#x2F;code&gt; in the working directory.
To open it, we&#x27;ll use the regular Chromium performance tools you might already be familiar with:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Open Chrome&lt;&#x2F;li&gt;
&lt;li&gt;Open the Developer Tools console by pressing &lt;code&gt;Ctrl&lt;&#x2F;code&gt; + &lt;code&gt;Shift&lt;&#x2F;code&gt; + &lt;code&gt;i&lt;&#x2F;code&gt; (Windows&#x2F;Linux) or &lt;code&gt;Cmd&lt;&#x2F;code&gt; + &lt;code&gt;Option&lt;&#x2F;code&gt; + &lt;code&gt;i&lt;&#x2F;code&gt; (macOS)&lt;&#x2F;li&gt;
&lt;li&gt;Click the Performance tab at the top of the console.&lt;&#x2F;li&gt;
&lt;li&gt;Click the &amp;quot;Load profile&amp;quot; button which looks like an arrow pointing up.&lt;&#x2F;li&gt;
&lt;li&gt;Select the &lt;code&gt;chrome_profiler.json&lt;&#x2F;code&gt; file we created.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;You should now see something similar to this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler1.png&quot;&gt;&lt;img src=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler1.png&quot; alt=&quot;Image of chrome profiler&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can use the scroll wheel on a mouse or the appropriate gesture on a touchpad to zoom in or out of the timeline.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;filtering-short-events&quot;&gt;Filtering short events&lt;&#x2F;h4&gt;
&lt;p&gt;If the &lt;code&gt;chrome_profiler.json&lt;&#x2F;code&gt; file gets too large, the normal Chromium performance tools have issues opening the file.
One easy way to deal with this is to tell &lt;code&gt;crox&lt;&#x2F;code&gt; to remove events shorter than a chosen duration:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; crox&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --minimum-duration&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 2 regex-17088
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Filtering out events less than 2 microseconds shrinks our &lt;code&gt;chrome_profiler.js&lt;&#x2F;code&gt; file from 27mb to 11mb.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;capturing-event-arguments&quot;&gt;Capturing event arguments&lt;&#x2F;h4&gt;
&lt;p&gt;The self-profiler can be configured to record event arguments during compilation.
For example, queries will include their query key.
This functionality is turned off by default because it increases the self-profiler overhead.&lt;&#x2F;p&gt;
&lt;p&gt;To turn this feature on, we&#x27;ll need to record a new compilation, passing an additional argument to &lt;code&gt;rustc&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cargo clean
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cargo rustc -- -Zself-profile -Zself-profile-events=default,args
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And then process the new output files:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; crox regex-23649
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now in the Chromium profiler, if you click on a node, you can see additional data about many of the events at the bottom of the screen:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler2.png&quot;&gt;&lt;img src=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler2.png&quot; alt=&quot;Image of Chrome profiler details&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Which shows this &lt;code&gt;optimized_mir&lt;&#x2F;code&gt; query was processing the &lt;code&gt;regex::compile::{{impl}}::new&lt;&#x2F;code&gt; function body.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;profiling-an-entire-crate-graph&quot;&gt;Profiling an entire crate graph&lt;&#x2F;h4&gt;
&lt;p&gt;By using the &lt;code&gt;RUSTFLAGS&lt;&#x2F;code&gt; environment variable, we can profile every &lt;code&gt;rustc&lt;&#x2F;code&gt; invocation, not just the final crate&#x27;s.
&lt;code&gt;crox&lt;&#x2F;code&gt; can then combine all of the profiles together into one output file.
Since this will create a lot of files, we&#x27;ll tell &lt;code&gt;rustc&lt;&#x2F;code&gt; to create a folder to put all the traces in.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; rm regex-17088.* regex-23649.* &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# clean up the old trace files since we&amp;#39;re done with them
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$ cargo clean
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; RUSTFLAGS=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;-Zself-profile=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pwd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&#x2F;profiles -Zself-profile-events=default,args&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot; cargo build
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This creates quite a few trace files in the working directory.
Now, we&#x27;ll tell &lt;code&gt;crox&lt;&#x2F;code&gt; to combine all of the trace files in the current directory together:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; crox&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --dir&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; profiles
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Opening this file shows all of the crates compiled:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler3.png&quot;&gt;&lt;img src=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler3.png&quot; alt=&quot;Image of Chrome profiler with all crates&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Clicking on a crate will expand it to show the threads and event data inside it:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler4.png&quot;&gt;&lt;img src=&quot;&#x2F;images&#x2F;inside-rust&#x2F;2020-02-25-intro-rustc-self-profile&#x2F;chrome_profiler4.png&quot; alt=&quot;Image of Chrome profiler with a crate expanded&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Thanks for reading!&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve been using these tools extensively ourselves over the last few months and they&#x27;ve helped us tremendously in understanding where the compiler spends its time.
In the future we&#x27;ll be adding more features and we&#x27;ll work on making the tooling easier to use.
If you have questions or would like to get involved with the Self-Profile Working Group, please check out the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;measureme&quot;&gt;measureme repository&lt;&#x2F;a&gt; or stop by our &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;187831-t-compiler.2Fwg-self-profile&quot;&gt;Zulip stream&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Please welcome jtgeibel as crates.io team co-lead!</title>
            <pubDate>Thu, 20 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jtgeibel-crates-io-co-lead/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jtgeibel-crates-io-co-lead/</guid>
            <description>&lt;p&gt;I&#x27;m happy to announce some changes in the leadership of the crates.io
team. Justin Geibel (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jtgeibel&quot;&gt;jtgeibel&lt;&#x2F;a&gt;) will be joining me as co-lead. Justin
will be replacing Ashley Williams, who has been very busy lately with
other commitments.&lt;&#x2F;p&gt;
&lt;p&gt;Justin has been involved in the crates.io team since the summer
of 2017. In addition to general &amp;quot;gardening&amp;quot; tasks (Justin has &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;crates.io&#x2F;pulls&#x2F;jtgeibel&quot;&gt;over
140 PRs&lt;&#x2F;a&gt; to the
crates.io repo!), he has made a number of improvements and changes:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Refactoring of error handling logic and the test harness&lt;&#x2F;li&gt;
&lt;li&gt;CI improvements to caching behavior and build times&lt;&#x2F;li&gt;
&lt;li&gt;Added a boot time option to use hyper as the web server, with the goal of eventually switching over in production&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Please join me in extending a sincere congratulations 🎉 to Justin, as
well as a big thank you ❤️ to Ashley for all of the work she did
as co-lead of the team thus far.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Upcoming compiler-team design meetings</title>
            <pubDate>Fri, 14 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-upcoming-compiler-team-design-meetings/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-upcoming-compiler-team-design-meetings/</guid>
            <description>&lt;p&gt;In our &lt;a href=&quot;https:&#x2F;&#x2F;zulip-archive.rust-lang.org&#x2F;131828tcompiler&#x2F;33384planningmeeting20200214.html&quot;&gt;planning meeting on February 14th&lt;&#x2F;a&gt;, the &lt;a href=&quot;https:&#x2F;&#x2F;www.rust-lang.org&#x2F;governance&#x2F;teams&#x2F;compiler&quot;&gt;compiler team&lt;&#x2F;a&gt; has scheduled our
next batch of upcoming design meetings. You can find the exact times
on the compiler team&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;#meeting-calendar&quot;&gt;meeting calendar&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;On Feb 28th (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=NXY1bWhwYm1tMzRydDNwaWc5dmJjdGNiM3QgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;, we will discuss our triage
procedures and how we can make them more efficient. See
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;247&quot;&gt;rust-lang&#x2F;compiler-team#247&lt;&#x2F;a&gt; for more details.&lt;&#x2F;li&gt;
&lt;li&gt;On Mar 6th (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=MXBkOXZtcWxyaTk4bHFpN202bTE5bTg0OWsgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;), we will discuss plans to extract
rustc&#x27;s representation of types and trait solving into a standalone
library. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;234&quot;&gt;rust-lang&#x2F;compiler-team#234&lt;&#x2F;a&gt; for more details.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;did-you-know&quot;&gt;Did you know?&lt;&#x2F;h3&gt;
&lt;p&gt;Most weeks, the compiler team has some sort of design meeting. These
meetings take place on Zulip and are open to all. Every 4 weeks, we do
a planning meeting to pick the next few meetings from the list of open
proposals. You can find &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;about&#x2F;steering-meeting&#x2F;&quot;&gt;more details about how the compiler-team
steering meeting process here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance Working Group Update: Meeting 11 February 2020</title>
            <pubDate>Tue, 11 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-first-governance-wg-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-first-governance-wg-meeting/</guid>
            <description>&lt;p&gt;Hello everyone! &lt;&#x2F;p&gt;
&lt;p&gt;The governance working group meeting of January 28th was canceled due to the Mozilla All Hands that week.
Therefore, working group next convened on 11 February.
The following meeting will take place on 27 February.&lt;&#x2F;p&gt;
&lt;p&gt;The agenda included &lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Discuss project groups description RFC 
https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;pull&#x2F;2856
Decision: Determine if inactive members in scope; if not in scope, confirm RFC. &lt;&#x2F;li&gt;
&lt;li&gt;Review action items from meeting of December 3 2019
https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2019.12.03.md#action-items&lt;&#x2F;li&gt;
&lt;li&gt;Confirm adjustment of timeslot based on Doodle sent out in Discord channel&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;project-groups&quot;&gt;Project groups&lt;&#x2F;h2&gt;
&lt;p&gt;You can find the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2020.02.11.md&quot;&gt;detailed minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;&quot;&gt;wg-governance&lt;&#x2F;a&gt; repository, but here is a quick summary: &lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Project groups description RFC confirmed complete&lt;&#x2F;li&gt;
&lt;li&gt;Next items taken from Dec 3 backlog are access policy (NellShamrell is working on this),
Discussion of where to discuss the pre-RFC process, and followup about moving (community, devtools, nursery) to rust-lang&lt;&#x2F;li&gt;
&lt;li&gt;XAMPPRocky is already working on a compliance bot to simplify administration&lt;&#x2F;li&gt;
&lt;li&gt;Timeslot adjusted to 19-20 CET &#x2F; 1pm-2pm EST &#x2F; 10-11am PST on Zulip as text chat, with the same biweekly cadence.
Zoom (video) meetings will be used as needed, e.g. if a big RFC needs to be pushed through.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;next-meeting&quot;&gt;Next meeting&lt;&#x2F;h2&gt;
&lt;p&gt;Our next meeting will be 27 February 2020 via Zulip 19-20 CET &#x2F; 1pm-2pm EST &#x2F; 10-11am PST.
Agenda is -&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Access policy - Nell will have something to discuss&lt;&#x2F;li&gt;
&lt;li&gt;Pre-RFC process - determine right place to talk about this&lt;&#x2F;li&gt;
&lt;li&gt;Follow-up on moving (community, devtools, nursery) to rust-lang&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
</description>
        </item><item>
            <title>2020-02-06 Compiler Team Triage Meeting</title>
            <pubDate>Fri, 07 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-first-compiler-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-first-compiler-team-meeting/</guid>
            <description>&lt;p&gt;The compiler team had our weekly triage meeting on 2020-02-06.
You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;triage-meeting&#x2F;2020-02-06&#x2F;&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&quot;&gt;compiler-team repository&lt;&#x2F;a&gt;.
Each week, we have general announcements from the team followed by check-ins from two of the compiler team working groups.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;There is a design meeting this Friday (2020-02-07) on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;237&quot;&gt;parser-librarification&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;davidtwco&quot;&gt;@davidtwco&lt;&#x2F;a&gt; has made progress on the polymorphization effort and has posted a &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;216091-t-compiler.2Fwg-polymorphization&#x2F;topic&#x2F;progress.20updates&#x2F;near&#x2F;187461928&quot;&gt;status update&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;michaelwoerister&quot;&gt;@mw&lt;&#x2F;a&gt; has posted a major change proposal to make &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;245&quot;&gt;incremental compilation respect the &lt;code&gt;-Ccodegen-units&lt;&#x2F;code&gt; setting&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Cargo report future-incompat &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;issues&#x2F;2834&quot;&gt;rfc#2834&lt;&#x2F;a&gt; is on track to get an FCP merge request from the cargo team in the near future.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;working-group-sync&quot;&gt;Working group sync&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;wg-rls-2-0&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;rls-2.0&#x2F;&quot;&gt;wg-rls-2.0&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The Chalk dependency has been updated which dramatically reduced crashes.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;cargo check&lt;&#x2F;code&gt; handling has been moved ino the server so all editors not just VS Code benefit.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matklad&quot;&gt;@matklad&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nikomatsakis&quot;&gt;@nikomatsakis&lt;&#x2F;a&gt; have been working on an RFC to merge RLS and Rust Analyzer officially.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Work is proceeding on &amp;quot;production readiness&amp;quot;.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Binary releases are available on the project&#x27;s GitHub page.&lt;&#x2F;li&gt;
&lt;li&gt;Planning to publish to VS Code extension marketplace &amp;quot;soon&amp;quot;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;wg-self-profile&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;self-profile&#x2F;&quot;&gt;wg-self-profile&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;58967&quot;&gt;&amp;quot;Minimum Viable Product&amp;quot;&lt;&#x2F;a&gt; has been completed!&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Self-profling is enabled for all perf.rust-lang.org runs and we automatically publish the data. (&lt;a href=&quot;https:&#x2F;&#x2F;perf.rust-lang.org&#x2F;detailed-query.html?commit=3761dcd3467441f78939ccb3b341b03b6a7558d7&amp;amp;base_commit=ac2f3fa41ac5ae8425b959f955bb7433b7c57aea&amp;amp;benchmark=await-call-tree-debug&amp;amp;run_name=clean&quot;&gt;Example&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;michaelwoerister&quot;&gt;@mw&lt;&#x2F;a&gt; implemented query-key recording so queries can now be attributed to individual query invocations.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;measureme&#x2F;tree&#x2F;master&#x2F;crox&quot;&gt;&lt;code&gt;crox&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; utility, which generates Chromium profiler compatible trace data, can now generate profiles for entire Cargo invocations via the &lt;code&gt;--dir&lt;&#x2F;code&gt; flag.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;This allows inspecting various rustc processes and their individual threads on a common timeline with full query data.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Quite a few people have tried &lt;code&gt;-Zself-profile&lt;&#x2F;code&gt; and have said they found it very useful!&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>Announcing the Cleanup Crew ICE-breaker group</title>
            <pubDate>Thu, 06 Feb 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/cleanup-crew-ice-breakers/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/cleanup-crew-ice-breakers/</guid>
            <description>&lt;p&gt;Following Niko Matsakis&#x27; announcement of the &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;inside-rust&#x2F;2019&#x2F;10&#x2F;22&#x2F;LLVM-ICE-breakers.html&quot;&gt;&lt;strong&gt;LLVM ICE-breaker
group&lt;&#x2F;strong&gt;&lt;&#x2F;a&gt;,
I&#x27;m pleased to announce the &lt;strong&gt;Cleanup Crew ICE-breaker group&lt;&#x2F;strong&gt;. It
follows the same principle, if you know Rust and would like to
contribute to rustc -- but without knowing about the compiler or taking
on a large commitment -- then the Cleanup Crew ICE-breaker group might
well be for you!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;what-is-the-cleanup-crew-ice-breaker-group&quot;&gt;What is the Cleanup Crew ICE-breaker group?&lt;&#x2F;h3&gt;
&lt;p&gt;The &amp;quot;Cleanup Crew&amp;quot; are focused on improving bug reports. Specifically,
the goal is to try to ensure that every bug report has all the
information that will be needed for someone to fix it:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;a minimal, standalone example that shows the problem&lt;&#x2F;li&gt;
&lt;li&gt;links to duplicates or related bugs&lt;&#x2F;li&gt;
&lt;li&gt;if the bug is a regression (something that used to work, but no
longer does), then a bisection to the PR or nightly that caused
the regression&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This kind of cleanup is invaluable in getting bugs fixed.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;who-should-join&quot;&gt;Who should join?&lt;&#x2F;h3&gt;
&lt;p&gt;It can be done by anybody who knows Rust, without any particularly deep
knowledge of the compiler.  If you want to be part of it and be notified
about things to do, just &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;about.html#join&quot;&gt;add yourself to the list&lt;&#x2F;a&gt;! When we come across a suitable
bug, we&#x27;ll &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;about.html#tagging-an-issue-for-an-ice-breaker-group&quot;&gt;write a message&lt;&#x2F;a&gt; that &lt;code&gt;@&lt;&#x2F;code&gt;-mentions every Github user on that
team. If you have some time, maybe you can provide some useful
information.&lt;&#x2F;p&gt;
&lt;p&gt;You can find more information about the group on it&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;cleanup-crew.html&quot;&gt;rustc-dev-guide
section&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>February Lang Team Design Meetings</title>
            <pubDate>Fri, 24 Jan 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-lang-team-design-meetings/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/feb-2020-lang-team-design-meetings/</guid>
            <description>&lt;p&gt;We&#x27;ve scheduled our &lt;strong&gt;language team design meetings&lt;&#x2F;strong&gt; for February. The current plans are as follows:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;February 3rd -- we will do an overview of &lt;strong&gt;specialization&lt;&#x2F;strong&gt;. We&#x27;ll cover details from the RFC but in particular talk about the &lt;a href=&quot;http:&#x2F;&#x2F;aturon.github.io&#x2F;tech&#x2F;2018&#x2F;04&#x2F;05&#x2F;sound-specialization&#x2F;&quot;&gt;as-yet-unimplemented plans to make it sound&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;February 10th -- we will cover interactions between the &lt;code&gt;&amp;amp;T&lt;&#x2F;code&gt; type and LLVM&#x27;s dereferenceable attribute, such as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;55005&quot;&gt;rust-lang&#x2F;rust#55005&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;japaric&#x2F;volatile-register&#x2F;issues&#x2F;10&quot;&gt;problems modeling MMIO&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;February 17th -- no meeting, it is President&#x27;s Day in the US and many of us are absent&lt;&#x2F;li&gt;
&lt;li&gt;February 24th -- we will summarize discussions from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;project-ffi-unwind&quot;&gt;the ffi-unwind project group&lt;&#x2F;a&gt; about whether we should permit foreign exceptions to propagate across the &amp;quot;C&amp;quot; ABI boundary, or establish a separate ABI (e.g., &amp;quot;C unwind&amp;quot;) for such cases.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;about-the-language-team-design-meetings&quot;&gt;About the language team design meetings&lt;&#x2F;h2&gt;
&lt;p&gt;The idea of the design meeting is that it&#x27;s a time for us to have
in-depth discussions on some particular topic. This might be a burning
problem that we&#x27;ve discovered, an update on some existing design work,
or a forward looking proposal.&lt;&#x2F;p&gt;
&lt;p&gt;The meetings are open for anyone to listen in and attend. They are
typically also recorded and posted online, along with minutes, after
the fact. They generally take place on Mondays at &amp;quot;noon Boston time&amp;quot;
-- but for the precise scheduling you should check the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;#meeting-calendar&quot;&gt;lang team
calendar&lt;&#x2F;a&gt;. Scheduled meetings are subject to change and
cancelation. In that case, the calendar events will be updated.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Upcoming compiler-team design meetings</title>
            <pubDate>Fri, 24 Jan 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jan-2020-upcoming-compiler-team-design-meetings/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jan-2020-upcoming-compiler-team-design-meetings/</guid>
            <description>&lt;p&gt;In our &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;planning.20meeting.202019.2E01.2E17&quot;&gt;planning meeting on January 17&lt;&#x2F;a&gt;, the &lt;a href=&quot;https:&#x2F;&#x2F;www.rust-lang.org&#x2F;governance&#x2F;teams&#x2F;compiler&quot;&gt;compiler team&lt;&#x2F;a&gt; has scheduled our
next batch of upcoming design meetings. You can find the exact times
on the compiler team&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;#meeting-calendar&quot;&gt;meeting calendar&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;On Feb 7th (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=Mmk4NmZqaWVtcHVmZDRmanZob3ZrMXJ1N28gNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;), we will discuss
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;237&quot;&gt;rust-lang&#x2F;compiler-team#237&lt;&#x2F;a&gt;, which describes some potential ways
to extract a Rust parser that can be shared between rustc and
rust-analyzer.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;did-you-know&quot;&gt;Did you know?&lt;&#x2F;h3&gt;
&lt;p&gt;Most weeks, the compiler team has some sort of design meeting. These
meetings take place on Zulip and are open to all. Every 4 weeks, we do
a planning meeting to pick the next few meetings from the list of open
proposals. You can find &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;about&#x2F;steering-meeting&#x2F;&quot;&gt;more details about how the compiler-team
steering meeting process here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>cargo-audit v0.11: Introducing the `fix` feature, yanked crate detection, and more</title>
            <pubDate>Thu, 23 Jan 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/introducing-cargo-audit-fix-and-more/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/introducing-cargo-audit-fix-and-more/</guid>
            <description>&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rustsec&#x2F;cargo-audit&quot;&gt;cargo-audit&lt;&#x2F;a&gt; is a command-line utility which inspects &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt; files and compares them against the &lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&quot;&gt;RustSec Advisory Database&lt;&#x2F;a&gt;, a community database of security vulnerabilities maintained by the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-secure-code&#x2F;wg&quot;&gt;Rust Secure Code Working Group&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This post describes the new features in the 0.11 release of &lt;code&gt;cargo-audit&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;cargo-audit-fix-automatically-update-vulnerable-dependencies&quot;&gt;&lt;code&gt;cargo audit fix&lt;&#x2F;code&gt;: automatically update vulnerable dependencies&lt;&#x2F;h2&gt;
&lt;p&gt;One of our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;cargo-audit&#x2F;issues&#x2F;23&quot;&gt;most requested features&lt;&#x2F;a&gt; (especially by fans of the similar &lt;a href=&quot;https:&#x2F;&#x2F;docs.npmjs.com&#x2F;cli&#x2F;audit&quot;&gt;&lt;code&gt;npm audit fix&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; command), the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;cargo-audit#cargo-audit-fix-subcommand&quot;&gt;new &lt;code&gt;cargo audit fix&lt;&#x2F;code&gt; subcommand&lt;&#x2F;a&gt; will attempt to automatically update version requirements for vulnerable dependencies to non-vulnerable versions.&lt;&#x2F;p&gt;
&lt;p&gt;Note that this is an experimental new feature which isn&#x27;t enabled by default. To try it out, install &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; with the following:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$ cargo install cargo-audit --features=fix
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This will perform the same audit process as &lt;code&gt;cargo audit&lt;&#x2F;code&gt; initially, and then attempt to apply fixes to your &lt;code&gt;Cargo.toml&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;RustSec&#x2F;cargo-audit&#x2F;c857beb&#x2F;img&#x2F;screenshot-fix.png&quot; alt=&quot;cargo audit fix screenshot&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Under the hood, it uses &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;killercup&#x2F;cargo-edit&quot;&gt;cargo-edit&lt;&#x2F;a&gt; (as a library) to perform modifications to your &lt;code&gt;Cargo.toml&lt;&#x2F;code&gt; file, using the fixed version requirements listed in the advisory to try to perform an automatic upgrade to a non-vulnerable version of a dependency for each advisory.&lt;&#x2F;p&gt;
&lt;p&gt;Note once more that this is a &lt;em&gt;new, experimental feature&lt;&#x2F;em&gt; and as such it&#x27;s bound to have bugs. If you&#x27;re worried, you can use &lt;code&gt;cargo audit fix --dry-run&lt;&#x2F;code&gt; to perform a dry run only. And if you do encounter bugs, please &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rustsec&#x2F;cargo-audit&#x2F;issues&quot;&gt;file a bug report&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;d like to thank Reza Fatahi and Hanif Ariffin for their work in contributing this feature.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;warnings-for-yanked-crates&quot;&gt;Warnings for yanked crates&lt;&#x2F;h2&gt;
&lt;p&gt;As you can see in the screenshot above, &lt;code&gt;cargo audit&lt;&#x2F;code&gt; now checks each of the crates in your &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt; file against the &lt;a href=&quot;https:&#x2F;&#x2F;crates.io&quot;&gt;crates.io&lt;&#x2F;a&gt; index to determine if any of them have been yanked. If they have, it will emit a warning as per above.&lt;&#x2F;p&gt;
&lt;p&gt;If you&#x27;d like for yanked crates to be a hard failure, you can run &lt;code&gt;cargo audit&lt;&#x2F;code&gt; with the &lt;code&gt;-D&lt;&#x2F;code&gt; command-line argument:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$ cargo audit -D
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or if you prefer to be more explicit:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$ cargo audit --deny-warnings
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;compatibility-with-the-new-v2-format-for-cargo-lock&quot;&gt;Compatibility with the new &amp;quot;V2&amp;quot; format for &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Rust 1.39 shipped support for a new &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;cargo&#x2F;pull&#x2F;7070&quot;&gt;merge-friendly &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt; format&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;cargo audit&lt;&#x2F;code&gt; consumes &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt; directly, and while the V2 format change didn&#x27;t break the core vulnerability-auditing functionality of &lt;code&gt;cargo audit&lt;&#x2F;code&gt;, several minor features regressed because of this, such as displaying dependency trees for vulnerable dependencies.&lt;&#x2F;p&gt;
&lt;p&gt;This release also upgrades to version 4.0 of the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;cargo-lock&quot;&gt;&lt;code&gt;cargo-lock&lt;&#x2F;code&gt; crate&lt;&#x2F;a&gt;, which includes full support for the V2 &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt; format and constructs a representation of a lockfile which is the same across the V1 and V2 formats.&lt;&#x2F;p&gt;
&lt;p&gt;If you noticed dependency trees failing to display after upgrading to the V2 &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt; format, they should now be working again!&lt;&#x2F;p&gt;
&lt;p&gt;Thanks for reading, and we hope you enjoy &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; 0.11!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance Working Group Update: Meeting 14 January 2020</title>
            <pubDate>Tue, 14 Jan 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jan-2020-first-governance-wg-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jan-2020-first-governance-wg-meeting/</guid>
            <description>&lt;p&gt;Hello everyone! &lt;&#x2F;p&gt;
&lt;p&gt;On Tuesday 14 January the working group met and discussed the RFC 
https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;project-wg-rfc-next&#x2F;draft-rfcs&#x2F;working-group-terminology.md.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;project-groups&quot;&gt;Project groups&lt;&#x2F;h2&gt;
&lt;p&gt;You can see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2020.01.14.md&quot;&gt;detailed minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;&quot;&gt;wg-governance&lt;&#x2F;a&gt; repository, but here is a quick summary: &lt;&#x2F;p&gt;
&lt;p&gt;*Decision for specifics of working group creation is to remain with what was described in https:&#x2F;&#x2F;internals.rust-lang.org&#x2F;t&#x2F;enabling-the-formation-of-new-working-groups&#x2F;10218
*Group status will be Active or Archived
*Future work will be done to lighten the RFC process (an issue has been submitted)
*A project group lifecycle chart was created and a flowchart based on this will be integrated in the RFC&lt;&#x2F;p&gt;
&lt;h2 id=&quot;next-meeting&quot;&gt;Next meeting&lt;&#x2F;h2&gt;
&lt;p&gt;Our next meeting will be 28 January 2020. We will discuss the status of the project groups RFC for no more than 15 minutes,
and then focus on reviewing action items from the meeting of December 3rd.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Cargo in 2020</title>
            <pubDate>Fri, 10 Jan 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/cargo-in-2020/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/cargo-in-2020/</guid>
            <description>&lt;p&gt;This post is an overview of the major projects the Cargo team is interested in
tackling in 2020.&lt;&#x2F;p&gt;
&lt;p&gt;It can be difficult to plan and predict around a volunteer-based open-source
project with limited resources. Instead of trying to present a wish list,
these are projects that already have a solid effort planned to push them
forward. That doesn&#x27;t mean that we are not interested in other projects. We
have compiled a more detailed wish list at
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;cargo&#x2F;projects&#x2F;1&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;cargo&#x2F;projects&#x2F;1&lt;&#x2F;a&gt; that gives an outline of
things we would like to see, but are unlikely to have significant progress
this year.&lt;&#x2F;p&gt;
&lt;p&gt;If you are interested in helping, please let us know! We may not have time to
shepherd additional projects, but we may have time to give some amount of
feedback and review, particularly for well-motivated people who can do the
legwork of design and gathering a consensus.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;manifest.html#the-features-section&quot;&gt;Features&lt;&#x2F;a&gt; provide a way to express optional dependencies and conditional
compilation of code. Fixes and enhancements to Features are one of the
most requested things we hear. In the beginning of 2020, we plan to implement
a new feature resolver which will make it easier to make progress on
implementing and experimenting with new behavior. There is a wide variety of
different enhancements that we are looking at, which we hope to make
incremental progress on while retaining a full picture of the long-term
plan.&lt;&#x2F;p&gt;
&lt;p&gt;Initially we plan to address the issues of decoupling shared dependencies
built with different features. Currently, features are unified for all uses of
a dependency, even when it is not necessary. This causes problems when a
feature intended for one context is incompatible with another. This often
happens for packages which have conditional &lt;code&gt;no_std&lt;&#x2F;code&gt; support. This appears
with build-dependencies, dev-dependencies, target-specific dependencies, and
large workspaces, each of which have their unique challenges.&lt;&#x2F;p&gt;
&lt;p&gt;Beyond that, the following is a brief view of the other major enhancements we
are tracking for the future:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Workspace feature selection and unification&lt;&#x2F;li&gt;
&lt;li&gt;Automatic features&lt;&#x2F;li&gt;
&lt;li&gt;Namespaced features&lt;&#x2F;li&gt;
&lt;li&gt;Mutually exclusive features&lt;&#x2F;li&gt;
&lt;li&gt;Private&#x2F;unstable features&lt;&#x2F;li&gt;
&lt;li&gt;Profile and target default features&lt;&#x2F;li&gt;
&lt;li&gt;And working through some of the 50+ feature issues.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;There are some significant challenges around retaining backwards
compatibility, and being sensitive to increased build times. We hope that we
can address some of the major pain points while balancing those concerns.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;std-aware-cargo&quot;&gt;std aware Cargo&lt;&#x2F;h2&gt;
&lt;p&gt;The &amp;quot;std aware Cargo&amp;quot; project is to make Cargo aware of the Rust standard
library, and to build it from source instead of using the pre-built binaries
that ship with &lt;code&gt;rustc&lt;&#x2F;code&gt;. Some of the notable benefits are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Customizing the compile-time flags of the standard library, such as using
different optimizations, target-cpu, debug settings, etc.&lt;&#x2F;li&gt;
&lt;li&gt;Supporting cross-compiling to new targets which do not have official
distributions.&lt;&#x2F;li&gt;
&lt;li&gt;Paving the road for future enhancements, such as compiling with different
features, and using custom sources.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;A significant amount of work has already been finished in 2019 with the
&lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;cargo&#x2F;reference&#x2F;unstable.html#build-std&quot;&gt;&lt;code&gt;-Zbuild-std&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; feature available on the nightly channel. There is still a
long road to bring it to a state where it can be stabilized. Work is being
tracked in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-cargo-std-aware&#x2F;&quot;&gt;&lt;code&gt;wg-cargo-std-aware&lt;&#x2F;code&gt; repo&lt;&#x2F;a&gt;, and anyone interested is
encouraged to leave feedback on the issue tracker.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;profiles&quot;&gt;Profiles&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;cargo&#x2F;reference&#x2F;profiles.html&quot;&gt;Profiles&lt;&#x2F;a&gt; have received a significant amount of work in 2018 and 2019.
&lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;cargo&#x2F;reference&#x2F;profiles.html#overrides&quot;&gt;Overrides&lt;&#x2F;a&gt; are now stable (shipping in Rust 1.41). &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;cargo&#x2F;reference&#x2F;unstable.html#custom-named-profiles&quot;&gt;Custom named profiles&lt;&#x2F;a&gt;
are available on the nightly channel. In 2020 we hope to continue pushing
these enhancements forward. Some of the efforts we are working towards are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Stabilizing &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;cargo&#x2F;reference&#x2F;unstable.html#config-profiles&quot;&gt;config-based profiles&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Stabilizing &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;cargo&#x2F;reference&#x2F;unstable.html#custom-named-profiles&quot;&gt;custom-named profiles&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Implementing the &lt;code&gt;build&lt;&#x2F;code&gt; profile which can make it easier to define build-script settings.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;ongoing-projects&quot;&gt;Ongoing projects&lt;&#x2F;h2&gt;
&lt;p&gt;Some ongoing efforts don&#x27;t have an end, and we intend to continue making
progress with them. Several new chapters have been added to the documentation,
and there is more to come. The JSON APIs are continually expanding with new
information making it easier to integrate tools and extract information. And
of course, trying to stay on top of bugs and issues!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Lang Team Design Meetings</title>
            <pubDate>Fri, 10 Jan 2020 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jan-2020-lang-team-design-meetings/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jan-2020-lang-team-design-meetings/</guid>
            <description>&lt;p&gt;Hi all! I wanted to give a quick update about the lang team. We&#x27;re
starting something new this year: a regular &lt;strong&gt;design meeting&lt;&#x2F;strong&gt;.  The
idea of the design meeting is that it&#x27;s a time for us to have in-depth
discussions on some particular topic. This might be a burning problem
that we&#x27;ve discovered, an update on some existing design work, or a
forward looking proposal.&lt;&#x2F;p&gt;
&lt;p&gt;The meetings will be scheduled in advance. Ideally, each meeting
should also have a blog post before-hand giving background material,
although that may be difficult to achieve in practice. Similarly,
after each meeting, we&#x27;ll typically post minutes and a recording, and
ideally try to write up a summary blog post with major
points. (Sometimes recordings are hard to achieve, either for
technical reasons or because we wanted the ability to discuss more
sensitive topics.)&lt;&#x2F;p&gt;
&lt;p&gt;The meetings are open for anyone to listen in and attend. They
generally take place on Mondays at &amp;quot;noon Boston time&amp;quot; -- but for the
precise scheduling you should check the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;#meeting-calendar&quot;&gt;lang team calendar&lt;&#x2F;a&gt;. We&#x27;ll
try to keep the calendar up to date with the topic to be discussed in
each meeting, as well.  Meetings might not happen every week, if we
don&#x27;t have a topic in mind.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;first-design-meeting&quot;&gt;First design meeting&lt;&#x2F;h2&gt;
&lt;p&gt;Our first design meeting was actually last Monday! We discussed the
soundness hole that was found some time ago in &lt;code&gt;Pin&lt;&#x2F;code&gt;.  You can read
the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;blob&#x2F;master&#x2F;design-meeting-minutes&#x2F;2020-01-06-Pin-unsoundness.md&quot;&gt;minutes&lt;&#x2F;a&gt; from our discussion and a &lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;MX_GRNLhlY8&quot;&gt;recording&lt;&#x2F;a&gt; is also
available. You might also find it easier to read the &lt;a href=&quot;https:&#x2F;&#x2F;internals.rust-lang.org&#x2F;t&#x2F;unsoundness-in-pin&#x2F;11311&#x2F;112?u=nikomatsakis&quot;&gt;comments in the
internals thread&lt;&#x2F;a&gt;. The good news is that we seem to be
centralizing on a &lt;a href=&quot;https:&#x2F;&#x2F;internals.rust-lang.org&#x2F;t&#x2F;explicit-negative-impls-to-fix-pin-soundness-hole&#x2F;11587&quot;&gt;solution based on negative impls&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;next-design-meeting&quot;&gt;Next design meeting&lt;&#x2F;h2&gt;
&lt;p&gt;The next design meeting will take place this coming Monday. The topic
will be how to fix &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;57893&quot;&gt;rust-lang&#x2F;rust#57893&lt;&#x2F;a&gt;, which is a soundness bug
related to &lt;code&gt;dyn&lt;&#x2F;code&gt; types. There is a &lt;a href=&quot;https:&#x2F;&#x2F;gist.github.com&#x2F;0cf84ac05ce7751b5759cbf335c4d327&quot;&gt;prepared writeup describing the
problem and a possible solution&lt;&#x2F;a&gt; to guide the meeting. It is
maybe worth noting that one of the proposed solutions involved a Rust
2021 edition as well (although there are smaller, more targeted fixes
that do not require a new edition).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;design-meetings-after-that&quot;&gt;Design meetings after that&lt;&#x2F;h2&gt;
&lt;p&gt;The next two weeks are likely to not have design meetings:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;January 20th is Martin Luther King, Jr. day in the US.&lt;&#x2F;li&gt;
&lt;li&gt;January 27th is the Mozilla All Hands.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;As a result, in both cases, many of the lang team members will be
unable to attend.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Formatting the compiler tree</title>
            <pubDate>Mon, 23 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/formatting-the-compiler/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/formatting-the-compiler/</guid>
            <description>&lt;h2 id=&quot;what-happened&quot;&gt;What happened&lt;&#x2F;h2&gt;
&lt;p&gt;We recently landed two PRs which together reformatted essentially all code in the compiler tree.&lt;&#x2F;p&gt;
&lt;p&gt;The first one, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;65939&quot;&gt;#65939&lt;&#x2F;a&gt;, contained the initial formatting infrastructure. We currently use &lt;code&gt;rustfmt&lt;&#x2F;code&gt;
directly, pinned to a version specified in &lt;code&gt;src&#x2F;stage0.txt&lt;&#x2F;code&gt;. We expect to update it as needed, and
otherwise once per cycle (coinciding with the bootstrap bump, most likely).&lt;&#x2F;p&gt;
&lt;p&gt;The second one which reformatted the majority of the codebase is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;67540&quot;&gt;#67540&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This change landed with the following rustfmt config. Note that this configuration is subject
to change (in particular, merge_derives may be removed in the future), but should be fairly stable.
Your editor should automatically pick this configuration up inside the rust-lang&#x2F;rust repository (it
is located in the &lt;code&gt;rustfmt.toml&lt;&#x2F;code&gt; file in the root).&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;version = &amp;quot;Two&amp;quot;
use_small_heuristics = &amp;quot;Max&amp;quot;
merge_derives = false
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;how-to-use-formatting&quot;&gt;How to use formatting&lt;&#x2F;h2&gt;
&lt;p&gt;You can reformat the repository with &lt;code&gt;x.py fmt&lt;&#x2F;code&gt; and &lt;code&gt;x.py fmt --check&lt;&#x2F;code&gt; to verify formatting; these
commands are unfortunately somewhat slow today. Tidy will also currently run the latter of these two
checks (&lt;code&gt;x.py fmt --check&lt;&#x2F;code&gt;) internally, but this may change in the future if we can&#x27;t improve the
speed of formatting the entire codebase.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;resolving-conflicts&quot;&gt;Resolving conflicts&lt;&#x2F;h2&gt;
&lt;p&gt;If you have an ongoing branch, you&#x27;re likely to have merge conflicts. The following should help you
resolve them:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;bash

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; -xeo pipefail

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot; = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;from-rebase&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;] &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;then
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; rev-parse HEAD &amp;gt; &#x2F;tmp&#x2F;commit
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; rev-parse HEAD &amp;gt;&amp;gt; &#x2F;tmp&#x2F;old.shas
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.&#x2F;x.py&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; fmt
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; commit&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -a --amend --no-edit
	git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; rev-parse HEAD &amp;gt;&amp;gt; &#x2F;tmp&#x2F;new.shas
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; reset&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --hard &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; &#x2F;tmp&#x2F;commit)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rm -f&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; &#x2F;tmp&#x2F;old.shas &#x2F;tmp&#x2F;commit &#x2F;tmp&#x2F;new.shas
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; rebase 8eb7c58dbb7&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --exec &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;..&#x2F;format.sh from-rebase&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;#39;
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;branch&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;=$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; rev-parse&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --abbrev-ref&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; HEAD) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# get branch name
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; reset&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --hard&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 8eb7c58dbb7
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; sha &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; &#x2F;tmp&#x2F;new.shas); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;do
		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cherry-pick $&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sha -Xtheirs
	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;done
  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# put yourself atop the format the world PR
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;  git rebase&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -Xtheirs&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; a916ac22b9f7f1f0f7aba0a41a789b3ecd765018
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fi
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This script should be saved to &lt;code&gt;format.sh&lt;&#x2F;code&gt; in the parent directory of your Rust
checkout, and then run &lt;code&gt;git fetch upstream &amp;amp;&amp;amp; ..&#x2F;format.sh&lt;&#x2F;code&gt;. &lt;code&gt;upstream&lt;&#x2F;code&gt; should
be the name of the rust-lang&#x2F;rust remote.&lt;&#x2F;p&gt;
&lt;p&gt;Once the script runs, you will be based on the &lt;code&gt;a916ac22b9f7f&lt;&#x2F;code&gt; commit. You
likely want to then run &lt;code&gt;git rebase -i upstream&#x2F;master&lt;&#x2F;code&gt; or so to finish, but the
script above gets you past the formatting PR at least.&lt;&#x2F;p&gt;
&lt;p&gt;This should mostly resolve conflicts correctly, but occasionally if you&#x27;ve edited something in
imports (a common case I&#x27;ve encountered) or otherwise this will not resolve quite right. Usually
though this will solve 99% of the problems and the rest can be fixed up manually afterwards.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-12-17 Infrastructure Team Meeting</title>
            <pubDate>Fri, 20 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2019-second-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2019-second-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by pietroalbini. Minutes written by pietroalbini.&lt;br &#x2F;&gt;
Attending: aidanhs, alexcrichton, kennytm, Mark-Simulacrum, pietroalbini,
shepmaster&lt;&#x2F;p&gt;
&lt;h2 id=&quot;spurious-chocolatey-failures&quot;&gt;Spurious Chocolatey failures&lt;&#x2F;h2&gt;
&lt;p&gt;Since a few days ago, Chocolatey started returning 503 error codes at random,
preventing some Windows CI runners from downloading MSYS2, and the tree was
closed to prevent the failures from affecting a bunch of PRs. There were a few
proposals on how to work around them, spanning from a proper mirroring
implementation to just a quick fix to get CI working again.&lt;&#x2F;p&gt;
&lt;p&gt;After the discussion the team agreed to prioritize getting CI working
consistently rather than implement the correct solution from the start. aidanhs
is going to look into that during the weekend, if nobody else finishes the work
before.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;progress-on-moving-the-infrastructure-to-terraform&quot;&gt;Progress on moving the infrastructure to Terraform&lt;&#x2F;h2&gt;
&lt;p&gt;In the past few months pietroalbini started exploring moving the configuration
of Rust’s AWS infrastructure to Terraform, to allow for better collaboration
and auditability. So far a few services have been moved over to Terraform, and
pietroalbini proposed in the meeting to evaluate moving dynamic applications
over to ECS and configure those with Terraform.&lt;&#x2F;p&gt;
&lt;p&gt;alexcrichton brought up the point that pietroalbini is at the moment the only
person in the team familiar with our Terraform setup, and while it’s probably a
better solution than the status quo we need more people able to work with it
before we decide to fully commit to using it. He acknowledged the current
solution (services manually configured through the console) is not scalable nor
long term, but we can’t jump to Terraform if most of the team doesn’t know how
to work with it.&lt;&#x2F;p&gt;
&lt;p&gt;shepmaster said that this is not much different than the situation in the past,
where alexcrichton was the only one knowing how our infrastructure worked
(since then other people in the team got up to speed). aidanhs pointed out that
we had a case in the past like that, when only alexcrichton knew how a system
worked and it broke while he was on holiday.&lt;&#x2F;p&gt;
&lt;p&gt;alexcrichton proposed to pause investing time into Terraform until at least
another team member gets familiar with it, and Mark-Simulacrum said he’s
willing to pair with pietroalbini for a few hours to migrate one of the
services to Terraform, learning how it works in the process.&lt;&#x2F;p&gt;
&lt;p&gt;The feelings about ECS turned up to be mostly the same: everyone agreed it’s
surely a better solution than the setup we have right now, but only
pietroalbini is familiar with it. We agreed that pietroalbini and
Mark-Simulacrum are going to deploy one of the small applications to ECS using
Terraform while pairing, testing both the new things in one go.&lt;&#x2F;p&gt;
&lt;p&gt;In the end, pietroalbini reminded the team that not every application we
currently host is going to fit into ECS + Fargate without changes, especially
because you can’t really persist data on the filesystem with it, but he
mentioned he’s willing to do the implementation work to adapt those
applications not to use the filesystem anymore.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance Working Group Update: Meeting 17 December 2019</title>
            <pubDate>Fri, 20 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2020-second-governance-wg-minutes/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2020-second-governance-wg-minutes/</guid>
            <description>&lt;p&gt;Hello everyone! &lt;&#x2F;p&gt;
&lt;p&gt;On Tuesday 17 December the working group met and built an outline of an RFC to introduce project groups. If you would like to watch, a recording is available on &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=q6us8yhDDUU&amp;amp;feature=youtu.be&quot;&gt;YouTube&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;project-groups&quot;&gt;Project groups&lt;&#x2F;h2&gt;
&lt;p&gt;You can see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2019.12.17.md&quot;&gt;detailed minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;&quot;&gt;wg-governance&lt;&#x2F;a&gt; repository, but here is a quick summary of what we would like to do with the RFC: &lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Introduce the project group concept, creation workflow, and lifecycle&lt;&#x2F;li&gt;
&lt;li&gt;Provide guidance for how project groups use RFCs&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Goals served by introducing project groups include improved visibility into and follow-through on projects,
as well as supporting better documentation of the design process.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;next-meeting&quot;&gt;Next meeting&lt;&#x2F;h2&gt;
&lt;p&gt;Our next meeting will be Jan 14. The topic is to be determined, but it is planned to discuss that on January 7th on the Rust Discord in the &lt;code&gt;#wg-governance&lt;&#x2F;code&gt; channel.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>An Update from WG-Learning</title>
            <pubDate>Fri, 20 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/wg-learning-update/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/wg-learning-update/</guid>
            <description>&lt;h1 id=&quot;an-update-from-wg-learning&quot;&gt;An update from WG-Learning&lt;&#x2F;h1&gt;
&lt;p&gt;In our last post in &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;inside-rust&#x2F;2019&#x2F;10&#x2F;28&#x2F;rustc-learning-working-group-introduction.html&quot;&gt;October&lt;&#x2F;a&gt; we gave an overview what the Learning WG is
and what we are doing. We have made a lot of progress since that post, and we
have also held a meeting to decide what to work on next. So let&#x27;s dig in...&lt;&#x2F;p&gt;
&lt;h2 id=&quot;work-completed&quot;&gt;Work completed&lt;&#x2F;h2&gt;
&lt;p&gt;We mentioned before that we are in the process of producing &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc-dev-guide&lt;&#x2F;a&gt;
chapters from the &amp;quot;Compiler Lecture Series&amp;quot; videos. The goal is to try to
produce guide chapters that are approachable for beginners and give a good
foundation for exploring and hacking on the compiler.&lt;&#x2F;p&gt;
&lt;p&gt;Recently, we merge a &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;salsa.html&quot;&gt;chapter&lt;&#x2F;a&gt; on &lt;a href=&quot;https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;salsa&quot;&gt;&lt;code&gt;salsa&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; by &lt;code&gt;@Karrq&lt;&#x2F;code&gt;.
&lt;code&gt;salsa&lt;&#x2F;code&gt; is a crate that makes incremental computation easier. While it is not
used in &lt;code&gt;rustc&lt;&#x2F;code&gt; itself, it is heavily inspired by it, and it is used by
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-analyzer&#x2F;rust-analyzer&quot;&gt;&lt;code&gt;rust-analyzer&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We also collectively have been working on a chapter about &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nightly&#x2F;nightly-rustc&#x2F;rustc&#x2F;ty&#x2F;type.Ty.html&quot;&gt;&lt;code&gt;ty::Ty&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and
the way that rustc represents types internally. You can find that PR
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&#x2F;pull&#x2F;530&quot;&gt;here&lt;&#x2F;a&gt;. This has been a big effort for a few months now, and we are excited
to have this new chapter in the guide.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-s-next&quot;&gt;What&#x27;s next?&lt;&#x2F;h2&gt;
&lt;p&gt;We just had a &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;196385-t-compiler.2Fwg-learning&#x2F;topic&#x2F;planning.20meeting&quot;&gt;planning meeting&lt;&#x2F;a&gt; to discuss what to work on next. The
guide has some long-standing holes and shortcomings that we would like to address.&lt;&#x2F;p&gt;
&lt;p&gt;Specifically, the Learning WG decided that we wanted to pursue the following goals next:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Write an overview chapter&lt;&#x2F;li&gt;
&lt;li&gt;Gather source material for chapters on monomorphization and LLVM&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;overview-chapter&quot;&gt;Overview chapter&lt;&#x2F;h3&gt;
&lt;p&gt;One of the challenges with big software systems is understanding how everything
fits together. We have seen this problem come up with the rustc-dev-guide; the chapters
tunnel down into a single part of the compiler, but it is hard to get a good
view of all the things that happen to a piece of code between lexing and linking.&lt;&#x2F;p&gt;
&lt;p&gt;We want to remedy this problem by creating an Overview chapter that walks
through some example from the beginning of the compiler to the end of the
compiler at a high level.  We plan to put this chapter at the beginning of
(part 2 of) the guide, so that it guide readers as to what part of the
compilation they are reading about in the subsequent chapters.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;monomorphization-codegen-llvm&quot;&gt;Monomorphization, Codegen, LLVM&lt;&#x2F;h3&gt;
&lt;p&gt;One of the biggest gaps in the guide currently is what happens to your code
after the MIR is produced. We have chapters on almost everything that happens
before that (though many of them are pretty slim), but we have almost nothing
after the MIR is produced, borrow checked, and optimized.&lt;&#x2F;p&gt;
&lt;p&gt;In particular, after the MIR is optimized, we need to &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;appendix&#x2F;glossary.html&quot;&gt;monomorphize&lt;&#x2F;a&gt; it,
produce LLVM IR from it, call LLVM to produce executable code, and then link
everything to form a final binary object.&lt;&#x2F;p&gt;
&lt;p&gt;The Learning WG will work on collecting information to write chapters on these
topics.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;getting-involved&quot;&gt;Getting involved&lt;&#x2F;h2&gt;
&lt;p&gt;Did any of this sound interesting to you? We would love for you to join us! You
can the Learning WG on the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;196385-t-compiler.2Fwg-learning&quot;&gt;&lt;code&gt;t-compiler&#x2F;wg-learning&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; stream on Zulip.
Feel free to stop by and ping us.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Congrats to compiler team members matthewjasper and wesleywiser</title>
            <pubDate>Thu, 19 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jasper-and-wiser-full-members-of-compiler-team/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/jasper-and-wiser-full-members-of-compiler-team/</guid>
            <description>&lt;p&gt;I am pleased to announce that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matthewjasper&#x2F;&quot;&gt;@matthewjasper&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&#x2F;&quot;&gt;@wesleywiser&lt;&#x2F;a&gt;
have been made full members of the &lt;a href=&quot;https:&#x2F;&#x2F;www.rust-lang.org&#x2F;governance&#x2F;teams&#x2F;compiler&quot;&gt;compiler team&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matthewjasper&#x2F;&quot;&gt;@matthewjasper&lt;&#x2F;a&gt; has been a huge contributor to the Non-Lexical
Lifetimes (NLL) work, filing issues and fixing bugs starting way back in
2017. Matthew has also been fixing compiler soundness bugs and making
miscellaneous improvements to Rust&#x27;s Middle Intermediate
Representation (MIR). Most recently, Matthew has removed all uses of
&lt;code&gt;gensym&lt;&#x2F;code&gt; from the compiler, as well as the &lt;code&gt;gensym&lt;&#x2F;code&gt; functionality
itself (which was implemented in a way that injected 
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;49300&quot;&gt;subtle bugs&lt;&#x2F;a&gt; with incremental compilation).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&#x2F;&quot;&gt;@wesleywiser&lt;&#x2F;a&gt; first started contributing to Rust way back in 2015,
before even the 1.0 release, with various documentation &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;22633&quot;&gt;fixes&lt;&#x2F;a&gt;.
Since then, Wesley has improved the incremental compilation system,
added MIR optimization passes like constant-propagation and inlining,
and has been part of the compiler&#x27;s self-profiler effort, starting with its
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;51657&quot;&gt;first version&lt;&#x2F;a&gt; and
continuing today as a co-lead of &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;self-profile&#x2F;&quot;&gt;WG-self-profile&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Congratulations to both &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matthewjasper&#x2F;&quot;&gt;@matthewjasper&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&#x2F;&quot;&gt;@wesleywiser&lt;&#x2F;a&gt;, and thanks
for all of your contributions to the project!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Bisecting Rust Compiler Regressions with cargo-bisect-rustc</title>
            <pubDate>Wed, 18 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/bisecting-rust-compiler/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/bisecting-rust-compiler/</guid>
            <description>&lt;p&gt;Let&#x27;s say that you&#x27;ve just updated the Rust compiler version and have
tried to compile your application and see a failure that wasn&#x27;t there
before. That&#x27;s likely due to a regression in the compiler.  We&#x27;ve just
released
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;cargo-bisect-rustc&quot;&gt;&lt;code&gt;cargo-bisect-rustc&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
a tool that makes it super easy to find exactly when the regression
happened.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;cargo-bisect-rustc&lt;&#x2F;code&gt; automatically downloads rustc artifacts and tests
them against a project you provide until it finds the regression. At
minimum, it will identify the nightly release which triggered the
regression; but if the regression occurred in the last 168 days, it will
even figure out the exact PR, which is often very useful in helping us
fix the problem.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;cargo-bisect-rustc&lt;&#x2F;code&gt; was created originally by Mark Rousskov. I extended
it recently to make it easier to use.&lt;&#x2F;p&gt;
&lt;p&gt;To install the tool run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#bf616a;&quot;&gt;cargo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; install cargo-bisect-rustc
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;finding-a-regression&quot;&gt;Finding a regression&lt;&#x2F;h2&gt;
&lt;p&gt;We are going to use &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;64945&quot;&gt;this &amp;quot;old&amp;quot; reported rustc
regression&lt;&#x2F;a&gt; as an
example:&lt;&#x2F;p&gt;
&lt;p&gt;Our application consists only of this file:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;pub struct &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;Slice&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;&amp;#39;a&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, T&amp;gt;(&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;&amp;#39;a&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; [T]);

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;impl&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;&amp;#39;a&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, T: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;&amp;#39;a&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt; Slice&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;&amp;#39;a&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, T&amp;gt; {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;pub const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;EMPTY&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Self &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;= Slice ({
        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; v: &amp;amp;[T] = &amp;amp;[];
        v
    });
}

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; s = Slice(&amp;amp;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;]);
    assert!(s.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;!= Slice::&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;EMPTY&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then we run &lt;code&gt;cargo bisect-rustc --end=2019-10-02&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Since this bug was fixed on 2019-10-03, we&#x27;re using 2019-10-02 as the
end We need to provide the end point for this particular example, given
that this bug was fixed on 2019-10-03, we&#x27;re using 2019-10-02 as the end
point. If you don&#x27;t provide an ending point it assumes that the end
point is today&#x27;s nightly or your currently installed nightly. If you
don&#x27;t provide a start point as we&#x27;re doing it tries to find one by
regressing in time.  If you know if a failing starting point it would be
faster if you just provide that one.&lt;&#x2F;p&gt;
&lt;p&gt;By default it will run &lt;code&gt;cargo build&lt;&#x2F;code&gt; in the project and check whether or
not it fails. After finding a nightly that has regressed it is going to
automatically search for the commit that introduced the regression.&lt;&#x2F;p&gt;
&lt;p&gt;Let&#x27;s see the tool in action:&lt;&#x2F;p&gt;
&lt;p&gt;The tool starts by downloading various nightly compilers, trying to find
a date when the program worked ...&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;checking nightly-2019-10-02
std for x86_64-unknown-linux-gnu: 172.87 MB &#x2F; 172.87 MB [===============================================================================================================================================================] 100.00 % 10.67 MB&#x2F;s uninstalling nightly-2019-10-02
checking nightly-2019-09-30
...
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Once it has one failing and working point it starts bisecting ...&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;std for x86_64-unknown-linux-gnu: 173.43 MB &#x2F; 173.43 MB [===============================================================================================================================================================] 100.00 % 12.82 MB&#x2F;s uninstalling nightly-2019-09-29
tested nightly-2019-09-29, got No
searched toolchains nightly-2019-09-28 through nightly-2019-09-30
regression in nightly-2019-09-30
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Once it finds a nightly, it starts to search the PRs that went into that
nightly build ...&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;looking for regression commit between 2019-09-30 and 2019-09-29
fetching commits from 488381ce9ef0ceabe83b73127c659e5d38137df0 to 8431f261dd160021b6af85916f161a13dd101ca0
...
searched toolchains 488381ce9ef0ceabe83b73127c659e5d38137df0 through 8431f261dd160021b6af85916f161a13dd101ca0
regression in 0bbab7d99dde8620604fb265706dc8bff20345a7
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, when it finds the PR that broke the compiler, it generates a
bug report that you can copy and paste!&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;==================================================================================
= Please open an issue on Rust&amp;#39;s github repository                               =
= https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;new                                   =
= Below you will find a text that would serve as a starting point of your report =
==================================================================================

# Regression found in the compiler

searched nightlies: from nightly-2019-09-28 to nightly-2019-09-30
regressed nightly: nightly-2019-09-30
searched commits: from https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;commit&#x2F;488381ce9ef0ceabe83b73127c659e5d38137df0 to https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;commit&#x2F;8431f261dd160021b6af85916f161a13dd101ca0
regressed commit: https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;commit&#x2F;0bbab7d99dde8620604fb265706dc8bff20345a7
source code: URL OF A REPOSITORY THAT REPRODUCES THE ERROR

## Instructions

Please give the steps for how to build your repository (platform, system dependencies, etc.)
## Error

&amp;lt;details&amp;gt;&amp;lt;summary&amp;gt;COLLAPSIBLE ERROR STACKTRACE&amp;lt;&#x2F;summary&amp;gt;
&amp;lt;p&amp;gt;

```bash
Paste the error the compiler is giving
```

&amp;lt;&#x2F;p&amp;gt;&amp;lt;&#x2F;details&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This tells us that the regression started with
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;commit&#x2F;0bbab7d99dde8620604fb265706dc8bff20345a7&quot;&gt;&lt;code&gt;0bbab7d99dde8620604fb265706dc8bff20345a7&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
and you can look at the git log to find the PR. In this case is
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;64470&quot;&gt;#64470&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;call-for-action-try-the-tool&quot;&gt;Call for action: try the tool&lt;&#x2F;h2&gt;
&lt;p&gt;Please, give this tool a try and if you find yourself updating your
application and it stops building, it&#x27;s likely that you&#x27;re hitting a
regression. As you can see at the end of the execution of the tool, if a
regression is found the tool gives you a report that you can paste on a
github issue on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&quot;&gt;Rust repo&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;call-for-action-get-involved-in-the-development-of-cargo-bisect-rustc&quot;&gt;Call for action: get involved in the development of cargo-bisect-rustc&lt;&#x2F;h2&gt;
&lt;p&gt;There are also a lot of things to improve in the tool and a lot of bugs
to fix. There are a bunch of reported issues that are easy to fix,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;cargo-bisect-rustc&#x2F;issues&quot;&gt;check them
out&lt;&#x2F;a&gt;.  You can
also, reach us out. You can find me and the rest of the compiler
contributors and members in &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;217417-t-compiler.2Fcargo-bisect-rustc&quot;&gt;Zulip&#x27;s #t-compiler&#x2F;cargo-bisect-rustc
stream&lt;&#x2F;a&gt;.
Sign up there if you haven&#x27;t already and do not hesitate to ask
questions or even to send me a direct message if you don&#x27;t know where to
start.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-12-10 Infrastructure Team Meeting</title>
            <pubDate>Wed, 11 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2019-first-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2019-first-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by pietroalbini. Minutes written by pietroalbini.&lt;br &#x2F;&gt;
Attending: aidanhs, kennytm, Mark-Simulacrum, pietroalbini, shepmaster&lt;&#x2F;p&gt;
&lt;h2 id=&quot;feedback-on-the-rfc-2837-draft&quot;&gt;Feedback on the RFC 2837 draft&lt;&#x2F;h2&gt;
&lt;p&gt;pietroalbini gave the team a draft of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;pull&#x2F;2837&quot;&gt;RFC
2837&lt;&#x2F;a&gt; (then published shortly
after the meeting), about the demotion of Apple 32bit targets to Tier 3 from
Tier 1 and 2 (see the RFC for the motivations leading to that). The team was
largely onboard with it, and everyone gave useful feedback, which was
incorporated into the RFC text. Kinnison also jumped in to clarify the rustup
behavior when a target is removed.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance Working Group Update</title>
            <pubDate>Tue, 10 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2020-second-governance-wg-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2020-second-governance-wg-meeting/</guid>
            <description>&lt;p&gt;Hello everyone! The governance working group met last week to discuss
writing out a policy for access privileges on our Github
repositories. This blog post summarizes that meeting and also
announces the topic of our next meeting, which takes place on Tuesday,
December 17, 2019 (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=MnNuZDc0NzkzYTBkcDNzY2FkbWgzNjk3a2hfMjAxOTEyMTdUMjIwMDAwWiBtb3ppbGxhLmNvbV85YzZmYzNsNmJoZzhiY3A4Y2FmcnZrM29mNEBn&amp;amp;tmsrc=mozilla.com_9c6fc3l6bhg8bcp8cafrvk3of4%40group.calendar.google.com&amp;amp;scp=ALL&quot;&gt;calendar event&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;Also, this week we have a &lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;CyYwretwM8E&quot;&gt;video recording
available&lt;&#x2F;a&gt;. (We&#x27;re going to generally
try and record meetings when possible.)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;next-meeting&quot;&gt;Next meeting&lt;&#x2F;h2&gt;
&lt;p&gt;The next meeting will be discussing project groups and their integration into
the lang team. This is building on a few different posts and ideas:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;XAMPPRocky&#x27;s draft RFC &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;draft-rfcs&#x2F;working-group-terminology.md&quot;&gt;clarifying our terminology around working groups&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;My &lt;a href=&quot;http:&#x2F;&#x2F;smallcultfollowing.com&#x2F;babysteps&#x2F;blog&#x2F;2019&#x2F;09&#x2F;11&#x2F;aic-shepherds-3-0&#x2F;&quot;&gt;Shepherds 3.0&lt;&#x2F;a&gt; blog post&lt;&#x2F;li&gt;
&lt;li&gt;The embedded working group&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-embedded&#x2F;wg&#x2F;pull&#x2F;378&quot;&gt;shepherded projects RFC&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;My recent blog post about &lt;a href=&quot;http:&#x2F;&#x2F;smallcultfollowing.com&#x2F;babysteps&#x2F;blog&#x2F;2019&#x2F;12&#x2F;03&#x2F;aic-improving-the-pre-rfc-process&#x2F;&quot;&gt;an improved pre-RFC
process&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;access-rights-policy&quot;&gt;Access rights policy&lt;&#x2F;h2&gt;
&lt;p&gt;I&#x27;ll summarize our conclusions here. Consult the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;&quot;&gt;wg-governance&lt;&#x2F;a&gt;
repository to find more &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2019.12.03.md&quot;&gt;detailed minutes&lt;&#x2F;a&gt; from our conversation.
The key conclusions were:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Where possible, we should stick to a single org (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-community&#x2F;&quot;&gt;&lt;code&gt;rust-lang&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;).
&lt;ul&gt;
&lt;li&gt;In particular, team-specific organizations like
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-dev-tools&#x2F;&quot;&gt;&lt;code&gt;rust-dev-tools&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-community&#x2F;&quot;&gt;&lt;code&gt;rust-community&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; ought to be merged
into &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-community&#x2F;&quot;&gt;&lt;code&gt;rust-lang&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Using a single organization makes it much easier to administrate.&lt;&#x2F;li&gt;
&lt;li&gt;Note that we&#x27;ve already deprecated the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang-nursery&#x2F;&quot;&gt;&lt;code&gt;rust-lang-nursery&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; org&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;As an exception, we will for now continue having each domain working group
operate outside of its own org (e.g., &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-embedded&#x2F;wg&quot;&gt;&lt;code&gt;rust-embedded&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;). Those orgs
are quite active and have a diverse membership and we don&#x27;t want to
disturb that for now.
&lt;ul&gt;
&lt;li&gt;However, it would be good if each such org added the &lt;code&gt;rust-lang-owner&lt;&#x2F;code&gt; bot
as an owner, so that the rust infra team has access.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;For repositories, we will avoid giving access to individuals, and instead try to
give access only to entities (teams, working groups, etc) that are created and
managed by the Rust &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;team&quot;&gt;team&lt;&#x2F;a&gt; repository.
&lt;ul&gt;
&lt;li&gt;In general, it is not recommended to give owner or admin access; write access suffices.&lt;&#x2F;li&gt;
&lt;li&gt;(Unfortunately, read and triage access is often not sufficient for us.)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We also enumerated a number of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2019.12.03.md#action-items&quot;&gt;action items&lt;&#x2F;a&gt; to putting this policy
in to practice. We&#x27;ll be revisiting the topic periodically to check on
progress.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Announcing the Docs.rs Team</title>
            <pubDate>Mon, 09 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/announcing-the-docsrs-team/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/announcing-the-docsrs-team/</guid>
            <description>&lt;p&gt;Today we&#x27;re announcing a brand new team: The Docs.rs Team!&lt;&#x2F;p&gt;
&lt;p&gt;Previously, &lt;a href=&quot;https:&#x2F;&#x2F;docs.rs&#x2F;&quot;&gt;Docs.rs&lt;&#x2F;a&gt; has been managed by the Rustdoc Team, as many of the initial concerns of
Docs.rs were shared by Rustdoc as Docs.rs was being brought into team maintainership. However, as
time went on, those concerns started to diverge more and more, and so did the people who contributed
to either tool.&lt;&#x2F;p&gt;
&lt;p&gt;The new Docs.rs Team will be responsible for the operations and development for &lt;a href=&quot;https:&#x2F;&#x2F;docs.rs&#x2F;&quot;&gt;Docs.rs&lt;&#x2F;a&gt;, leaving
the Rustdoc Team to be responsible for the Rustdoc tool itself. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;QuietMisdreavus&quot;&gt;@QuietMisdreavus&lt;&#x2F;a&gt; will be leading
the new Docs.rs Team, leaving &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;GuillaumeGomez&quot;&gt;@GuillaumeGomez&lt;&#x2F;a&gt; to lead the Rustdoc Team.&lt;&#x2F;p&gt;
&lt;p&gt;Joining QuietMisdreavus on the Docs.rs Team is GuillaumeGomez, coordinating work between Rustdoc and
Docs.rs; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;onur&quot;&gt;@onur&lt;&#x2F;a&gt;, the original creator of Docs.rs; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pietroalbini&quot;&gt;@pietroalbini&lt;&#x2F;a&gt;, who has coordinated work in
Docs.rs from the perspective of the Infrastrucure Team; and introducing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jyn514&quot;&gt;@jyn514&lt;&#x2F;a&gt;, who has worked to
improve the developer experience of contributing to Docs.rs by converting the local development
configuration to use &lt;code&gt;docker-compose&lt;&#x2F;code&gt;!&lt;&#x2F;p&gt;
&lt;p&gt;To get involved with either team, join us on Discord! The Rustdoc Team hangs out in &lt;a href=&quot;https:&#x2F;&#x2F;discord.gg&#x2F;4yEYPuT&quot;&gt;&lt;code&gt;#rustdoc&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
and the Docs.rs Team hangs out in &lt;a href=&quot;https:&#x2F;&#x2F;discord.gg&#x2F;2k5vVWn&quot;&gt;&lt;code&gt;#docs-rs&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-11-18 IDE team meeting</title>
            <pubDate>Wed, 04 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/ide-future/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/ide-future/</guid>
            <description>&lt;p&gt;Meeting run by nikomatsakis. Minutes written by nikomatsakis.
Attending: nikomatsakis, pnkfelix, Xanewok, matklad
&lt;a href=&quot;https:&#x2F;&#x2F;hackmd.io&#x2F;fAnj6pNqRRGIyDQ4el5tcQ&quot;&gt;Notes&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;the-rust-ide&quot;&gt;The Rust IDE&lt;&#x2F;h1&gt;
&lt;p&gt;In the last compiler&#x2F;IDE team meeting we&#x27;ve discussed the overall direction for IDE support in Rust.&lt;&#x2F;p&gt;
&lt;p&gt;At the moment, the two IDEs developed as part of the Rust project are Rust Language Server (RLS) and rust-analyzer.
The former is currently being shipped with the Rust distribution while the latter serves as a foundation for the &amp;quot;RLS 2.0&amp;quot; working group.&lt;&#x2F;p&gt;
&lt;p&gt;Unfortunately, these are actively developed in separation without much code-sharing between the two.
We&#x27;d like to change that and to find out how we can unify these efforts.
Therefore, we&#x27;ve been having a series of talks with the aim of elaborating the design space and creating a proposal for how to improve the situation going forward.&lt;&#x2F;p&gt;
&lt;p&gt;This blog post gives a short summary from our most recent meeting.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;why-2-ides&quot;&gt;Why 2 IDEs?&lt;&#x2F;h1&gt;
&lt;p&gt;The main benefits of rust-analyzer is greater performance (because of fully-lazy compilation model) and somewhat richer feature-set (due to more flexible analysis API).
The main benefits of RLS is precision (it uses &lt;code&gt;rustc&lt;&#x2F;code&gt; under the hood).
Additionally, RLS is the main consumer of save-analysis infrastructure, which is a good fit for tools which need a static view of the codebase, such as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-dev-tools&#x2F;cargo-src&quot;&gt;cargo-src&lt;&#x2F;a&gt; or &lt;a href=&quot;https:&#x2F;&#x2F;code.visualstudio.com&#x2F;blogs&#x2F;2019&#x2F;02&#x2F;19&#x2F;lsif&quot;&gt;lsif&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;save-analysis&quot;&gt;Save-analysis&lt;&#x2F;h1&gt;
&lt;p&gt;What is &amp;quot;save-analysis&amp;quot;?
It is an unstable format which rustc uses to record information about the compiled code.
It contains a pretty high-level information.
For example, for each identifier in the source-crate, save-analyzer will map this identifier to a definition and list of usages.
&lt;code&gt;env RUSTFLAGS=&amp;quot;-Zunstable-options -Zsave-analysis&amp;quot; cargo check&lt;&#x2F;code&gt; can be used to instruct &lt;code&gt;rustc&lt;&#x2F;code&gt; to produce save-analysis files (in JSON format).
Because save-analysis is produced directly from rustc iternal data structures, it is guaranteed to be correct (modulo bugs in rustc itself).&lt;&#x2F;p&gt;
&lt;h1 id=&quot;query-model&quot;&gt;Query model&lt;&#x2F;h1&gt;
&lt;p&gt;The fundamental problem with save-analysis is that it is computed for the whole crate at once.
This is pretty slow for non-trivial crates, and is also wasteful.
At any given moment in time, only a small fraction of analysis information is really required.
rust-analyzer solves this by using &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;salsa-rs&#x2F;salsa&quot;&gt;&lt;code&gt;salsa&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; queries for code analysis.
The result is a compilation model which is fully lazy across the whole crate graph.
This model is similar to what rustc is using internally, but is more lazy both &amp;quot;vertically&amp;quot; and &amp;quot;horizontally&amp;quot;.
Vertically, &lt;code&gt;rustc&lt;&#x2F;code&gt; starts to be incremental only after parsing and macro expansion; rust-analyzer is incremental on per-file basis.
Horizontally, &lt;code&gt;rustc&lt;&#x2F;code&gt; compiles one crate at a time; rust-analyzer uses queries for the whole crate graph.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;way-forward&quot;&gt;Way forward&lt;&#x2F;h1&gt;
&lt;p&gt;Our current hypothesis is that it is possible to integrate both approaches without doubling the engineering effort.
Specifically, we will add an option to rust-analyzer to use save-analysis for find-usages and rename functionality.
That way, we&#x27;ll get precise results for most important queries, without slowing down completion.
Unlike RLS, however, rust-analyzer will not link to rustc and instead will rely on cargo for running the compiler and producing save-analysis data.
If this approach works, we will consider freezing RLS and focusing fully on rust-analyzer.
Long term, the plan is to unify the save-analysis fallback path and the lazy analysis.&lt;&#x2F;p&gt;
&lt;p&gt;In parallel to this RLS&#x2F;rust-analyzer unification effort, we continue to pursue rustc library-ification, with a specific focus on traits solving (via chalk) and type inference.
&amp;quot;Library-ification&amp;quot; is a term we&#x27;ve been using for the process of extracting code out of rustc into re-usable libaries which can be shared by both rustc and rust-analyzer.
The goal is to use library-ification to gradually reduce the amount of duplicated code between rustc and rust-analyzer, with the goal of eventually either having a single code-base, or having the vast majority of the logic be shared.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance Working Group Update</title>
            <pubDate>Tue, 03 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2020-first-governance-wg-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/dec-2020-first-governance-wg-meeting/</guid>
            <description>&lt;p&gt;Hello everyone! Two weeks ago the governance working group met. Here are the large issues we discussed and information on our next meeting.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Edit:&lt;&#x2F;em&gt; This post was prepared last week but was accidentally not merged. Apologies for the short notice about the topic of this week&#x27;s meeting! --nikomatsakis &lt;&#x2F;p&gt;
&lt;h2 id=&quot;large-issues-discussed&quot;&gt;Large Issues Discussed&lt;&#x2F;h2&gt;
&lt;p&gt;We reviewed the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;1068-rust-governance.html&quot;&gt;current governance RFC&lt;&#x2F;a&gt; and noted governance items that have been added since the RFC was written. We also noted things that have changed or have just not happened, as well as things that could be improved. Please see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2019.11.19.md&quot;&gt;full notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;next-meeting&quot;&gt;Next Meeting&lt;&#x2F;h2&gt;
&lt;p&gt;Next meeting will be at &lt;strong&gt;22:00 UTC on Tuesday, December 3&lt;&#x2F;strong&gt; and will be focused on the need for a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;issues&#x2F;4&quot;&gt;GitHub Access Policy&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;d like to encourage anyone who&#x27;s interested, regardless of their
previous experience to come to the &lt;code&gt;#wg-governance&lt;&#x2F;code&gt;
channel on Discord to attend the meeting. (Our meetings are done over a video
call with Zoom, but we use the Discord channel to organise ourselves).&lt;&#x2F;p&gt;
&lt;p&gt;If there are other issues you would like to see us discuss or discuss with us, please mention them in a comment on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;issues&#x2F;29&quot;&gt;this GitHub issue&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Constant propagation is now on by default in nightly</title>
            <pubDate>Mon, 02 Dec 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/const-prop-on-by-default/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/const-prop-on-by-default/</guid>
            <description>&lt;p&gt;I&#x27;m pleased to announce that the &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;2016&#x2F;04&#x2F;19&#x2F;MIR.html&quot;&gt;Mid-level IR&lt;&#x2F;a&gt; (MIR) constant propagation pass has been &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;66074&quot;&gt;switched on&lt;&#x2F;a&gt; by default on Rust nightly which will eventually become Rust 1.41!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-is-constant-propagation&quot;&gt;What is constant propagation?&lt;&#x2F;h2&gt;
&lt;p&gt;Constant propagation is an optimization where the compiler recognizes code that can be run at compile time, evaluates it, and replaces the original code with the result.&lt;&#x2F;p&gt;
&lt;p&gt;For example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; X: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; y = X + X;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Rather than evaluating &lt;code&gt;X + X&lt;&#x2F;code&gt; at runtime, the compiler can recognize that the value of &lt;code&gt;X&lt;&#x2F;code&gt; is known at compile time and replace it with the correct value resulting in:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; X: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; y = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This optimization is opportunistic and automatically recognizes constants even when they are not declared as such:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;struct &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;Point {
  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;y&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
}

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; a = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;+ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; optimizes to 4
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; b = [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;][&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;]; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; optimizes to 3
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; c = (Point { x: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;21&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, y: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;42 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;}).y; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; optimizes to 42
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;propagation-into-control-flow&quot;&gt;Propagation into control flow&lt;&#x2F;h2&gt;
&lt;p&gt;The constant propagation pass also handles propagating into control flow.
For example:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Foo: Option&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u8&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt; = Some(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;12&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Foo {
   None =&amp;gt; panic!(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;no value&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;),
   Some(v) =&amp;gt; v,
};
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;becomes:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Foo: Option&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u8&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt; = Some(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;12&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;12&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is very helpful for checked math, the default in &lt;code&gt;debug&lt;&#x2F;code&gt; mode, which introduces additional control flow after every operation:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;+ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;* &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;6&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;actually operates like this with overflow checking enabled:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(_tmp0, overflowed) = CheckedMultiply(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;6&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);
assert!(!overflowed, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;attempt to multiply with overflow&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;);

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(_tmp1, overflowed) = CheckedAdd(_tmp0, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);
assert!(!overflowed, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;attempt to add with overflow&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;);

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x = _temp1;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;which adds quite a bit of control flow!
Constant propagation evaluates the math at compile time and reduces this to:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; _tmp0 = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;24&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
assert!(!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;attempt to multiply with overflow&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;);

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; _tmp1 = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;26&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
assert!(!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;attempt to add with overflow&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;);

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;26&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;which is further reduced to just:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;26&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;compiler-performance&quot;&gt;Compiler performance&lt;&#x2F;h2&gt;
&lt;p&gt;As you might have guessed, reducing the amount of control flow processed by the Rust compiler has a positive effect on compile times.
We&#x27;re seeing 2-10% improvement on a variety of test cases in both debug and release mode.
Even though LLVM has its own constant propagation pass, we see improvements because our pass operates on MIR while it is still generic.
The more concrete instances of a generic function that are instantiated, the larger the payoff from this optimization.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve suspected for a while that the verbose LLVM IR the Rust compiler generates contributes considerably to long compilation times.
By implementing optimizations like this, we believe there is significant potential to lower compile times by generating better LLVM IR.
If you&#x27;d like to get involved with the MIR Optimizations working group, stop by our &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;189540-t-compiler.2Fwg-mir-opt&quot;&gt;Zulip channel&lt;&#x2F;a&gt; and say hello!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>`if` and `match` in constants on nightly rust</title>
            <pubDate>Mon, 25 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/const-if-match/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/const-if-match/</guid>
            <description>&lt;p&gt;&lt;strong&gt;TLDR; &lt;code&gt;if&lt;&#x2F;code&gt; and &lt;code&gt;match&lt;&#x2F;code&gt; are now usable in constants on the latest nightly.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As a result, you can now write code like the following and have it execute at
compile-time:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;static &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;PLATFORM&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;str &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;cfg!(unix) {
    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;unix&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;
} &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;cfg!(windows) {
    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;windows&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;
} &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;{
    &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;other&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;
};

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;_: () = assert!(std::mem::size_of::&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;usize&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;() == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;8&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Only 64-bit platforms are supported&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;if&lt;&#x2F;code&gt; and &lt;code&gt;match&lt;&#x2F;code&gt; can also be used in the body of a &lt;code&gt;const fn&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;gcd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;) -&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;{
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;match &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(a, b) {
        (x, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;) | (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, x) =&amp;gt; x,

        (x, y) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x % &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;== &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;amp;&amp;amp; y % &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;== &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;gcd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(x&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, y&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;),
        (x, y) | (y, x) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x % &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;== &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;gcd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(x&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, y),

        (x, y) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; x &amp;lt; y =&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;gcd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;((y-x)&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, x),
        (x, y) =&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;gcd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;((x-y)&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, y),
    }
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;what-exactly-is-going-on-here&quot;&gt;What exactly is going on here?&lt;&#x2F;h2&gt;
&lt;p&gt;The following expressions,&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;match&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;if&lt;&#x2F;code&gt; and &lt;code&gt;if let&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&amp;amp;&amp;amp;&lt;&#x2F;code&gt; and &lt;code&gt;||&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;can now appear in any of the following contexts,&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;const fn&lt;&#x2F;code&gt; bodies&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;const&lt;&#x2F;code&gt; and associated &lt;code&gt;const&lt;&#x2F;code&gt; initializers&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;static&lt;&#x2F;code&gt; and &lt;code&gt;static mut&lt;&#x2F;code&gt; initializers&lt;&#x2F;li&gt;
&lt;li&gt;array initializers&lt;&#x2F;li&gt;
&lt;li&gt;const generics (EXPERIMENTAL)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;if &lt;code&gt;#![feature(const_if_match)]&lt;&#x2F;code&gt; is enabled for your crate.&lt;&#x2F;p&gt;
&lt;p&gt;You may have noticed that the short-circuiting logic operators, &lt;code&gt;&amp;amp;&amp;amp;&lt;&#x2F;code&gt; and
&lt;code&gt;||&lt;&#x2F;code&gt;, were already legal in a &lt;code&gt;const&lt;&#x2F;code&gt; or &lt;code&gt;static&lt;&#x2F;code&gt;. This was accomplished by
translating them to their non-short-circuiting equivalents, &lt;code&gt;&amp;amp;&lt;&#x2F;code&gt; and &lt;code&gt;|&lt;&#x2F;code&gt;
respectively. Enabling the feature gate will turn off this hack and make &lt;code&gt;&amp;amp;&amp;amp;&lt;&#x2F;code&gt;
and &lt;code&gt;||&lt;&#x2F;code&gt; behave as you would expect.&lt;&#x2F;p&gt;
&lt;p&gt;As a side-effect of these changes, the &lt;code&gt;assert&lt;&#x2F;code&gt; and &lt;code&gt;debug_assert&lt;&#x2F;code&gt; macros
become usable in a const context if &lt;code&gt;#![feature(const_panic)]&lt;&#x2F;code&gt; is also
enabled. However, the other assert macros (e.g., &lt;code&gt;assert_eq&lt;&#x2F;code&gt;,
&lt;code&gt;debug_assert_ne&lt;&#x2F;code&gt;) remain forbidden, since they need to call &lt;code&gt;Debug::fmt&lt;&#x2F;code&gt; on
their arguments.&lt;&#x2F;p&gt;
&lt;p&gt;The looping constructs, &lt;code&gt;while&lt;&#x2F;code&gt;, &lt;code&gt;for&lt;&#x2F;code&gt;, and &lt;code&gt;loop&lt;&#x2F;code&gt; are also forbidden and will
be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;52000&quot;&gt;feature-gated separately&lt;&#x2F;a&gt;. As you have seen above, loops can be
emulated with recursion as a temporary measure. However, the non-recursive
version will usually be more efficient since rust does not (to my knowledge)
do tail call optimization.&lt;&#x2F;p&gt;
&lt;p&gt;Finally, the &lt;code&gt;?&lt;&#x2F;code&gt; operator remains forbidden in a const context, since its
desugaring contains a call to &lt;code&gt;From::from&lt;&#x2F;code&gt;. The design for &lt;code&gt;const&lt;&#x2F;code&gt; trait
methods is still being discussed, and both &lt;code&gt;?&lt;&#x2F;code&gt; and &lt;code&gt;for&lt;&#x2F;code&gt;, which desugars to a
call to &lt;code&gt;IntoIterator::into_iter&lt;&#x2F;code&gt;, will not be usable until a final decision is
reached.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-s-next&quot;&gt;What&#x27;s next?&lt;&#x2F;h2&gt;
&lt;p&gt;This change will allow a great number of standard library functions to be made
&lt;code&gt;const&lt;&#x2F;code&gt;. You can help with this process! To get started, here&#x27;s a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;53718&quot;&gt;list of
numeric functions&lt;&#x2F;a&gt; that can be constified with little effort.
Conversion to a &lt;code&gt;const fn&lt;&#x2F;code&gt; requires two steps. First, &lt;code&gt;const&lt;&#x2F;code&gt; is added to a
function definition along with a &lt;code&gt;#[rustc_const_unstable]&lt;&#x2F;code&gt; attribute. This
allows nightly users to call it in a const context. Then, after a period of
experimentation, the attribute is removed and the constness of that function is
stabilized. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;61635&quot;&gt;#61635&lt;&#x2F;a&gt; for an example of the first step and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;64028&quot;&gt;#64028&lt;&#x2F;a&gt; for an
example of the second.&lt;&#x2F;p&gt;
&lt;p&gt;Personally, I&#x27;ve looked forward to this feature for a long time, and I can&#x27;t
wait to start playing with it. If you feel the same, I would greatly
appreciate if you tested the limits of this feature! Try to sneak &lt;code&gt;Cell&lt;&#x2F;code&gt;s and
types with &lt;code&gt;Drop&lt;&#x2F;code&gt; impls into places they shouldn&#x27;t be allowed, blow up the
stack with poorly implemented recursive functions (see &lt;code&gt;gcd&lt;&#x2F;code&gt; above), and let
us know if something goes horribly wrong.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-took-you-so-long&quot;&gt;What took you so long?&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;miri.html&quot;&gt;The Miri engine&lt;&#x2F;a&gt;, which rust uses under the hood for compile-time
function evaluation, has been capable of this for a while now. However, rust
needs to statically guarantee certain properties about variables in a &lt;code&gt;const&lt;&#x2F;code&gt;,
such as whether they allow for interior mutability or whether they have a
&lt;code&gt;Drop&lt;&#x2F;code&gt; implementation that needs to be called. For example, we must reject the
following code since it would result in a &lt;code&gt;const&lt;&#x2F;code&gt; being mutable at runtime!&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;CELL&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &amp;amp;std::cell::Cell&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt; = &amp;amp;std::cell::Cell::new(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;42&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Not allowed...

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;CELL&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;);
    println!(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;CELL&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;()); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; otherwise this could print `0`!!!
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;However, it is sometimes okay for a &lt;code&gt;const&lt;&#x2F;code&gt; to contain a reference to a &lt;em&gt;type&lt;&#x2F;em&gt;
that may have interior mutability, as long as we can prove that the actual
&lt;em&gt;value&lt;&#x2F;em&gt; of that type does not. This is particularly useful for &lt;code&gt;enum&lt;&#x2F;code&gt;s with a
&amp;quot;unit variant&amp;quot; (e.g., &lt;code&gt;Option::None&lt;&#x2F;code&gt;).&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;NO_CELL&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: Option&amp;lt;&amp;amp;std::cell::Cell&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;&amp;gt; = None; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; OK
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A more detailed (but non-normative) treatment of the rules &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;const-eval&#x2F;blob&#x2F;master&#x2F;static.md#drop&quot;&gt;for &lt;code&gt;Drop&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;const-eval&#x2F;blob&#x2F;master&#x2F;const.md#2-interior-mutability&quot;&gt;for interior mutability&lt;&#x2F;a&gt; in a const context can be found
on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;const-eval&quot;&gt;&lt;code&gt;const-eval&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; repo.&lt;&#x2F;p&gt;
&lt;p&gt;It is not trivial to guarantee properties about the value of a variable when
complex control flow such as loops and conditionals is involved. Implementing
this feature required extending the existing dataflow framework in rust so
that we could properly track the value of each local across the control-flow
graph. At the moment, the analysis is very conservative, especially when values are
moved in and out of compound data types. For example, the following will not
compile, even when the feature gate is enabled.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;const fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;imprecise&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() -&amp;gt; Vec&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt; {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tuple: (Vec&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;i32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;,) = (Vec::new(),);
    tuple.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Even though the &lt;code&gt;Vec&lt;&#x2F;code&gt; created by &lt;code&gt;Vec::new&lt;&#x2F;code&gt; will never actually be dropped
inside the &lt;code&gt;const fn&lt;&#x2F;code&gt;, we don&#x27;t detect that all fields of &lt;code&gt;tuple&lt;&#x2F;code&gt; have been moved
out of, and thus conservatively assume that the drop impl for &lt;code&gt;tuple&lt;&#x2F;code&gt; will run.
While this particular case is trivial, there are other, more complex ones that
would require a more comprehensive solution. It is an open question how precise
we want to be here, since more precision means longer compile times, even for
users that have no need for more expressiveness.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-11-14 and 2019-11-21 Lang Team Triage Meetings</title>
            <pubDate>Fri, 22 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-lang-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-lang-team-meeting/</guid>
            <description>&lt;p&gt;Since I apparently forgot to post a blog post last week, this blog
post covers two lang-team triage meetings: [2019-11-14] and
[2019-11-21]. Recordings from &lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;0exyVhBmDW0&quot;&gt;both&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;X2z3CoV0OUM&quot;&gt;meetings&lt;&#x2F;a&gt; are also available.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;updates-on-shepherded-items&quot;&gt;Updates on shepherded items&lt;&#x2F;h2&gt;
&lt;p&gt;Here is a list of the &lt;a href=&quot;http:&#x2F;&#x2F;smallcultfollowing.com&#x2F;babysteps&#x2F;blog&#x2F;2019&#x2F;09&#x2F;11&#x2F;aic-shepherds-3-0&#x2F;&quot;&gt;&amp;quot;shepherded items&amp;quot;&lt;&#x2F;a&gt; that the lang team is
tracking, along with weekly updates on the latest developments.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;const-eval&quot;&gt;const-eval&lt;&#x2F;a&gt;
&lt;ul&gt;
&lt;li&gt;there is progress towards extending the set of expressions
permitted in constants to include &lt;code&gt;&amp;amp;mut&lt;&#x2F;code&gt; borrows, if&#x2F;match, and
loops.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;project-ffi-unwind&quot;&gt;project-ffi-unwind&lt;&#x2F;a&gt;
&lt;ul&gt;
&lt;li&gt;current status: currently evaluating whether &amp;quot;C&amp;quot; functions should 
permit unwinding by default&lt;&#x2F;li&gt;
&lt;li&gt;trying to get measurements of the impact on code size&lt;&#x2F;li&gt;
&lt;li&gt;prototyped the plan in a rustc branch, but needs a few updates and to be executed
on a representative code base (likely Fuschia)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;57893&quot;&gt;Coherence can be bypassed by an indirect impl for a trait object&lt;&#x2F;a&gt;
&lt;ul&gt;
&lt;li&gt;did a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;66037#issuecomment-549575983&quot;&gt;crater run of the proposal&lt;&#x2F;a&gt; but have only partially analyzed the impact&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;grammar working group — qmx
&lt;ul&gt;
&lt;li&gt;no updates this week&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;!&lt;&#x2F;code&gt; type and fallback — centril
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;play.rust-lang.org&#x2F;?version=nightly&amp;amp;mode=debug&amp;amp;edition=2018&amp;amp;gist=a16420f41bbd2496ed07c75cf048189e&quot;&gt;&lt;code&gt;!&lt;&#x2F;code&gt; is stable on nightly!&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;about-the-lang-team-meetings&quot;&gt;About the lang-team meetings&lt;&#x2F;h2&gt;
&lt;p&gt;The lang-team triage meetings are held weekly on Zoom (see our
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;#meeting-calendar&quot;&gt;meeting calendar&lt;&#x2F;a&gt;). Anyone is welcome to come and observe. We make a
&amp;quot;best effort&amp;quot; to record the meetings though technical issues sometimes
intervene.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Upcoming compiler-team design meetings</title>
            <pubDate>Fri, 22 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-upcoming-compiler-team-design-meetings/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-upcoming-compiler-team-design-meetings/</guid>
            <description>&lt;p&gt;In our &lt;a href=&quot;https:&#x2F;&#x2F;zulip-archive.rust-lang.org&#x2F;131828tcompiler&#x2F;03407planningmeeting20191122.html&quot;&gt;planning meeting today&lt;&#x2F;a&gt;, the &lt;a href=&quot;https:&#x2F;&#x2F;www.rust-lang.org&#x2F;governance&#x2F;teams&#x2F;compiler&quot;&gt;compiler team&lt;&#x2F;a&gt; has scheduled our
next batch of upcoming design meetings. You can find the exact times
on the compiler team&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;#meeting-calendar&quot;&gt;meeting calendar&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;On Nov 29 (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=MjM3aGsxdXY0dHBybXBxZ3ZxOGp1ZjdicjEgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;), we will discuss
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;213&quot;&gt;rust-lang&#x2F;compiler-team#213&lt;&#x2F;a&gt;, a proposal to extend rustc&#x27;s data
structures to enable outside crates to experiment with building a
Rust REPL.&lt;&#x2F;li&gt;
&lt;li&gt;On Dec 6 (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=MTByaTZsZG1pZGI1Y2RqdGZ1cHV2djNncTEgNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;), we will discuss
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;175&quot;&gt;rust-lang&#x2F;compiler-team#175&lt;&#x2F;a&gt;, which is a plan to modify the
&lt;code&gt;rustc_interface&lt;&#x2F;code&gt; trait to enable end-to-end query support in the
compiler.&lt;&#x2F;li&gt;
&lt;li&gt;On Dec 13 (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=MGxrb2p2cG9lNGFnYTIybWVtcGRoZzdjdmogNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;), we will discuss
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;222&quot;&gt;rust-lang&#x2F;compiler-team#222&lt;&#x2F;a&gt;, which is a roadmap and strategy for
eventually merging rustc, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-analyzer&#x2F;rust-analyzer&#x2F;&quot;&gt;rust-analyzer&lt;&#x2F;a&gt;, and the RLS into one
coherent set of projects.&lt;&#x2F;li&gt;
&lt;li&gt;On Dec 20 (&lt;a href=&quot;https:&#x2F;&#x2F;calendar.google.com&#x2F;event?action=TEMPLATE&amp;amp;tmeid=MW12ZWI4NW9zZ2s2dHRkbW5wbjdjMG43Zm8gNnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZw&amp;amp;tmsrc=6u5rrtce6lrtv07pfi3damgjus%40group.calendar.google.com&quot;&gt;calendar event&lt;&#x2F;a&gt;), we will discuss
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;209&quot;&gt;rust-lang&#x2F;compiler-team#209&lt;&#x2F;a&gt;, which is a proposal to create a
&amp;quot;major changes process&amp;quot; for the compiler, to augment these design
meetings.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;did-you-know&quot;&gt;Did you know?&lt;&#x2F;h3&gt;
&lt;p&gt;Most weeks, the compiler team has some sort of design meeting. These
meetings take place on Zulip and are open to all. Every 4 weeks, we do
a planning meeting to pick the next few meetings from the list of open
proposals. You can find &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;about&#x2F;steering-meeting&#x2F;&quot;&gt;more details about how the compiler-team
steering meeting process here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-11-14 Compiler Team Triage Meeting</title>
            <pubDate>Tue, 19 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-third-compiler-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-third-compiler-team-meeting/</guid>
            <description>&lt;p&gt;The compiler team had our weekly triage meeting on 2019-11-14.
You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;triage-meeting&#x2F;2019-11-14&#x2F;&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&quot;&gt;compiler-team&lt;&#x2F;a&gt; repository.
Each week, we have general announcements from the team followed by check-ins from two of the compiler team working groups.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Request for assistance: &amp;quot;Rustc panics (NoSolution): could not prove Binder(projection soup)&amp;quot; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;65581&quot;&gt;#65581&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Request for assistance: &amp;quot;Rust 1.38 regressions weren&#x27;t fully triaged&amp;quot; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;65577&quot;&gt;#65577&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Request for assistance: &amp;quot;Miscompilation with target-cpu=znver1 (AMD Ryzen 1000&#x2F;2000 series) on Windows + LLVM 9.&amp;quot; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;63959&quot;&gt;#63959&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;cjgillot&quot;&gt;@cjgillot&lt;&#x2F;a&gt; replaced a lot of TypeFoldable impls with a derive &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;66384&quot;&gt;#66384&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The Infra team has finished evaluating GitHub Actions and we&#x27;re switching!&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;This will have a signficant, positive impact on CI build time.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;centril&quot;&gt;@centril&lt;&#x2F;a&gt; is fixing useless &lt;code&gt;&amp;lt;std macros&amp;gt;&lt;&#x2F;code&gt; spans &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;66364&quot;&gt;#66364&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;working-group-sync&quot;&gt;Working group sync&lt;&#x2F;h2&gt;
&lt;p&gt;This week we heard from three working groups because we ran out of time in the previous meeting.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wg-polonius&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;polonius&#x2F;&quot;&gt;wg-polonius&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Made a lot of progress on the completeness goals with move&#x2F;initialization errors and subset errors both getting close to completion.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Fixed the last failure in the rustc test suite.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;There are still the same 2 OOMs as last time, we haven&#x27;t had much time to look at those yet.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Made diagnostics output match NLL in a lot more cases.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Did some cleanup in our terminology by picking better names for our atoms hopefully making it clearer in the process, and more work is planned here.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;quot;origin&amp;quot; instead of &amp;quot;region&amp;quot;&lt;&#x2F;li&gt;
&lt;li&gt;&amp;quot;path&amp;quot; instead of &amp;quot;MovePath&amp;quot;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;There is a &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;polonius&#x2F;&quot;&gt;polonius book&lt;&#x2F;a&gt; now! It&#x27;s sparse at the moment but more documentation work is in-flight and planned.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The exploration and prototype on the rules offering more flow-sensitive precision for the analysis has also progressed a lot.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;There&#x27;s also been some refactoring, and quite a bit of work on performance. Since the latter can step on the other work and vice-versa, we decided to focus on completeness first, and then after that has been achieved, re-adapt and land the optimization work.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nikomatsakis&quot;&gt;@nikomatsakis&lt;&#x2F;a&gt; did a presentation on Polonius at RustBelt Rust. &lt;a href=&quot;https:&#x2F;&#x2F;nikomatsakis.github.io&#x2F;rust-belt-rust-2019&#x2F;&quot;&gt;Slides&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;albins&quot;&gt;@albins&lt;&#x2F;a&gt; has finished their master&#x27;s thesis and is currently rewriting most of the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;user_uploads&#x2F;4715&#x2F;ufu5BGNrkzVbV8FtkK3Tco6M&#x2F;Albins-Thesis-draft-version.pdf&quot;&gt;draft&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;We hope to have a &amp;quot;polonius work week&amp;quot; at the end of November to push the in-progress work over the finish line together.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;wg-self-profile&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;self-profile&#x2F;&quot;&gt;wg-self-profile&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;We&#x27;ve nearly completed our long standing MVP goal!&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mark-simulacrum&quot;&gt;@simulacrum&lt;&#x2F;a&gt; has done some nice work to polish the integration with perf.rlo&lt;&#x2F;li&gt;
&lt;li&gt;We&#x27;ve added tracking for all the events we&#x27;re aware of that should be traced with the exception of trait selection.
&lt;ul&gt;
&lt;li&gt;We could really use some input as to what would be helpful to track!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;michaelwoerister&quot;&gt;@mw&lt;&#x2F;a&gt; has been working on some changes to the binary format we record events in.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The new format is more compact so results in a smaller trace file and hopefully less runtime overhead.&lt;&#x2F;li&gt;
&lt;li&gt;The new format is also more amenable to recording query keys, which is a highly requested feature.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&quot;&gt;@wesleywiser&lt;&#x2F;a&gt; has added some crate level docs to make getting into the code easier.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&quot;&gt;@wesleywiser&lt;&#x2F;a&gt; also added code to record process id, start time, and arguments to the trace file which we&#x27;ve started using.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;andjo403&quot;&gt;@andjo403&lt;&#x2F;a&gt; has been a roll with a lot of great PRs!&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;We now have a dedicated tool for generating flamegraphs directly so you don&#x27;t have to use the Perl scripts anymore.&lt;&#x2F;li&gt;
&lt;li&gt;Some internal refactoring that makes adding new tools easier.&lt;&#x2F;li&gt;
&lt;li&gt;Lots of work on the Chromium dev tools exporter:
&lt;ul&gt;
&lt;li&gt;New option to collapse disjoint threads so it&#x27;s a little more manageable&lt;&#x2F;li&gt;
&lt;li&gt;New option to filter out small events under a configurable threshold (necessary for very large compilations)&lt;&#x2F;li&gt;
&lt;li&gt;You can now have multiple crate compilations in the same export file. This is similar to what cargo build -Z timings can do but much more detailed.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;wg-rls-2-0&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;rls-2.0&#x2F;&quot;&gt;wg-rls-2.0&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Work is procedding on splitting core of rust-analyzer into crates.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Find usages is implemented.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Macro expansion now can map source ranges to expanded ranges, so goto def correctly goes &amp;quot;inside&amp;quot; macro call.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;More chalk an type inference work, specifically, support for closures.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;There&#x27;s ongoing discussion about the general planning about rustc, rls, and rust-analyzer.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>2019-11-19 Infrastructure Team Meeting</title>
            <pubDate>Tue, 19 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-third-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-third-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by pietroalbini. Minutes written by pietroalbini.&lt;br &#x2F;&gt;
Attending: alexcrichton, kennytm, Mark-Simulacrum, pietroalbini, shepmaster&lt;br &#x2F;&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;discordapp.com&#x2F;channels&#x2F;442252698964721669&#x2F;443148319431065610&#x2F;646409370095190016&quot;&gt;Start of the conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;migrating-crates-io-behind-cloudfront&quot;&gt;Migrating crates.io behind CloudFront&lt;&#x2F;h2&gt;
&lt;p&gt;While static.crates.io (hosting the source code of all the published crates) is
behind CloudFront, that’s not true today for the crates.io web application.
This causes problems because crates.io is hosted on Heroku, which requires
pointing a CNAME to Heroku’s DNS. Unfortunately crates.io doesn’t use a
subdomain, which prevents us from using CNAMEs. All our DNS zones are on AWS
Route53, but AWS only supports CNAMEs on the apex pointing to other AWS
resources. Because of that, the crates.io DNS was managed on a different
service until today, causing maintenance issues on our end.&lt;&#x2F;p&gt;
&lt;p&gt;The solution we’re working torwards is to put CloudFront in front of crates.io,
and that will finally allow us to migrate the crates.io domain to AWS.
pietroalbini is finishing the last infra touches, and we expect to deploy the
changes in the coming days.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;dns-management-with-terraform&quot;&gt;DNS management with Terraform&lt;&#x2F;h2&gt;
&lt;p&gt;pietroalbini announced to the rest of the team that he started working on
migrating the DNS records of our domains to Terraform. He already migrated the
zones of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;simpleinfra&#x2F;blob&#x2F;master&#x2F;terraform&#x2F;services&#x2F;dns&#x2F;cratesio.com.tf&quot;&gt;cratesio.com&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;simpleinfra&#x2F;blob&#x2F;master&#x2F;terraform&#x2F;services&#x2F;dns&#x2F;crates.io.tf&quot;&gt;crates.io&lt;&#x2F;a&gt;, and he plans to migrate the other ones
over the coming weeks. pietroalbini also wrote &lt;a href=&quot;https:&#x2F;&#x2F;forge.rust-lang.org&#x2F;infra&#x2F;docs&#x2F;dns.html&quot;&gt;documentation&lt;&#x2F;a&gt; on this setup.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;another-github-actions-ci-configuration-prototype&quot;&gt;Another GitHub Actions CI configuration prototype&lt;&#x2F;h2&gt;
&lt;p&gt;pietroalbini continued his investigation into another prototype for our new
GitHub Actions configuration. To reiterate, GitHub Actions doesn’t support
templates or includes, so the infrastructure team is looking into a way to
reduce duplication between our pipelines.&lt;&#x2F;p&gt;
&lt;p&gt;Since the two prototypes presented at last week’s meeting weren’t liked by all
the team, pietroalbini continued experimenting, and the prototype presented
this week was based around YAML anchors, a standard YAML feature to reuse parts
of data inside a single file. Unfortunately GitHub Actions explicitly disables
YAML anchors, so pietroalbini wrote a small tool that pre-generates the
expanded configuration file and commits it into the repo.&lt;&#x2F;p&gt;
&lt;p&gt;The team liked this approach much more, as it doesn’t introduce any new
configuration syntax while keeping the configuration files in a manageable
state. pietroalbini is going to polish the prototype and open a PR for it in
the coming days.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-11-12 Infrastructure Team Meeting</title>
            <pubDate>Mon, 18 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-second-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-second-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by pietroalbini. Minutes written by pietroalbini.
Attending: alexcrichton, kennytm, Mark-Simulacrum, pietroalbini, sgrif, shepmaster
&lt;a href=&quot;https:&#x2F;&#x2F;discordapp.com&#x2F;channels&#x2F;442252698964721669&#x2F;443148319431065610&#x2F;643872655312683018&quot;&gt;Start of the conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;rust-1-14-0-cargo-artifacts-on-the-rust-lang-ci-s3-bucket&quot;&gt;Rust 1.14.0 Cargo artifacts on the rust-lang-ci S3 bucket&lt;&#x2F;h2&gt;
&lt;p&gt;Following on last meeting’s topics, pietroalbini investigated whether it would
be possible to redirect requests for Cargo 1.14.0 from the &lt;code&gt;rust-lang-ci&lt;&#x2F;code&gt; S3
bucket to our CDN. The answer is no, as the S3 support for redirects requires a
different endpoint than the one included in the manifest. The two main courses
of action were to do nothing (keeping the files in the &lt;code&gt;rust-lang-ci&lt;&#x2F;code&gt; S3 bucket),
or to rewrite and resign the manifest of Rust 1.14.0 to point to the CDN.&lt;&#x2F;p&gt;
&lt;p&gt;Mark-Simulacrum was in favor of doing nothing, but pietroalbini pointed out
keeping releases in two different places will make mirroring and caching
efforts more complex, as mirror authors will have to special-case a separate
domain just for a release. We then decided to rewrite and resign the manifest.&lt;&#x2F;p&gt;
&lt;p&gt;shepmaster proposed to add a test somewhere to ensure this doesn’t happen
again, but nobody on the team had the time to do this. If someone is interested
please ask in the infra channel.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;deduplicating-ci-configuration-on-github-actions&quot;&gt;Deduplicating CI configuration on GitHub Actions&lt;&#x2F;h2&gt;
&lt;p&gt;One issue about GitHub Actions is it doesn’t allow to include shared pieces of
configuration into workflows, forcing us to duplicate (for example) the steps
needed to complete a build. pietroalbini investigated a few ways to work around
the limitation, and the options he presented during the meeting are either
writing our own configuration format and having a tool generate the GitHub
Actions configuration from it, or duplicating the configuration manually and
having a tool to ensure the manually duplicated things don’t diverge.&lt;&#x2F;p&gt;
&lt;p&gt;The rest of the team expressed concerns with generating the configuration, as
using the generator adds even more complexity to our already complex CI. On the
other hand pietroalbini didn’t like the tool to ensure the configuration
doesn’t diverge, as that would make changes to the CI configuration harder for
the people doing it. The agreement in the meeting is that pietroalbini will try
to create other proof of concepts, hoping to find a better solution.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-server-for-perf&quot;&gt;New server for perf&lt;&#x2F;h2&gt;
&lt;p&gt;alexcrichton didn’t hear back from Hetzner about the new perf server yet.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Evaluating GitHub Actions</title>
            <pubDate>Thu, 14 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/evaluating-github-actions/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/evaluating-github-actions/</guid>
            <description>&lt;p&gt;The Rust Infrastructure team is happy to announce that we’re starting an
evaluation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;features&#x2F;actions&quot;&gt;GitHub Actions&lt;&#x2F;a&gt; as a
replacement for Azure Pipelines as the CI provider of the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&quot;&gt;rust-lang&#x2F;rust&lt;&#x2F;a&gt; repository.&lt;&#x2F;p&gt;
&lt;p&gt;We’ve been part of the beta of GitHub Actions since the beginning, following
its development closely and testing it on a lot of smaller repositories in our
organization, and we’re really satisfied so far with the product. GitHub
Actions provides most of the features we love about Azure Pipelines, while
being integrated with GitHub’s UI, permissions and workflows.&lt;&#x2F;p&gt;
&lt;p&gt;GitHub has also offered to sponsor a dedicated pool of builders with increased
resources. Our extensive but time-consuming CI is one of the major pain points
for compiler contributors, and the additional resources have the potential to
drastically improve our developers’ experience. We have achieved 60% faster
builds in preliminary testing thanks to the increased core count in the
dedicated builder pool, and there is still large room to parallelize and finish
builds even faster.&lt;&#x2F;p&gt;
&lt;p&gt;Our plan is to start running GitHub Actions in parallel with Azure Pipelines in
the next few weeks, and we’ll keep the community updated as we learn more.&lt;&#x2F;p&gt;
&lt;p&gt;+++&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;[Update]&lt;&#x2F;strong&gt; Some members of the community asked why we&#x27;re considering to
switch away from Azure Pipelines so soon after migrating to it. We want to
reaffirm that we&#x27;re happy with Pipelines as a product, but both Microsoft and
GitHub asked us to try GitHub Actions because it&#x27;s more closely integrated into
the GitHub workflow that we already use. After we used it for a while in other
repositories we were satisfied enough to start evaluating a migration for
rustc&#x27;s CI.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Governance WG Call For Participation</title>
            <pubDate>Wed, 13 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/goverance-wg-cfp/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/goverance-wg-cfp/</guid>
            <description>&lt;p&gt;Hello everyone, the governance working group has been working a few efforts, but
we haven&#x27;t made as much progress as we would have liked over the past few
months, so we are going to try out a new process and meeting agenda aimed at
trying to get more work done in the time we know we have.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-meeting-structure&quot;&gt;New Meeting Structure&lt;&#x2F;h2&gt;
&lt;p&gt;Previously we have been doing most of our work async while using our bi-weekly
meeting call to triage tasks. The problem we ran into with this is that a lot of
the members also heavy contributors to the Rust project as a whole, and it can
be can hard for some people to schedule time write an initial draft.&lt;&#x2F;p&gt;
&lt;p&gt;To address this instead of triaging during the meeting and working on tasks in
async, we&#x27;re going to hold focused topic based meetings, and use the time between
meetings, to publish posts like this and to research and prepare for the next
topic. To help do this we&#x27;re going to extend our current meeting duration from
30 minutes to an hour. (The meeting will still be every two weeks.)&lt;&#x2F;p&gt;
&lt;p&gt;The current goals are to documenting the de-facto governance structure, provide
the result as a RFC and then if merged provide a version on
&lt;a href=&quot;https:&#x2F;&#x2F;forge.rust-lang.org&#x2F;&quot;&gt;forge.rust-lang.org&lt;&#x2F;a&gt; so that it has greater visbility. We also want to
schedule people involved in Rust and other governance structures to come and
talk about their experiences.&lt;&#x2F;p&gt;
&lt;p&gt;For deciding what topics, we&#x27;re going to rotate who takes the lead for each
meeting. It&#x27;s that person&#x27;s responsibility to decide the topic and to
prepare a call for participation similar to this post informing people of
the topic and how they might best prepare if they wish to join.&lt;&#x2F;p&gt;
&lt;p&gt;We also hope that having a focused topic will reduce any barrier of expected
knowledge in order to participate and contribute. With that said let&#x27;s talk
about the topic for next meeting.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;reviewing-examining-previous-governance-rfcs&quot;&gt;Reviewing &amp;amp; Examining Previous Governance RFCs&lt;&#x2F;h2&gt;
&lt;p&gt;Our first topic for new meeting is going to be to read &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;1068-rust-governance.html&quot;&gt;RFC 1068&lt;&#x2F;a&gt;, the
original Rust Governance RFC, review how accurate it is to today&#x27;s structure,
and see any if there are questions that we have that it doesn&#x27;t answer. Here
are some other relevant RFCs for additional context:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rfcs&#x2F;blob&#x2F;26197104b7bb9a5a35db243d639aee6e46d35d75&#x2F;text&#x2F;1728-north-star.md&quot;&gt;&amp;quot;North Star&amp;quot; RFC&lt;&#x2F;a&gt; lays out the Rust roadmap process.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;2689-compiler-team-contributors.html&quot;&gt;Compiler contributors RFC&lt;&#x2F;a&gt; details the process of contributing to the
compiler and progression towards joining the compiler team.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;1589-rustc-bug-fix-procedure.html&quot;&gt;Compiler bug fix procedure&lt;&#x2F;a&gt; defines the best practices for making a bug fix
to the compiler.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Our next meeting is going to be at &lt;strong&gt;22:00 UTC on Tuesday, November 19th&lt;&#x2F;strong&gt;
and we&#x27;d like to encourage anyone who&#x27;s interested, regardless of their
previous experience to read those RFCs and come to the &lt;code&gt;#wg-governance&lt;&#x2F;code&gt;
channel on discord to attend the meeting. (Our meetings are done over a video
call with Zoom, but we use the discord channel to organise ourselves).&lt;&#x2F;p&gt;
&lt;p&gt;If some reason you know you won&#x27;t be able to attend these meetings but would
still like to participate. Please feel free to post any questions about Rust&#x27;s
governance as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-governance&#x2F;issues?q=is%3Aissue+is%3Aopen+label%3AQuestion&quot;&gt;issues on our GitHub repository&lt;&#x2F;a&gt;, even if you are 
not available to attend the working group&#x27;s meetings.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-11-07 Compiler Team Triage Meeting</title>
            <pubDate>Mon, 11 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-second-compiler-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-second-compiler-team-meeting/</guid>
            <description>&lt;p&gt;The compiler team had our weekly triage meeting on 2019-11-07.
You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;triage-meeting&#x2F;2019-11-07&#x2F;&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&quot;&gt;compiler-team&lt;&#x2F;a&gt; repository.
Each week, we have general announcements from the team followed by check-ins from two of the compiler team working groups.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pnkfelix&quot;&gt;@pnkfelix&lt;&#x2F;a&gt; is moving to the US and will be working in the Eastern timezone.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&quot;&gt;@wesleywiser&lt;&#x2F;a&gt; has been working on the constant propagation pass and wants to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;66074&quot;&gt;turn it on&lt;&#x2F;a&gt; for debug &amp;amp; release builds to improve compilation time.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Rust 1.39 has shipped with &lt;code&gt;async&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;await&lt;&#x2F;code&gt; support and other goodies.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;working-group-sync&quot;&gt;Working group sync&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;wg-polonius&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;polonius&#x2F;&quot;&gt;wg-polonius&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;We ran out of time this week to have a check-in from this working group.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wg-rfc-2229&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;rfc-2229&#x2F;&quot;&gt;wg-rfc-2229&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;This working group is currently on a pause.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-10-31 Compiler Team Triage Meeting</title>
            <pubDate>Thu, 07 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-first-compiler-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-first-compiler-team-meeting/</guid>
            <description>&lt;p&gt;The compiler team had our weekly triage meeting on 2019-10-31.
You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;triage-meeting&#x2F;2019-10-31&#x2F;&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&quot;&gt;compiler-team&lt;&#x2F;a&gt; repository.
Each week, we have general announcements from the team followed by check-ins from two of the compiler team working groups.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;2019-10-31&quot;&gt;2019-10-31&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;announcments&quot;&gt;Announcments&lt;&#x2F;h2&gt;
&lt;p&gt;Rust 1.39 ships on Thursday!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;working-group-sync&quot;&gt;Working group sync&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;wg-pgo&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;pgo&#x2F;&quot;&gt;wg-pgo&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;PGO is available in the stable compiler. Docs are in the &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc-dev-guide&lt;&#x2F;a&gt; and the &lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustc&#x2F;index.html&quot;&gt;rustc-book&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Unfortunately we don&#x27;t observe significant performance gains from applying it (except for tiny synthetic test cases).&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;michaelwoerister&quot;&gt;@michaelwoerister&lt;&#x2F;a&gt; asked for people to try PGO on irlo but haven&#x27;t gotten a lot of feedback.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;There is one interesting theory that Rust doesn&#x27;t profit as much as C++ because it defaults to having fewer compilation units and thus can make better inlining decisions in the non-PGO case.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The working group will probably wind down as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;michaelwoerister&quot;&gt;@michaelwoerister&lt;&#x2F;a&gt; don&#x27;t have time to pursue further and there are no actual known issues in the implementation.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-31.20.2354818&#x2F;near&#x2F;179539153&quot;&gt;Link to full discussion&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wg-pipelining&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;pipelining&#x2F;&quot;&gt;wg-pipelining&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Pipelining support has shipped in Rust 1.38.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The working group is winding down.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-31.20.2354818&#x2F;near&#x2F;179539371&quot;&gt;Link to full discussion&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-11-05 Infrastructure Team Meeting</title>
            <pubDate>Wed, 06 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-first-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/nov-2019-first-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by shepmaster. Minutes written by pietroalbini.&lt;br &#x2F;&gt;
Attending: aidanhs, alexcrichton, kennytm, Mark-Simulacrum, pietroalbini, shepmaster&lt;br &#x2F;&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;discordapp.com&#x2F;channels&#x2F;442252698964721669&#x2F;443148319431065610&#x2F;641335927721033732&quot;&gt;Start of the conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;removing-msys2-ca-certificates-workaround-p-high-issue&quot;&gt;Removing MSYS2 ca-certificates workaround (P-high issue)&lt;&#x2F;h2&gt;
&lt;p&gt;A few weeks ago our CI broke due to a broken &lt;code&gt;ca-certificates&lt;&#x2F;code&gt; MSYS2 package,
which caused all Windows builders to fail. The temporary patch was to install a
vendored copy of that package, and since it’s not needed anymore pietroalbini
landed a PR this week removing the hack from our CI configuration.&lt;&#x2F;p&gt;
&lt;p&gt;The other part of the issue is figuring out whether to vendor MSYS2 and MinGW
as a whole, but there is the issue of keeping the mirrors sort of up to date,
and we don’t have a clear idea on how to fix that at the moment. We decided to
downgrade the issue to P-medium and to talk about mirroring and vendoring at
the All Hands 2020. In preparation of that meeting it will be useful to audit
what we mirror at the moment and how old that is, but it’s not urgent and
nobody has the time to work on it right now.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;figuring-out-data-retention-on-azure-pipelines-p-medium-issue&quot;&gt;Figuring out data retention on Azure Pipelines (P-medium issue)&lt;&#x2F;h2&gt;
&lt;p&gt;This is not yet an issue, as the current retention is configured to 2 years.
We’re waiting on some talks with Microsoft to settle before starting to poke
people about this again.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;re-enable-llvm-debug-assertions-on-slow-builders-p-medium-issue&quot;&gt;Re-enable LLVM&#x2F;debug assertions on slow builders (P-medium issue)&lt;&#x2F;h2&gt;
&lt;p&gt;We still don’t have the time budget to enable them back, but increasing the
core count should allow us to do that.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-server-for-perf&quot;&gt;New server for perf&lt;&#x2F;h2&gt;
&lt;p&gt;alexcrichton ordered an
&lt;a href=&quot;https:&#x2F;&#x2F;www.hetzner.com&#x2F;dedicated-rootserver&#x2F;ax41-nvme&quot;&gt;AX41-NVMe&lt;&#x2F;a&gt; bare metal
server from Hetzner as a replacement benchmarking machine for perf, paid by
Mozilla. We’re waiting on Hetzner to give us access to it before simulacrum can
try it out and configure it. If we don’t get access in a few days alexcrichton
is going to ping them.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;lifecycle-policy-for-static-rust-lang-org&quot;&gt;Lifecycle policy for static.rust-lang.org&lt;&#x2F;h2&gt;
&lt;p&gt;static.rust-lang.org is backed by a S3 bucket, and since 2016 versioning is
enabled on the bucket to prevent issues with accidental file deletions. Some of
the files in that bucket are overridden each day though (for example nightly
compilers), keeping a bunch of past versions stored. Those past versions are
useless as there isn’t an easy way to get them from the CDN, and the files are
also stored separately in other places on that bucket. Everyone agreed we
should enable lifecycle policy to delete those useless files, and we reached a
consensus on deleting them after three months. This won’t be noticeable by end
users, installing old nightlies by date will still work.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-to-do-with-the-rust-lang-ci-s3-bucket&quot;&gt;What to do with the rust-lang-ci S3 bucket&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;code&gt;rust-lang-ci&lt;&#x2F;code&gt; is a really old and currently unused S3 bucket which was used to
store CI artifacts before we migrated them to &lt;code&gt;rust-lang-ci2&lt;&#x2F;code&gt;. There are still
some files in there, so we enabled bucket logging for a month to see how
frequent files there were accessed.&lt;&#x2F;p&gt;
&lt;p&gt;Turns out, we had a total of 86 successful requests in a month, split between:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;69 requests were accessing cargo builds of 1.14.0&lt;&#x2F;li&gt;
&lt;li&gt;17 requests were accessing old CI mirrors&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Due to the low traffic we decided to remove those old CI mirrors, but for the
cargo builds the question is more complicated. Due to a bug in the manifest
generation back then, installing Rust 1.14.0 from rustup actually downloads
Cargo from the bucket instead of the CDN, and removing those files would
permanently break installing Rust 1.14.0. There was disagreement on whether to
do that inside the team, and we reached the decision to wait until pietroalbini
investigates whether redirects are feasible to configure in S3.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;early-feedback-on-pietroalbini-s-wip-ci-generate-branch&quot;&gt;Early feedback on pietroalbini’s WIP ci-generate branch&lt;&#x2F;h2&gt;
&lt;p&gt;pietroalbini is working on a branch that implements a generator for our CI
configuration, from a simplified custom DSL
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pietroalbini&#x2F;rust&#x2F;tree&#x2F;ci-generate&quot;&gt;branch&lt;&#x2F;a&gt; -
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pietroalbini&#x2F;rust&#x2F;tree&#x2F;ci-generate&#x2F;src&#x2F;tools&#x2F;generate-ci-config&quot;&gt;documentation&lt;&#x2F;a&gt;).
While the generator has a number of small benefits for us, the main driver
between the creation of the branch is to work around some limitations in GitHub
Actions’s configuration syntax, namely the lack of importable templates. There
wasn’t time to properly discuss this so we deferred to next week.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;revisiting-meeting-run-rotation&quot;&gt;Revisiting meeting run rotation&lt;&#x2F;h2&gt;
&lt;p&gt;A month ago we started rotating who runs the meetings, intending to revisit the
decision today. The team felt either neutral or positive about the idea, so
we’ll keep doing that for a while. aidanhs is going to run the next meeting.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Clippy is removing its plugin interface</title>
            <pubDate>Mon, 04 Nov 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/clippy-removes-plugin-interface/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/clippy-removes-plugin-interface/</guid>
            <description>&lt;p&gt;Today, we&#x27;re announcing that Clippy will completely remove its plugin interface.
Using the plugin interface has been deprecated for about one and a half year now
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust-clippy&#x2F;pull&#x2F;2712&quot;&gt;rust-lang&#x2F;rust-clippy#2712&lt;&#x2F;a&gt;). Since then, an unsilenceable warning has been
emitted. Now that compiler plugins are officially deprecated
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;64675&quot;&gt;rust-lang&#x2F;rust#64675&lt;&#x2F;a&gt;), Clippy will remove its support for the plugin
interface completely (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust-clippy&#x2F;pull&#x2F;4714&quot;&gt;rust-lang&#x2F;rust-clippy#4714&lt;&#x2F;a&gt;). This change will hit stable
with version 1.41.0.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;does-this-post-affect-me&quot;&gt;Does this post affect me?&lt;&#x2F;h3&gt;
&lt;p&gt;Most likely, no. This post only affects you, if you&#x27;re still using Clippy
through its plugin interface. If you do so, you get the warning&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;warning: the clippy plugin is being deprecated, please use cargo clippy or rls with the clippy feature
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;when compiling your crate. If you don&#x27;t see this warning, nothing will change
for you.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;how-do-i-migrate-from-the-plugin-interface&quot;&gt;How do I migrate from the plugin interface?&lt;&#x2F;h3&gt;
&lt;p&gt;If you are still using the Clippy plugin interface, here are some steps you can
take to migrate to &lt;code&gt;cargo clippy&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Cargo.toml&lt;&#x2F;code&gt;: Remove every occurrence of the &lt;code&gt;clippy&lt;&#x2F;code&gt; dependency and the
&lt;code&gt;clippy&lt;&#x2F;code&gt; feature.&lt;&#x2F;li&gt;
&lt;li&gt;Completely remove every occurrence of &lt;code&gt;feature(plugin)&lt;&#x2F;code&gt; and &lt;code&gt;plugin(clippy)&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Replace every occurrence of &lt;code&gt;feature = &amp;quot;clippy&amp;quot;&lt;&#x2F;code&gt; with &lt;code&gt;feature = &amp;quot;cargo-clippy&amp;quot;&lt;&#x2F;code&gt;. The &lt;code&gt;cargo-clippy&lt;&#x2F;code&gt; feature is automatically enabled when
running &lt;code&gt;cargo clippy&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;CI: You now have to install Clippy via rustup, with &lt;code&gt;rustup component add clippy&lt;&#x2F;code&gt;. Once installed, you can run &lt;code&gt;cargo clippy&lt;&#x2F;code&gt; (for more usage
instructions, see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust-clippy#usage&quot;&gt;Clippy &lt;code&gt;README&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;). Note that Clippy is not included in
every nightly, but you can check its availability on the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rustup-components-history&#x2F;index.html&quot;&gt;rustup components
history&lt;&#x2F;a&gt; page.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;where-should-i-go-if-i-have-more-questions&quot;&gt;Where should I go if I have more questions?&lt;&#x2F;h3&gt;
&lt;p&gt;If you need help with migrating from the plugin interface, you can contact us
via &lt;a href=&quot;https:&#x2F;&#x2F;discord.gg&#x2F;vNNtpyD&quot;&gt;Discord&lt;&#x2F;a&gt; or open an issue on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust-clippy&#x2F;issues&#x2F;new&quot;&gt;GitHub&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-10-24 Compiler Team Triage Meeting</title>
            <pubDate>Wed, 30 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-third-compiler-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-third-compiler-team-meeting/</guid>
            <description>&lt;p&gt;The compiler team had our weekly triage meeting on 2019-10-24.
You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;triage-meeting&#x2F;2019-10-24&#x2F;&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&quot;&gt;compiler-team&lt;&#x2F;a&gt; repository.
Each week, we have general announcements from the team followed by check-ins from two fo the compiler team working groups.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcments&quot;&gt;Announcments&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Mark-Simulacrum&quot;&gt;@simulacrum&lt;&#x2F;a&gt; landed the rust-std split PR which decreases the size of the rustc-dev rustup component &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;65474&quot;&gt;#65474&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;working-group-sync&quot;&gt;Working group sync&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;wg-nll&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;nll&#x2F;&quot;&gt;wg-nll&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Rust 1.40 (current nightly) will be the first stable release without the HIR borrow checker.
This means Non Lexical Lifetimes will be available on Rust 2015.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;At this point, wg-nll has completed its purpose and will be disbanded.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;wg-polonius is still going strong though!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-24.20.2354818&#x2F;near&#x2F;178960111&quot;&gt;Link to full discussion&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wg-parallel-rustc&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;parallel-rustc&#x2F;&quot;&gt;wg-parallel-rustc&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Work is proceeding slowly but steadily.
There are regular triage meetings every Monday on the compiler calendar.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The current goal is to refactor&#x2F;audit compiler locks and other parts of the parallel query system and to investigate improving performance.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The current MVP is to do high-level parallelization in a few critical places such as typechecking &amp;amp; linting.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Currently, we&#x27;re not seeing the speedups we want from parallelization but work is ongoing to remove locking and improve the jobserver integration.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;lVjW0Nw8N_g&quot;&gt;Video recording of last meeting&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-24.20.2354818&#x2F;near&#x2F;178960379&quot;&gt;Link to full discussion&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-10-29 Infrastructure Team Meeting</title>
            <pubDate>Tue, 29 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-third-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-third-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by Mark-Simulacrum. Minutes written by pietroalbini.&lt;br &#x2F;&gt;
Attending: alexcrichton, kennytm, Mark-Simulacrum, pietroalbini, shepmaster&lt;br &#x2F;&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;discordapp.com&#x2F;channels&#x2F;442252698964721669&#x2F;443148319431065610&#x2F;638784152014946321&quot;&gt;Start of the conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;news-from-the-team&quot;&gt;News from the team&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A big PR moving most of the CI build environment preparation to standalone
scripts finally landed! This will allow multiple other CI improvements down
the line!&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;A crates.io staging environment behind CloudFront has been configured on
&lt;a href=&quot;https:&#x2F;&#x2F;staging.cratesio.com&quot;&gt;staging.cratesio.com&lt;&#x2F;a&gt;, testing the
configuration before deploying it on the main domain. Please note the staging
server is on a temporary domain and will be moved in the near future.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;rolling-back-the-msys2-hack-p-high-issue&quot;&gt;Rolling back the msys2 hack (P-high issue)&lt;&#x2F;h2&gt;
&lt;p&gt;Last week there was an issue in our CI caused by a broken &lt;code&gt;ca-certificates&lt;&#x2F;code&gt;
msys2 package, that caused all the windows builders to fail. To patch the
problem an older version of that package was vendored and CI was configured to
download it instead of the broken one. Now that upstream fixed the issue,
pietroalbini will prepare PRs targeting both master and beta rolling back the
temporary patch.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-to-do-with-mirroring-msys2-mingw&quot;&gt;What to do with mirroring msys2&#x2F;mingw?&lt;&#x2F;h2&gt;
&lt;p&gt;The CI issue mentioned in the previous topic started thoughts about vendoring
msys2 and MinGW as a whole, to prevent such issues from happening in the
future. msys2 is a weird program to package as it’s more of a Linux-like
distribution on Windows, with its own package manager based on tooling borrowed
from Arch Linux.&lt;&#x2F;p&gt;
&lt;p&gt;Creating the initial mirrors is not trivial but doable, but the concern is how
to keep them updated, because for example an outdated OpenSSL is really bad.
mati865 suggested that other projects often tar the whole msys2 installation
directory and periodically update that, and we’ll explore that. More discussion
on the approach will likely happen on the PR implementing the changes.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;restricted-aws-access-for-docs-rs-operators&quot;&gt;Restricted AWS access for docs.rs operators&lt;&#x2F;h2&gt;
&lt;p&gt;One of the issues exposed in the &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;inside-rust&#x2F;2019&#x2F;10&#x2F;24&#x2F;docsrs-outage-postmortem.html&quot;&gt;docs.rs outage postmortem&lt;&#x2F;a&gt; was that
the people in the docs.rs on-call rotation did not have access to the AWS
resources part of docs.rs. pietroalbini proposed to give them limited access,
namely to stop&#x2F;start the EC2 instance and to inspect&#x2F;change the underlying S3
storage bucket. Mark-Simulacrum thought the access was not needed in practice,
and we agreed to revisit the topic if issues arise again.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-server-for-perf&quot;&gt;New server for perf&lt;&#x2F;h2&gt;
&lt;p&gt;To ensure consistent results the collector for &lt;a href=&quot;https:&#x2F;&#x2F;perf.rust-lang.org&quot;&gt;perf.rust-lang.org&lt;&#x2F;a&gt; needs to be
on bare metal hardware, and until now it was a server lying under
alexcrichton’s desk. The server will have to be moved by December though, and
alexcrichton asked the team on feedback on what to do. There was consensus that
the best solution is to look for a rented bare metal server, and pietroalbini
will do an initial investigation.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>The Rustc Learning Working Group - An Introduction</title>
            <pubDate>Mon, 28 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/rustc-learning-working-group-introduction/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/rustc-learning-working-group-introduction/</guid>
            <description>&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;tree&#x2F;master&#x2F;content&#x2F;working-groups&#x2F;learning&quot;&gt;Learning Working Group&lt;&#x2F;a&gt;, formed in April 2019, is focused on making the
compiler easier to learn by ensuring that &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc-dev-guide&lt;&#x2F;a&gt; and API docs are
&amp;quot;complete&amp;quot;. It is one of the many efforts by the Rust Compiler team to
decrease the barrier of contributing to the compiler. As noted on the WG’s
homepage —&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;This working group aims to accomplish the following:&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Ensure that major components of rustc are covered in rustc-dev-guide&lt;&#x2F;em&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;Ensure that API doc coverage is at least 90%&lt;&#x2F;em&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The Learning Group is making entry to contribute easier by improving the
compiler documentation for the new and potential contributors. We all know
this bias — the more time we’ve spent in a system, the less likely we are to
see the issues that the newcomers might face. Given that, this group
organically became an attractive place for beginners, who would benefit
from documenting the compiler internals, while learning those parts of it
at the same time. This benefits the entire compiler team by giving the
documentation a perspective from the new contributors.&lt;&#x2F;p&gt;
&lt;p&gt;The Learning group, in general, is starting to document the
“Compiler lecture series”, which are a list of Youtube video lectures
given earlier by the more knowledgeable members of the compiler team.
There is also the task of improving the documentation structure of
&lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc-dev-guide&lt;&#x2F;a&gt;. At first, each member used to pick a video lecture by
themselves and contribute via a Github pull request to the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&quot;&gt;rustc-dev-guide Github repository&lt;&#x2F;a&gt;. This proved to be a bit difficult
for the following reasons —&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Not all members would get to watch and work on the lectures of
their choice.&lt;&#x2F;li&gt;
&lt;li&gt;The knowledge would still be fragmented depending on who watched
which lecture.&lt;&#x2F;li&gt;
&lt;li&gt;Some lectures are more interesting than others and this means that
some contributors would miss out on the interesting ones.&lt;&#x2F;li&gt;
&lt;li&gt;Certain lectures are more difficult and require input from multiple
people.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Hence, at the moment, the group decided to work on one video at a time.
This has proven to be beneficial for the entire group, especially with
the lecture &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=c01TsOsr3-c&quot;&gt;Representing types in rustc&lt;&#x2F;a&gt;. At the time of this writing,
it is still a work-in-progress but the input from everyone allows people
to work together while benefiting from the questions that everyone has
about the lecture.&lt;&#x2F;p&gt;
&lt;p&gt;The group is still learning about the best possible ways to organize and
manage and some compiler team veterans are always there to help out!
We are always in need of help from both existing compiler contributors
and new folks who want to contribute and learn.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;call-for-participation&quot;&gt;Call for participation&lt;&#x2F;h2&gt;
&lt;p&gt;There is no bar to entry in the group. To join the group, you can
drop a message in &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;196385-t-compiler.2Fwg-learning&quot;&gt;&lt;code&gt;#t-compiler&#x2F;wg-learning&lt;&#x2F;code&gt; on Zulip&lt;&#x2F;a&gt; introducing
yourself. We would love to hear from you and hope we all together
can make the documentation better.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;important-resources&quot;&gt;Important  resources&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;tree&#x2F;master&#x2F;content&#x2F;working-groups&#x2F;learning&quot;&gt;Learning Working Group&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;Rustc Dev Guide Book&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&quot;&gt;Rustc Dev Guide Repository&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustc-dev-guide&#x2F;projects&#x2F;2&quot;&gt;Github Project (Kanban)&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;tree&#x2F;master&#x2F;content&#x2F;working-groups&#x2F;learning&#x2F;minutes&quot;&gt;Learning WG Meeting Minutes&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCaYhcUwRBNscFNUKTjgPFiA&#x2F;playlists&quot;&gt;Rust Youtube Videos&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt; &lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;196385-t-compiler.2Fwg-learning&quot;&gt;Zulip Stream: &lt;code&gt;#t-compiler&#x2F;wg-learning&lt;&#x2F;code&gt; on Zulip&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>Planning meeting update</title>
            <pubDate>Fri, 25 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/planning-meeting-update/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/planning-meeting-update/</guid>
            <description>&lt;p&gt;In our planning meeting today, the compiler team has scheduled our
next batch of upcoming design meetings:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;On Nov 1, we will discuss &amp;quot;incremental dep-graph storage&amp;quot; (see
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;199&quot;&gt;rust-lang&#x2F;compiler-team#199&lt;&#x2F;a&gt;), which is a plan to improve the
performance of storing incremental compilation data, as well as
reducing peak memory usage.&lt;&#x2F;li&gt;
&lt;li&gt;On Nov 8, we will discuss &amp;quot;A unified framework for dataflow
analysis&amp;quot; (see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;202&quot;&gt;rust-lang&#x2F;compiler-team#202&lt;&#x2F;a&gt;), which is a proposal
for how an improved dataflow analysis that can help with const
evaluation.&lt;&#x2F;li&gt;
&lt;li&gt;On Nov 15, we will do a &amp;quot;working group review&amp;quot; (see
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;187&quot;&gt;rust-lang&#x2F;compiler-team#187&lt;&#x2F;a&gt;), examining how well the working group
system has been working and what we might do to improve it.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;did-you-know&quot;&gt;Did you know?&lt;&#x2F;h3&gt;
&lt;p&gt;Most weeks, the compiler team has some sort of design meeting. These
meetings take place on Zulip and are open to all. Every 4 weeks, we do
a planning meeting to pick the next few meetings from the list of open
proposals. You can find &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;about&#x2F;steering-meeting&#x2F;&quot;&gt;more details about how the compiler-team
steering meeting process here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>docs.rs outage postmortem</title>
            <pubDate>Thu, 24 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/docsrs-outage-postmortem/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/docsrs-outage-postmortem/</guid>
            <description>&lt;p&gt;At 2019-10-21 01:38 UTC the docs.rs website went down because no available disk
space was left on the server hosting the application. Crate builds were failing
since 2019-10-20 00:55 UTC due to the same reason.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;root-cause-of-the-outage&quot;&gt;Root cause of the outage&lt;&#x2F;h2&gt;
&lt;p&gt;docs.rs needs to store the built documentation on the filesystem before
uploading it to the database, and it does so in the
&lt;code&gt;&#x2F;opt&#x2F;docs-rs-prefix&#x2F;documentations&lt;&#x2F;code&gt; directory. docs.rs never cleared that
directory though, so over time it started to increase its size until it caused
this outage. Code to periodically purge temporary directories was present, but
it was never configured to purge the one which caused the outage.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;resolution&quot;&gt;Resolution&lt;&#x2F;h2&gt;
&lt;p&gt;As the directory doesn’t contain any persistent data we cleared it and the web
server was restarted. Once we were confident the situation was resolved all the
crates that failed due to the outage were queued for a rebuild.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;postmortem&quot;&gt;Postmortem&lt;&#x2F;h2&gt;
&lt;p&gt;The increased disk usage was gradual over weeks, slowly reaching 100% and
causing the outage. While monitoring systems were in place and recorded graphs
of the increase, no alert was configured so nobody noticed the problem. We need
to add alerts when disk usage reaches 90%, so the problem can be investigated
and dealt with on time.&lt;&#x2F;p&gt;
&lt;p&gt;Crates started to fail to build a day earlier, and close to no builds were
successfully completed since then. We need to setup alerts when most of the
builds are failing: as we don’t have the necessary metrics at the moment to
reliably alert we&#x27;ll have to add extra instrumentation as well.&lt;&#x2F;p&gt;
&lt;p&gt;Our response was slower due to issues with our on-call rotation for the
service. The primary contacts don’t have the level of access required to
increase the disk space of the instance (the temporary fix that was
investigated at first but discarded after the discovery nobody awake could do
it), and the backup contacts don’t have any production access or expertise on
docs.rs.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;timeline-of-events&quot;&gt;Timeline of events&lt;&#x2F;h2&gt;
&lt;p&gt;Unless otherwise noted all events happened on 2019-10-21, and all times are in
UTC.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2019-10-20 00:55: crate builds started failing due to the low disk space&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;01:38: alerts fired for the docs.rs website being down, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ashleygwilliams&quot;&gt;ashleygwilliams&lt;&#x2F;a&gt;
(backup contact) got paged&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;01:39: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;QuietMisdreavus&quot;&gt;QuietMisdreavus&lt;&#x2F;a&gt; joins into the operations channel&lt;&#x2F;li&gt;
&lt;li&gt;01:39: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;QuietMisdreavus&quot;&gt;QuietMisdreavus&lt;&#x2F;a&gt; found the reason for the outage (full root partition)&lt;&#x2F;li&gt;
&lt;li&gt;01:52: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ashleygwilliams&quot;&gt;ashleygwilliams&lt;&#x2F;a&gt; proposed to increase disk space, nobody with
permissions required to so was awake or available though&lt;&#x2F;li&gt;
&lt;li&gt;01:56: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ashleygwilliams&quot;&gt;ashleygwilliams&lt;&#x2F;a&gt; contacts &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Mark-Simulacrum&quot;&gt;Mark-Simulacrum&lt;&#x2F;a&gt;, who has the access
required to increase disk space&lt;&#x2F;li&gt;
&lt;li&gt;01:57: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;QuietMisdreavus&quot;&gt;QuietMisdreavus&lt;&#x2F;a&gt; found the directory taking up all the disk space&lt;&#x2F;li&gt;
&lt;li&gt;02:00: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;QuietMisdreavus&quot;&gt;QuietMisdreavus&lt;&#x2F;a&gt; removed the directory taking up all the disk space&lt;&#x2F;li&gt;
&lt;li&gt;02:03: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;QuietMisdreavus&quot;&gt;QuietMisdreavus&lt;&#x2F;a&gt; restarted the web server&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;02:06: CDN propagated the changes, docs.rs back online&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;02:06: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Mark-Simulacrum&quot;&gt;Mark-Simulacrum&lt;&#x2F;a&gt; joins into the operations channel&lt;&#x2F;li&gt;
&lt;li&gt;08:19: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pietroalbini&quot;&gt;pietroalbini&lt;&#x2F;a&gt; added builds failed during the outage back into the
queue&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;19:27: builds of the crates failed during the outage finished&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;action-items&quot;&gt;Action items&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update the docs.rs source code to cleanup the offending directory
automatically.&lt;&#x2F;li&gt;
&lt;li&gt;Add alerts when the available disk space on a server is below 10%.&lt;&#x2F;li&gt;
&lt;li&gt;Add alerts when most of the builds are failing.&lt;&#x2F;li&gt;
&lt;li&gt;Revisit the on-call rotation to make sure everyone on it has the
permissions to either react to the incidents or escalate.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>Please welcome pnkfelix as compiler team co-lead!</title>
            <pubDate>Thu, 24 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/pnkfelix-compiler-team-co-lead/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/pnkfelix-compiler-team-co-lead/</guid>
            <description>&lt;p&gt;I&#x27;m happy to announce that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pnkfelix&quot;&gt;pnkfelix&lt;&#x2F;a&gt; will be joining me as compiler
team co-lead. Felix was a &amp;quot;founding member&amp;quot; of the compiler team when
it first started, and was involved with Rust long before that. For the
last year or so, he&#x27;s been taking over an increasingly large share of
&amp;quot;compiler team leadership&amp;quot;, including running the weekly triage
meeting and generally tending to the quality of the compiler as a
whole. So many thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pnkfelix&quot;&gt;pnkfelix&lt;&#x2F;a&gt; for all that he does, and
congratulations! 🎉&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Announcing the LLVM ICE-breaker group</title>
            <pubDate>Tue, 22 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/llvm-ice-breakers/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/llvm-ice-breakers/</guid>
            <description>&lt;p&gt;Today I&#x27;m announcing a new experiment in the compiler team, the &lt;strong&gt;LLVM ICE-breaker group&lt;&#x2F;strong&gt;. If you&#x27;re familiar with LLVM and would like to contribute to rustc -- but without taking on a large commitment -- then the LLVM ICE-breaker group might well be for you!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;what-is-the-llvm-ice-breaker-group&quot;&gt;What is the LLVM ICE-breaker group?&lt;&#x2F;h3&gt;
&lt;p&gt;At its heart, the LLVM ICE-breaker group is just a list of people who would like to be notified when we come across LLVM bugs. You can add yourself to this list very easily -- just &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;about.html#join&quot;&gt;open a PR&lt;&#x2F;a&gt;! When we come across a suitable bug, we&#x27;ll write a message that &lt;code&gt;@&lt;&#x2F;code&gt;-mentions every Github user on that list. If you have some time, maybe you can fix one of them, or at least offer some words of wisdom to help somebody else figure out what&#x27;s going on.&lt;&#x2F;p&gt;
&lt;p&gt;There are a few other things associated with the group too, however. For example, we&#x27;ve got a &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;llvm.html&quot;&gt;guide&lt;&#x2F;a&gt; that offers some tips for how to fix LLVM-related bugs and may help you get started (particularly if you&#x27;re not that familiar with rustc).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;what-kind-of-bugs-are-we-talking-about&quot;&gt;What kind of bugs are we talking about?&lt;&#x2F;h3&gt;
&lt;p&gt;The goal is to identify &amp;quot;self-contained&amp;quot; bugs that are unlikely to require large-scale compiler refactorings or to get entangled in other big projects.&lt;&#x2F;p&gt;
&lt;p&gt;As Rust developers triage bugs and tag them for the ICE-breakers,
they will &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;about.html#tagging-an-issue-for-an-ice-breaker-group&quot;&gt;ping&lt;&#x2F;a&gt; the group on Github.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;who-should-join&quot;&gt;Who should join?&lt;&#x2F;h3&gt;
&lt;p&gt;This group is a great fit for anyone who is familiar with LLVM and who would like to learn more about Rust or to get more involved in the Rust project. Even if you don&#x27;t have time to open PRs against rustc, there are many other ways to help:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;identifying open LLVM bugs that we may be running into;&lt;&#x2F;li&gt;
&lt;li&gt;reducing Rust sources to minimal reducers;&lt;&#x2F;li&gt;
&lt;li&gt;reducing LLVM IR to minimal problem cases;&lt;&#x2F;li&gt;
&lt;li&gt;and so forth.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;(For that matter, feel free to join the group even if you&#x27;re &lt;em&gt;not&lt;&#x2F;em&gt; all that familiar with LLVM -- no better way to learn!)&lt;&#x2F;p&gt;
&lt;h3 id=&quot;what-s-with-the-name-ice-breaker-anyway&quot;&gt;What&#x27;s with the name ICE-breaker anyway?&lt;&#x2F;h3&gt;
&lt;p&gt;An &amp;quot;ICE&amp;quot; is an &amp;quot;internal compiler error&amp;quot;. It actually refers specifically to the case where the compiler panics (which tends to be an easy sort of bug to fix). In fact, very few LLVM bugs cause real ICEs, but the name was too good to pass up.&lt;&#x2F;p&gt;
&lt;p&gt;But of course we also hope that these ICE-breaker groups can help people to get more acquainted with hacking on rustc; to &lt;a href=&quot;https:&#x2F;&#x2F;en.wiktionary.org&#x2F;wiki&#x2F;break_the_ice&quot;&gt;&amp;quot;break the ice&amp;quot;&lt;&#x2F;a&gt;, if you will (ha! I kill me).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;will-there-be-more-ice-breaker-groups&quot;&gt;Will there be more ICE-breaker groups?&lt;&#x2F;h3&gt;
&lt;p&gt;I certainly hope so! As I mentioned before, this is an experiment, but presuming that it works out well we fully intend to create more ICE-breaker groups.&lt;&#x2F;p&gt;
&lt;p&gt;The current list of ICE-breaker groups is documented in the
&lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;about.html&quot;&gt;rustc development guide&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;so-how-do-i-sign-up-again&quot;&gt;So how do I sign up again?&lt;&#x2F;h3&gt;
&lt;p&gt;Easy! Just &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;about.html#join&quot;&gt;open a PR&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-10-22 Infrastructure Team Meeting</title>
            <pubDate>Tue, 22 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-second-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-second-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by pietroalbini. Mintues written by pietroalbini.&lt;br &#x2F;&gt;
Attending: aidanhs, alexcrichton, kennytm, Mark-Simulacrum, pietroalbini,
shepmaster&lt;br &#x2F;&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;discordapp.com&#x2F;channels&#x2F;442252698964721669&#x2F;443148319431065610&#x2F;636247640794857472&quot;&gt;Start of the conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;news-from-the-team&quot;&gt;News from the team&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;All the AWS resources related to the bastion are now managed with Terraform.
The documentation on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;infra-team&#x2F;blob&#x2F;master&#x2F;docs&#x2F;hosts&#x2F;bastion.md#updating-the-whitelisted-ips&quot;&gt;how to add whitelisted IPs&lt;&#x2F;a&gt; has
also been updated.&lt;&#x2F;li&gt;
&lt;li&gt;Crater agents are now deployed with Ansible, and the related AWS resources
are now managed with Terraform. Agents are configured to check for updates
every 5 minutes.&lt;&#x2F;li&gt;
&lt;li&gt;There was an outage of docs.rs on Sunday night, the postmortem is going to be
published soon on the &amp;quot;Inside Rust&amp;quot; blog and work on the action items from it
is ongoing.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;putting-a-cdn-in-front-of-the-ci-s3-buckets-pietroalbini&quot;&gt;Putting a CDN in front of the CI S3 buckets (pietroalbini)&lt;&#x2F;h2&gt;
&lt;p&gt;After an audit of our bandwidth usage for the &lt;code&gt;rust-lang-ci-sccache2&lt;&#x2F;code&gt; and
&lt;code&gt;rust-lang-ci-mirrors&lt;&#x2F;code&gt; S3 buckets we discovered CI is pulling respectively 8.3
TB and 1.4 TB from them each month. Egress from S3 is pricey (0.09$&#x2F;GB), while
for us egress from CloudFront is way cheaper (0.04$&#x2F;month, as across all of our
distributions we transfer out more than 150 TB each month). Putting CloudFront
in front of them is going to save us an estimate of 485$&#x2F;month.&lt;&#x2F;p&gt;
&lt;p&gt;Thankfully all the data in those buckets is immutable (mirrors are versioned
and all caches are addressed by hash), so there are not going to be any
problems due to cache invalidation. Sccache doesn’t support querying a CDN yet
but aidanhs is going to write some pointers and pietroalbini is going to do the
implementation work. The caches CDN is also going to query a new
&lt;code&gt;rust-lang-ci-caches&lt;&#x2F;code&gt; bucket, to avoid the old naming scheme.&lt;&#x2F;p&gt;
&lt;p&gt;pietroalbini already setup
&lt;a href=&quot;https:&#x2F;&#x2F;ci-mirrors.rust-lang.org&quot;&gt;ci-mirrors.rust-lang.org&lt;&#x2F;a&gt;, and is going to
do the implementation work to both create a CDN distribution for caches and
switch the CI to query the CDN.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;moving-infra-documentation-to-the-forge-pietroalbini&quot;&gt;Moving infra documentation to the forge (pietroalbini)&lt;&#x2F;h2&gt;
&lt;p&gt;There is an effort in the project to centralize all the internal documentation
&lt;a href=&quot;https:&#x2F;&#x2F;forge.rust-lang.org&quot;&gt;on the forge&lt;&#x2F;a&gt;. pietroalbini proposed to move all
the infra team documentation to it. Everyone agreed, as we find value in having
everything reachable in a single place. aidanhs pointed out that meeting
minutes should not be migrated on the forge.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;next-meeting-time&quot;&gt;Next meeting time&lt;&#x2F;h2&gt;
&lt;p&gt;Europe will switch DST next week, so the next meeting will be at -1 hours for
europeans and at the same time for everyone else on the team.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-10-17 Compiler Team Triage Meeting</title>
            <pubDate>Mon, 21 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-second-compiler-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-second-compiler-team-meeting/</guid>
            <description>&lt;p&gt;The compiler team had our weekly triage meeting on 2019-10-17.
You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;triage-meeting&#x2F;2019-10-17&#x2F;&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&quot;&gt;compiler-team&lt;&#x2F;a&gt; repository.
Each week, we have general announcements from the team followed by check-ins from two of the compiler team working groups.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Design meeting on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&#x2F;issues&#x2F;186&quot;&gt;debuginfo strategy&lt;&#x2F;a&gt; tomorrow (2019-10-18) on Zulip.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;design.20meeting.202019-10-18&#x2F;near&#x2F;178476377&quot;&gt;Link to full meeting&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The traits working group had a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;wg-traits&#x2F;tree&#x2F;master&#x2F;minutes&quot;&gt;design meeting&lt;&#x2F;a&gt; yesterday on lazy normalization.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nikomatsakis&quot;&gt;@nikomatsakis&lt;&#x2F;a&gt; has been looking into lazy normalization specifically for constants and hopes to have some notes to share soon.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The LLVM ICE-breakers working group is nearly ready to go live.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;spastorino&quot;&gt;@spastorino&lt;&#x2F;a&gt; has nearly finished interning &lt;code&gt;Place&lt;&#x2F;code&gt; projections which is an incremental step to MIR 2.0.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;centril&quot;&gt;@centril&lt;&#x2F;a&gt; is continuing to work on splitting &lt;code&gt;libsyntax&lt;&#x2F;code&gt; apart which will decrease the amount of code &lt;code&gt;librustc&lt;&#x2F;code&gt; depends on.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;working-group-sync&quot;&gt;Working group sync&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;wg-mir-opt&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;mir-opt&#x2F;&quot;&gt;wg-mir-opt&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&quot;&gt;@wesleywiser&lt;&#x2F;a&gt; Moved promoted MIR out of &lt;code&gt;mir::Body&lt;&#x2F;code&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;63580&quot;&gt;#63580&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;wesleywiser&quot;&gt;@wesleywiser&lt;&#x2F;a&gt; Reimplemented the &lt;code&gt;ConstProp&lt;&#x2F;code&gt; optimization pass on top of the existing const eval code &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;64419&quot;&gt;#64419&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;spastorino&quot;&gt;@spastorino&lt;&#x2F;a&gt; Converted &lt;code&gt;mir::Place&lt;&#x2F;code&gt; to no longer be a recursive data structure &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;63420&quot;&gt;#63420&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;There is ongoing work in both const prop and place refactorings.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;We&#x27;ve figured out a plan for &amp;quot;weird&amp;quot; place projections like dereferences (virtual locals).&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-17.20.2354818&#x2F;near&#x2F;178389131&quot;&gt;Link to full conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wg-meta&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;meta&#x2F;&quot;&gt;wg-meta&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;inside-rust&#x2F;index.html&quot;&gt;Inside Rust&lt;&#x2F;a&gt; blog has launched.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;about.html&quot;&gt;ICE-Breaker group&lt;&#x2F;a&gt; has been formed!&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;ice-breaker&#x2F;llvm.html&quot;&gt;LLVM ICE-Breaker group&lt;&#x2F;a&gt; is also being formed.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-17.20.2354818&#x2F;near&#x2F;178389266&quot;&gt;Link to full conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Please welcome ecstatic-morse to compiler-contributors</title>
            <pubDate>Thu, 17 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/ecstatic-morse-for-compiler-contributors/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/ecstatic-morse-for-compiler-contributors/</guid>
            <description>&lt;p&gt;Please welcome &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ecstatic-morse&quot;&gt;@ecstatic-morse&lt;&#x2F;a&gt; to the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rfcs&#x2F;2689-compiler-team-contributors.html&quot;&gt;compiler contributors&lt;&#x2F;a&gt; group!
They&#x27;re working to make compile-time evaluation more expressive by
enabling &lt;code&gt;if&lt;&#x2F;code&gt;, &lt;code&gt;match&lt;&#x2F;code&gt; and other control flow in constants. As one of
their first major contributions, they implemented a dataflow analysis
to validate the bodies of &lt;code&gt;const&lt;&#x2F;code&gt;s and &lt;code&gt;const fn&lt;&#x2F;code&gt;s
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;64470&quot;&gt;rust-lang&#x2F;rust#64470&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;Congratulations &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ecstatic-morse&quot;&gt;@ecstatic-morse&lt;&#x2F;a&gt;, and thanks!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>2019-10-10 Infrastructure Team Meeting</title>
            <pubDate>Tue, 15 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-first-infra-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-first-infra-team-meeting/</guid>
            <description>&lt;p&gt;Meeting run by kennytm. Minutes written by pietroalbini.&lt;br &#x2F;&gt;
Attending: alexcrichton, kennytm, Mark-Simulacrum, pietroalbini, sgrif,
shepmaster&lt;br &#x2F;&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;discordapp.com&#x2F;channels&#x2F;442252698964721669&#x2F;443148319431065610&#x2F;633710764762464285&quot;&gt;Start of the conversation&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;publishing-the-meeting-minutes-pietroalbini&quot;&gt;Publishing the meeting minutes (pietroalbini)&lt;&#x2F;h2&gt;
&lt;p&gt;The infrastructure team recently started keeping minutes of the meetings (these
ones!), recording everything we decided and what the rationale of the decision
was. The original minutes are stored in a private Paper document, as they also
contain minutes of the private parts of the meetings.&lt;&#x2F;p&gt;
&lt;p&gt;pietroalbini proposed to store a public version of the minutes (with the
private parts removed) on the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;infra-team&quot;&gt;infra-team&lt;&#x2F;a&gt; repository, and to
cross-post them on the &lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;inside-rust&quot;&gt;“Inside Rust”&lt;&#x2F;a&gt;
blog. The rest of the team agreed on this. pietroalbini also volunteered to
make the work of writing the minutes and publishing them.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;binary-signing-and-the-signpath-offer-pietroalbini&quot;&gt;Binary signing and the SignPath offer (pietroalbini)&lt;&#x2F;h2&gt;
&lt;p&gt;A few weeks ago the team received an email from SignPath offering code signing
certificates and infrastructure to the Rust project. The main concern team
members had was the lack of time to implement the changes on our end, as
everyone is busy with other tasks. Everyone agreed to revisit the topic and
their offer once someone inside the team has time to drive the implementation
effort.&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Improving async-await&#x27;s &quot;Future is not Send&quot; diagnostic</title>
            <pubDate>Fri, 11 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/asyncawait-not-send-error-improvements/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/asyncawait-not-send-error-improvements/</guid>
            <description>&lt;p&gt;Async-await is due to hit stable in the 1.39 release (only a month away!), and as announced in the
&lt;a href=&quot;https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;inside-rust&#x2F;2019&#x2F;10&#x2F;07&#x2F;AsyncAwait-WG-Focus-Issues.html&quot;&gt;&amp;quot;Async Foundations Update: Time for polish!&amp;quot;&lt;&#x2F;a&gt; post last month, the Async
Foundations WG has shifted its focus to polish. This post will highlight one aspect of that
focus, diagnostic improvements, and in particular, the improvements that the working group has
been making to the once-unhelpful &amp;quot;future is not send&amp;quot; diagnostic.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;why-doesn-t-my-future-implement-send&quot;&gt;Why doesn&#x27;t my future implement &lt;code&gt;Send&lt;&#x2F;code&gt;?&lt;&#x2F;h1&gt;
&lt;p&gt;One of the major places where async-await should be a pleasure to use is in multithreaded contexts,
where having a future that can be sent to other threads is desirable. This might look something
like the following (for brevity, there aren&#x27;t any threads here, just a requirement that the
future implement &lt;code&gt;std::marker::Send&lt;&#x2F;code&gt;):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;use &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;std::sync::{Mutex, MutexGuard};

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;is_send&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;lt;T: Send&amp;gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;t&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: T) { }

async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&amp;amp;Mutex::new(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;22&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;)).await
}

async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &amp;amp;Mutex&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;) {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; g = x.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;lock&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;unwrap&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;();
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;baz&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().await
}

async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;baz&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() { }

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;is_send&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;());
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When we try to compile this, we&#x27;ll get an unwieldly and hard-to-follow diagnostic:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;error[E0277]: `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;` cannot be sent between threads safely
  --&amp;gt; src&#x2F;main.rs:23:5
   |
23 |     is_send(foo());
   |     ^^^^^^^ `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;` cannot be sent between threads safely
   |
   = help: within `impl std::future::Future`, the trait `std::marker::Send` is not implemented for `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;`
   = note: required because it appears within the type `for&amp;lt;&amp;#39;r, &amp;#39;s&amp;gt; {&amp;amp;&amp;#39;r std::sync::Mutex&amp;lt;u32&amp;gt;, std::sync::MutexGuard&amp;lt;&amp;#39;s, u32&amp;gt;, impl std::future::Future, ()}`
   = note: required because it appears within the type `[static generator@src&#x2F;main.rs:13:30: 16:2 x:&amp;amp;std::sync::Mutex&amp;lt;u32&amp;gt; for&amp;lt;&amp;#39;r, &amp;#39;s&amp;gt; {&amp;amp;&amp;#39;r std::sync::Mutex&amp;lt;u32&amp;gt;, std::sync::MutexGuard&amp;lt;&amp;#39;s, u32&amp;gt;, impl std::future::Future, ()}]`
   = note: required because it appears within the type `std::future::GenFuture&amp;lt;[static generator@src&#x2F;main.rs:13:30: 16:2 x:&amp;amp;std::sync::Mutex&amp;lt;u32&amp;gt; for&amp;lt;&amp;#39;r, &amp;#39;s&amp;gt; {&amp;amp;&amp;#39;r std::sync::Mutex&amp;lt;u32&amp;gt;, std::sync::MutexGuard&amp;lt;&amp;#39;s, u32&amp;gt;, impl std::future::Future, ()}]&amp;gt;`
   = note: required because it appears within the type `impl std::future::Future`
   = note: required because it appears within the type `impl std::future::Future`
   = note: required because it appears within the type `for&amp;lt;&amp;#39;r&amp;gt; {impl std::future::Future, ()}`
   = note: required because it appears within the type `[static generator@src&#x2F;main.rs:9:16: 11:2 for&amp;lt;&amp;#39;r&amp;gt; {impl std::future::Future, ()}]`
   = note: required because it appears within the type `std::future::GenFuture&amp;lt;[static generator@src&#x2F;main.rs:9:16: 11:2 for&amp;lt;&amp;#39;r&amp;gt; {impl std::future::Future, ()}]&amp;gt;`
   = note: required because it appears within the type `impl std::future::Future`
   = note: required because it appears within the type `impl std::future::Future`
note: required by `is_send`
  --&amp;gt; src&#x2F;main.rs:5:1
   |
5  | fn is_send&amp;lt;T: Send&amp;gt;(t: T) {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That&#x27;s.. not great. Let&#x27;s break down what&#x27;s happening and understand what this error is trying to
tell us.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;is_send&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;());
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In &lt;code&gt;main&lt;&#x2F;code&gt;, we are calling &lt;code&gt;foo&lt;&#x2F;code&gt; and passing the return value to &lt;code&gt;is_send&lt;&#x2F;code&gt;. &lt;code&gt;foo&lt;&#x2F;code&gt; is an &lt;code&gt;async fn&lt;&#x2F;code&gt;,
so it doesn&#x27;t return &lt;code&gt;()&lt;&#x2F;code&gt; (what you might expect for a function with no return type specified).
Instead, it returns &lt;code&gt;impl std::future::Future&amp;lt;Output = ()&amp;gt;&lt;&#x2F;code&gt;, some unnamed type that implements
&lt;code&gt;std::future::Future&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&amp;amp;Mutex::new(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;22&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;)).await
}

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; becomes...

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() -&amp;gt; impl std::future::Future&amp;lt;Output = ()&amp;gt; {
    async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;move &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;{
        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&amp;amp;Mutex::new(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;22&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;)).await
    }
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you want to learn more about the transformations that happen with async-await, consider
reading the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;async-book&#x2F;01_getting_started&#x2F;04_async_await_primer.html&quot;&gt;&lt;code&gt;async&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;.await&lt;&#x2F;code&gt; primer chapter of the async book&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;is_send&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;lt;T: Send&amp;gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;t&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: T) { }
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It looks like the error we&#x27;re getting is because the future returned by &lt;code&gt;foo&lt;&#x2F;code&gt; doesn&#x27;t satisfy
the &lt;code&gt;T: Send&lt;&#x2F;code&gt; bound of &lt;code&gt;is_send&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;how-are-async-functions-implemented&quot;&gt;How are async functions implemented?&lt;&#x2F;h2&gt;
&lt;p&gt;To explain why our future doesn&#x27;t implement &lt;code&gt;Send&lt;&#x2F;code&gt;, we first need to understand a little bit more
about what async-await is doing under the hood. rustc implements &lt;code&gt;async fn&lt;&#x2F;code&gt;s using generators,
an unstable language feature for resumable functions like the co-routines you might be familiar
with from other languages. Generators are laid out like enums with variants containing all of the
variables that are used across await points (which desugar to generator yields):&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &amp;amp;Mutex&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;) {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; g = x.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;lock&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;unwrap&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;();
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;baz&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; &amp;lt;- await point (suspend #0), `g` and `x` are in use before await point
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;} &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; &amp;lt;- `g` and `x` dropped here, after await point
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#b48ead;&quot;&gt;enum &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;BarGenerator {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; `bar`&amp;#39;s parameters.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;    Unresumed { x: &amp;amp;Mutex&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt; },

    Suspend0 {
        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Future returned by `baz`, which is being polled.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;        baz_future: BazGenerator,

        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Locals that are used across the await point.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;        x: &amp;amp;Mutex&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;,
        g: MutexGuard&amp;lt;&amp;#39;_, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;,
    },

    Returned { value: () }
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you want to learn more about the &lt;code&gt;async fn&lt;&#x2F;code&gt; implementation details, then Tyler Mandry has
written &lt;a href=&quot;https:&#x2F;&#x2F;tmandry.gitlab.io&#x2F;blog&#x2F;posts&#x2F;optimizing-await-1&#x2F;&quot;&gt;an excellent blog post&lt;&#x2F;a&gt; diving into their work here in more depth which is
definitely worth a read.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;so-why-doesn-t-my-future-implement-send&quot;&gt;So, why doesn&#x27;t my future implement &lt;code&gt;Send&lt;&#x2F;code&gt;?&lt;&#x2F;h2&gt;
&lt;p&gt;We now know that an &lt;code&gt;async fn&lt;&#x2F;code&gt; is represented like an enum behind-the-scenes. In synchronous Rust,
you&#x27;ll be used to your types automatically implementing &lt;code&gt;Send&lt;&#x2F;code&gt; when the
&lt;a href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;std&#x2F;marker&#x2F;trait.Send.html&quot;&gt;compiler determines it&#x27;s appropriate&lt;&#x2F;a&gt; - typically when all of the fields of your type
also implement &lt;code&gt;Send&lt;&#x2F;code&gt;. It follows that the enum-like that represents our &lt;code&gt;async fn&lt;&#x2F;code&gt; would
implement &lt;code&gt;Send&lt;&#x2F;code&gt; if all of the types in it do.&lt;&#x2F;p&gt;
&lt;p&gt;In other words, a future is safe to send across threads if all of the types that are held across
&lt;code&gt;.await&lt;&#x2F;code&gt; points implement &lt;code&gt;Send&lt;&#x2F;code&gt;. This behaviour is useful because it lets us write generic code
that interoperates smoothly with async-await, but without diagnostic support we get confusing error
messages.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;well-which-type-is-the-problem-in-the-example&quot;&gt;Well, which type is the problem in the example?&lt;&#x2F;h2&gt;
&lt;p&gt;Returning to our example, the future must be holding a type across an &lt;code&gt;.await&lt;&#x2F;code&gt; point that doesn&#x27;t
implement &lt;code&gt;Send&lt;&#x2F;code&gt;, but where? This is the primary question that the diagnostic improvement aims to
help answer. Let&#x27;s start by looking at &lt;code&gt;foo&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;() {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&amp;amp;Mutex::new(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;22&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;)).await
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;foo&lt;&#x2F;code&gt; invokes &lt;code&gt;bar&lt;&#x2F;code&gt;, passing a reference to a &lt;code&gt;std::sync::Mutex&lt;&#x2F;code&gt; and getting a future back, before
&lt;code&gt;await&lt;&#x2F;code&gt;ing it.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;async &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;fn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;: &amp;amp;Mutex&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt;) {
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; g: MutexGuard&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;u32&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;gt; = x.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;lock&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;unwrap&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;();
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;baz&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;().await
} &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; &amp;lt;- `g` is dropped here
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;bar&lt;&#x2F;code&gt; locks the mutex before &lt;code&gt;await&lt;&#x2F;code&gt;ing &lt;code&gt;baz&lt;&#x2F;code&gt;. &lt;code&gt;std::sync::MutexGuard&amp;lt;u32&amp;gt;&lt;&#x2F;code&gt; does not implement
&lt;code&gt;Send&lt;&#x2F;code&gt; and lives across the &lt;code&gt;baz().await&lt;&#x2F;code&gt; point (because &lt;code&gt;g&lt;&#x2F;code&gt; is dropped at the end of the scope)
which causes the entire future not to implement &lt;code&gt;Send&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;That wasn&#x27;t obvious from the error: we had to know that futures might implement &lt;code&gt;Send&lt;&#x2F;code&gt; depending
on the types they capture &lt;em&gt;and&lt;&#x2F;em&gt; find the type which lives across an await point ourselves.&lt;&#x2F;p&gt;
&lt;p&gt;Fortunately, the Async Foundations WG has been working to improve this error, and
&lt;a href=&quot;https:&#x2F;&#x2F;play.rust-lang.org&#x2F;?version=nightly&amp;amp;mode=debug&amp;amp;edition=2018&amp;amp;gist=7e80a8bc151df8817e0983e55bf2667a&quot;&gt;in nightly&lt;&#x2F;a&gt;, we see the following diagnostic instead:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;error[E0277]: `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;` cannot be sent between threads safely
  --&amp;gt; src&#x2F;main.rs:23:5
   |
5  | fn is_send&amp;lt;T: Send&amp;gt;(t: T) {
   |    -------    ---- required by this bound in `is_send`
...
23 |     is_send(foo());
   |     ^^^^^^^ `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;` cannot be sent between threads safely
   |
   = help: within `impl std::future::Future`, the trait `std::marker::Send` is not implemented for `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;`
note: future does not implement `std::marker::Send` as this value is used across an await
  --&amp;gt; src&#x2F;main.rs:15:3
   |
14 |   let g = x.lock().unwrap();
   |       - has type `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;`
15 |   baz().await;
   |   ^^^^^^^^^^^ await occurs here, with `g` maybe used later
16 | }
   | - `g` is later dropped here
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Much better!&lt;&#x2F;p&gt;
&lt;h1 id=&quot;how-does-it-work&quot;&gt;How does it work?&lt;&#x2F;h1&gt;
&lt;p&gt;When rustc&#x27;s trait system determines that a trait wasn&#x27;t implemented, in this case
&lt;code&gt;std::marker::Send&lt;&#x2F;code&gt;, it emits this error. The trait system produces a chain of &amp;quot;obligations&amp;quot;.
Obligations are types which denote where a bound (e.g &lt;code&gt;T: Send&lt;&#x2F;code&gt; in &lt;code&gt;is_send&lt;&#x2F;code&gt;) originated,
or where a bound was propagated.&lt;&#x2F;p&gt;
&lt;p&gt;To improve this diagnostic, the chain of obligations is now treated like a stack frame, where
each &amp;quot;frame&amp;quot; of obligations represents each function&#x27;s contribution to the error. Let&#x27;s make
that more concrete with a very rough approximation:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;Obligation {
    kind: DerivedObligation(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* generator that captured `g` *&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;),
    source: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* `Span` type pointing at `bar`&amp;#39;s location in user code *&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
    parent: Some(Obligation {
        kind: DerivedObligation(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* generator calling `bar` *&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;),
        source: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* `Span` type pointing at `foo`&amp;#39;s location in user code *&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
        parent: Some(Obligation {
            kind: ItemObligation(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* type representing `std::marker::Send` *&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;),
            source: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* `Span` type pointing at `is_send`&amp;#39;s location in user code *&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;,
            cause: None,
        }),
    }),
}
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The compiler matches against the chain expecting an &lt;code&gt;ItemObligation&lt;&#x2F;code&gt; and some &lt;code&gt;DerivedObligation&lt;&#x2F;code&gt;s
containing generators, which identifies the error we want to improve. Using information from these
obligations, rustc can construct the specialized error shown above - if you&#x27;d like to see what the
actual implementation looks like, check out PR &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;pull&#x2F;64895&quot;&gt;#64895&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;If you&#x27;re interested in improving diagnostics like this, or even just fixing bugs, consider
contributing to the compiler! There are many working groups to join and resources to help you get
started (like the &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&quot;&gt;rustc dev guide&lt;&#x2F;a&gt; or the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&quot;&gt;compiler team documentation&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;h1 id=&quot;what-s-next&quot;&gt;What&#x27;s next?&lt;&#x2F;h1&gt;
&lt;p&gt;More improvements to this diagnostic are planned and being worked on, so that it is applicable in
more cases, and has specialized messages for &lt;code&gt;Send&lt;&#x2F;code&gt; and &lt;code&gt;Sync&lt;&#x2F;code&gt;, like below:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;error[E0277]: future cannot be sent between threads safely
  --&amp;gt; src&#x2F;main.rs:23:5
   |
5  | fn is_send&amp;lt;T: Send&amp;gt;(t: T) {
   |    -------    ---- required by this bound in `is_send`
...
23 |     is_send(foo());
   |     ^^^^^^^ future returned by `foo` is not `Send`
   |
   = help:  future is not `Send` as this value is used across an await
note: future does not implement `std::marker::Send` as this value is used across an await
  --&amp;gt; src&#x2F;main.rs:15:3
   |
14 |   let g = x.lock().unwrap();
   |       - has type `std::sync::MutexGuard&amp;lt;&amp;#39;_, u32&amp;gt;`
15 |   baz().await;
   |   ^^^^^^^^^^^ await occurs here, with `g` maybe used later
16 | }
   | - `g` is later dropped here
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;</description>
        </item><item>
            <title>2019-10-10 Lang Team Triage Meeting</title>
            <pubDate>Fri, 11 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-lang-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-lang-team-meeting/</guid>
            <description>&lt;p&gt;We had our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;#meeting-calendara&quot;&gt;weekly triage meeting&lt;&#x2F;a&gt; on 2019-10-10. You can find the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;blob&#x2F;master&#x2F;minutes&#x2F;2019-10-10.md&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;lang-team&#x2F;&quot;&gt;lang-team&lt;&#x2F;a&gt; repository; there is also a &lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;QvE9-zce5_4&quot;&gt;video
recording&lt;&#x2F;a&gt; on YouTube. This week we had a number of folks who have
been working on const evaluation in attendance, which gave us an
opportunity to dive into some of the complexities involved there. We
also discussed how to make the const evaluation effort into a
&amp;quot;shepherded project&amp;quot;, a concept that we are still actively developing
(see my blog post on &lt;a href=&quot;http:&#x2F;&#x2F;smallcultfollowing.com&#x2F;babysteps&#x2F;blog&#x2F;2019&#x2F;09&#x2F;11&#x2F;aic-shepherds-3-0&#x2F;&quot;&gt;Shepherding 3.0&lt;&#x2F;a&gt; for the general idea).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;other-updates-on-shepherded-items&quot;&gt;Other updates on shepherded items&lt;&#x2F;h2&gt;
&lt;p&gt;This is our current list of &amp;quot;shepherded items&amp;quot;, which are things we
are tracking week to week. We&#x27;re still evolving the shepherding
system. Hopefully we&#x27;ll soon have links for all of these to a good,
representative place that explains the overall status and roadmap. All
in good time.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nikomatsakis&#x2F;project-ffi-unwind&quot;&gt;unwind-ffi&lt;&#x2F;a&gt;
&lt;ul&gt;
&lt;li&gt;created a &lt;a href=&quot;http:&#x2F;&#x2F;smallcultfollowing.com&#x2F;babysteps&#x2F;blog&#x2F;2019&#x2F;09&#x2F;11&#x2F;aic-shepherds-3-0&#x2F;&quot;&gt;zulip&lt;&#x2F;a&gt; stream (&lt;code&gt;#wg-ffi-unwind&lt;&#x2F;code&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;preparing an RFC that creates the group official and lays out the roadmap&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&amp;quot;object safety&amp;quot; group (e.g., &lt;a href=&quot;http:&#x2F;&#x2F;smallcultfollowing.com&#x2F;babysteps&#x2F;blog&#x2F;2019&#x2F;09&#x2F;11&#x2F;aic-shepherds-3-0&#x2F;&quot;&gt;#57893&lt;&#x2F;a&gt;)
&lt;ul&gt;
&lt;li&gt;no major updates, still iterating on the &amp;quot;in progress&amp;quot; branch &lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;re-rebalance coherence
&lt;ul&gt;
&lt;li&gt;we have a spreadsheet mapping out all the possible tests&lt;&#x2F;li&gt;
&lt;li&gt;we&#x27;ll fill out the matrix, but probably ready to stabilize 🎉&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;stabilize proc-macros generating macro-rules items
&lt;ul&gt;
&lt;li&gt;waiting on a report from pnkfelix&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;grammar working group
&lt;ul&gt;
&lt;li&gt;no updates&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>2019-10-10 Compiler Team Triage Meeting</title>
            <pubDate>Thu, 10 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-first-compiler-team-meeting/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/oct-2019-first-compiler-team-meeting/</guid>
            <description>&lt;p&gt;The compiler team had our weekly triage meeting on 2019-10-10.
You can find the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;triage-meeting&#x2F;2019-10-10&#x2F;&quot;&gt;minutes&lt;&#x2F;a&gt; on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;compiler-team&quot;&gt;compiler-team&lt;&#x2F;a&gt; repository.
Each week, we have general announcements from the team followed by check-ins from two of the compiler team working groups.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;centril&quot;&gt;@centril&lt;&#x2F;a&gt; is splitting &lt;code&gt;libsyntax&lt;&#x2F;code&gt; into data and logic parts which will decrease the amount of code &lt;code&gt;librustc&lt;&#x2F;code&gt; depends on.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nagisa&quot;&gt;@nagisa&lt;&#x2F;a&gt; is working on a cross-platform version of stacker which will allow us to avoid stack overflows in rustc.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;There is a compiler team &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;minutes&#x2F;design-meeting&#x2F;2019-10-11-DepGraph-persistence-PR62038&#x2F;&quot;&gt;design meeting&lt;&#x2F;a&gt; scheduled for tomorrow (2019-10-11) to discuss some of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;zoxc&quot;&gt;@Zoxc&lt;&#x2F;a&gt;&#x27;s PRs.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pnkfelix&quot;&gt;@pnkfelix&lt;&#x2F;a&gt; is revising the code that handles structural match checking.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nikomatsakis&quot;&gt;@nikomatsakis&lt;&#x2F;a&gt; has a PR (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;65232&quot;&gt;#65232&lt;&#x2F;a&gt;) up which helps us get closer to lazy normalization.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;wg-traits&lt;&#x2F;code&gt; is going to start holding a weekly &amp;quot;office hours&amp;quot; video call to help answer questions and teach people about trait system internals.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;working-group-sync&quot;&gt;Working group sync&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;wg-learning&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;learning&#x2F;&quot;&gt;wg-learning&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;code&gt;wg-learning&lt;&#x2F;code&gt; aims to make the compiler easier to learn by ensuring that &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc-dev-guide&lt;&#x2F;a&gt; and api docs are “complete”.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;wg-learning&lt;&#x2F;code&gt; has been working on transcribing videos from the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=elBxMRSNYr4&amp;amp;list=PL85XCvVPmGQhOL-J2Ng7qlPvDVOwYpGTN&quot;&gt;compiler lecture series&lt;&#x2F;a&gt; into &lt;a href=&quot;https:&#x2F;&#x2F;rustc-dev-guide.rust-lang.org&#x2F;&quot;&gt;rustc-dev-guide&lt;&#x2F;a&gt; chapters.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Originally, individuals were assigned one or lectures to complete but that hasn&#x27;t worked very well.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Recently, they&#x27;re trying to work on one video at a time as a team with much better results.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;There&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;paper.dropbox.com&#x2F;doc&#x2F;Ty-lecture-summary--Almbjo_id6n8CKrOHlsTMG2dAg-4jFj9bVOLlW7uhIOWHITX&quot;&gt;a PR&lt;&#x2F;a&gt; open for a new chapter based on the &lt;code&gt;ty&lt;&#x2F;code&gt; lecture.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-10.20.2354818&#x2F;near&#x2F;177816515&quot;&gt;Link to full discussion&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wg-llvm&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;llvm&#x2F;&quot;&gt;wg-llvm&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;code&gt;wg-llvm&lt;&#x2F;code&gt; encompasses work in LLVM upstream fixing the issues and implementing features that matter to Rust.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;rustc has upgraded to the LLVM 9 release;
&lt;ul&gt;
&lt;li&gt;Which allows us to replace some the emscripten stuff with LLVM’s toolchain.&lt;&#x2F;li&gt;
&lt;li&gt;As part of these upgrades we will likely end up dropping support for the super old LLVM 6, which in turn allows us to stop building the unnecessary Go &amp;amp; OCaml bindings to LLVM, which in turn helps rustc build times slightly.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;People are also working on enabling use of the new pass manager, which might give us some tangible code quality improvements over the status quo.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;131828-t-compiler&#x2F;topic&#x2F;weekly.20meeting.202019-10-10.20.2354818&#x2F;near&#x2F;177817116&quot;&gt;Link to full discussion&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Async Foundations Update: Time for polish!</title>
            <pubDate>Mon, 07 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/asyncawait-wg-focus-issues/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/asyncawait-wg-focus-issues/</guid>
            <description>&lt;p&gt;As you&#x27;ve perhaps heard, recently the async-await feature &lt;a href=&quot;&#x2F;2019&#x2F;09&#x2F;30&#x2F;Async-await-hits-beta.html&quot;&gt;landed on
the Rust beta branch&lt;&#x2F;a&gt;. This marks a big turning point in the
usability story for Async Rust. But there&#x27;s still a lot of work to do.
As we mentioned in the main post, the focus for the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;async-await&#x2F;&quot;&gt;Async Foundations
WG&lt;&#x2F;a&gt; in the immediate term is going to be &lt;strong&gt;polish&lt;&#x2F;strong&gt;, &lt;strong&gt;polish&lt;&#x2F;strong&gt;
and (ahem) &lt;strong&gt;more polish&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In particular, we want to take aim at a backlog of strange
diagnostics, suboptimal performance, and the occasional inexplicable
type-check failure. This is a shift: whereas before, we could have
laser focus on things that truly blocked stabilization, we&#x27;ve now got
a large set of bugs, often without a clear prioritization between
them. This requires us to mix up how the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;async-await&#x2F;&quot;&gt;Async Foundations WG&lt;&#x2F;a&gt; is
operating.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;announcing-focus-issues&quot;&gt;Announcing: focus issues&lt;&#x2F;h3&gt;
&lt;p&gt;So how do you deal with a large pile of issues, all of which are
important but none of which are vital? One at a time, of course.&lt;&#x2F;p&gt;
&lt;p&gt;The way we&#x27;ve chosen to organize this is something we call &lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;async-await&#x2F;#how-to-get-involved&quot;&gt;focus
issues&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;. We&#x27;re trying to keep a small number of issues tagged as
focus issues at any given time. As we close them, we&#x27;ll pick new ones
to replace them. The number of these issues depends on mentoring
bandwidth and on how many people are hacking -- as a rule of thumb,
they should mostly all be assigned and actively progressing at any
given time.&lt;&#x2F;p&gt;
&lt;p&gt;We also have a secondary set of issues called &lt;strong&gt;on deck issues&lt;&#x2F;strong&gt;.
These are the candidates to become focus issues as focus issues are
completed. If you&#x27;d like us to consider fixing something sooner rather
than later, you can &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;async-await&#x2F;#nominating-issues&quot;&gt;add the &amp;quot;on deck&amp;quot; label yourself&lt;&#x2F;a&gt;, along
with a bit of context explaining why you think this issue is more
important than the rest.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;how-you-can-help&quot;&gt;How you can help&lt;&#x2F;h3&gt;
&lt;p&gt;You can help in two ways:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Fix bugs!&lt;&#x2F;strong&gt; If you&#x27;d like to take a shot at fixing a bug, try to
come to the &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;async-await&#x2F;#triage-meeting&quot;&gt;triage meeting&lt;&#x2F;a&gt; or just show up in
&lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.zulipchat.com&#x2F;#narrow&#x2F;stream&#x2F;187312-wg-async-foundations&quot;&gt;&lt;code&gt;#wg-async-foundations&lt;&#x2F;code&gt; on Zulip&lt;&#x2F;a&gt;. Maybe we can find something
for you.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Nominate bugs!&lt;&#x2F;strong&gt; If you&#x27;ve got a bug that is really
annoying you, feel free to &amp;quot;nominate it&amp;quot; by &lt;a href=&quot;https:&#x2F;&#x2F;rust-lang.github.io&#x2F;compiler-team&#x2F;working-groups&#x2F;async-await&#x2F;#nominating-issues&quot;&gt;following the
instructions here&lt;&#x2F;a&gt;. This will help us to fix the things that
are bothering people the most.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</description>
        </item><item>
            <title>Keeping Rust projects secure with cargo-audit 0.9: dependency trees, core advisories, unmaintained crates</title>
            <pubDate>Thu, 03 Oct 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/keeping-secure-with-cargo-audit-0-9/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/keeping-secure-with-cargo-audit-0-9/</guid>
            <description>&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rustsec&#x2F;cargo-audit&quot;&gt;cargo-audit&lt;&#x2F;a&gt; is a command-line utility which inspects &lt;code&gt;Cargo.lock&lt;&#x2F;code&gt; files and compares them against the &lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&quot;&gt;RustSec Advisory Database&lt;&#x2F;a&gt;, a community database of security vulnerabilities maintained by the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rust-secure-code&#x2F;wg&quot;&gt;Rust Secure Code Working Group&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;You can install &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; and run it against your project with the following commands:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$ cargo install cargo-audit
$ cargo audit
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The 0.9 release of &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; includes a number of new features we hope make it more useful, including:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;UI improvements for understanding how vulnerabilities apply to your project&lt;&#x2F;li&gt;
&lt;li&gt;Warnings for unmaintained crate dependencies (with an option to hard fail)&lt;&#x2F;li&gt;
&lt;li&gt;Tracking of vulnerabilities in the Rust language itself&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;ui-improvements-dependency-trees&quot;&gt;UI improvements: dependency trees&lt;&#x2F;h2&gt;
&lt;p&gt;Previously, when &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; found a vulnerability in a project, it would display advisory information without any context as to how a particular vulnerable dependency is included in your project, making it difficult to determine what action needs to be taken to resolve the vulnerability.&lt;&#x2F;p&gt;
&lt;p&gt;The latest release prints an inverse dependency tree (ala the excellent &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sfackler&#x2F;cargo-tree&quot;&gt;cargo-tree&lt;&#x2F;a&gt; crate) for each advisory showing how a vulnerable dependency is included in your project:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;RustSec&#x2F;cargo-audit&#x2F;a840f7b&#x2F;screenshot.png&quot; alt=&quot;cargo audit with dependency tree&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In future versions of &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; we &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;cargo-audit&#x2F;issues&#x2F;23&quot;&gt;hope to add a &lt;code&gt;cargo audit fix&lt;&#x2F;code&gt; command&lt;&#x2F;a&gt; ala &lt;code&gt;npm audit fix&lt;&#x2F;code&gt; which can either automatically update the necessary dependencies or provide instructions on how to do so. If that feature interests you and you&#x27;d like to contribute, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;cargo-audit&#x2F;issues&#x2F;23&quot;&gt;we&#x27;re looking for help&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-feature-unmaintained-crate-warnings&quot;&gt;New feature: unmaintained crate warnings&lt;&#x2F;h2&gt;
&lt;p&gt;This release added the notion of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;rustsec-crate&#x2F;pull&#x2F;75&quot;&gt;informational advisories&lt;&#x2F;a&gt; - advisories which don&#x27;t directly represent a security vulnerability, but may contain potentially security-relevant information. The primary intended use for this feature is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;advisory-db&#x2F;issues&#x2F;173&quot;&gt;providing warnings for unmaintained crates&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;A recent study, &lt;a href=&quot;https:&#x2F;&#x2F;www.usenix.org&#x2F;system&#x2F;files&#x2F;sec19-zimmermann.pdf&quot;&gt;Small World with High Risks: A Study of Security Threats in the npm Ecosystem&lt;&#x2F;a&gt;, showed that unmaintained npm packages pose a high risk to that ecosystem:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Our results provide evidence that npm suffers from single points of failure and that unmaintained packages threaten large code bases&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Rust is in a similar boat with some high profile crates, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Stebalien&#x2F;term&#x2F;issues&#x2F;93&quot;&gt;such as the &lt;code&gt;term&lt;&#x2F;code&gt; crate&lt;&#x2F;a&gt; (downloaded 8,000 times a day), are unmaintained. By &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;advisory-db&#x2F;issues&#x2F;173&quot;&gt;tracking information about unmaintained crates in the RustSec Advisory Database&lt;&#x2F;a&gt;, we hope to improve visibility on these crates, either by helping people discover &amp;quot;successor&amp;quot; crates they should switch to, or putting potential volunteer maintainers in touch with authors interested in handing crates off. When those handoffs happen, we can mark unmaintained crate advisories as obsolete (while still giving interested security researchers a list of crates to keep an eye on for potential &lt;a href=&quot;https:&#x2F;&#x2F;blog.npmjs.org&#x2F;post&#x2F;180565383195&#x2F;details-about-the-event-stream-incident&quot;&gt;software supply chain attacks&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;If you have an unmaintained crate you&#x27;d like us to create an advisory for, or know of a third party unmaintained crate and would like to provide information about potential alternatives, please &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;advisory-db&#x2F;issues&#x2F;173&quot;&gt;leave a comment in the RustSec&#x2F;advisory-db#173 GitHub issue&lt;&#x2F;a&gt; and we can file an advisory for it.&lt;&#x2F;p&gt;
&lt;p&gt;For now, unmaintained crates are surfaced as warnings, with some brief information available about each one and a link to click to read more. If you&#x27;d like for unmaintained crate advisories to be considered errors (so &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; exits with a non-zero status for e.g. CI purposes), run:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$ cargo audit -D
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;or if you prefer to be more explicit:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;span style=&quot;color:#c0c5ce;&quot;&gt;$ cargo audit --deny-warnings
&lt;&#x2F;span&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;tracking-rust-language-vulnerabilities&quot;&gt;Tracking Rust language vulnerabilities&lt;&#x2F;h2&gt;
&lt;p&gt;Previously the &lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&quot;&gt;RustSec Advisory Database&lt;&#x2F;a&gt; only tracked information about vulnerable crates published through &lt;a href=&quot;https:&#x2F;&#x2F;crates.io&quot;&gt;crates.io&lt;&#x2F;a&gt;. Starting with this release, however, we are also indexing advisories for vulnerabilities in the Rust language&#x27;s core ecosystem components, including &lt;code&gt;std&lt;&#x2F;code&gt;, &lt;code&gt;cargo&lt;&#x2F;code&gt;, and &lt;code&gt;rustdoc&lt;&#x2F;code&gt;. We&#x27;ve now indexed the following vulnerabilities:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&#x2F;advisories&#x2F;CVE-2018-1000622.html&quot;&gt;CVE-2018-1000622: rustdoc: Uncontrolled search path element vulnerability in rustdoc plugins&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&#x2F;advisories&#x2F;CVE-2018-1000657.html&quot;&gt;CVE-2018-1000657: std: Buffer overflow vulnenrability in &lt;code&gt;VecDeque::reserve()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&#x2F;advisories&#x2F;CVE-2018-1000810.html&quot;&gt;CVE-2018-1000810: std: Buffer overflow vulnerability in &lt;code&gt;str::repeat()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&#x2F;advisories&#x2F;CVE-2019-12083.html&quot;&gt;CVE-2019-12083: std: Memory safety vulnerabilities arising from &lt;code&gt;Error::type_id&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;rustsec.org&#x2F;advisories&#x2F;CVE-2019-16760.html&quot;&gt;CVE-2019-16760: cargo: Cargo prior to Rust 1.26.0 may download the wrong dependency&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We are &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RustSec&#x2F;cargo-audit&#x2F;issues&#x2F;140&quot;&gt;interested in potentially surfacing information about these advisories via cargo-audit&lt;&#x2F;a&gt;, e.g. optionally detecting if the currently active Rust toolchain is vulnerable. If that interests you, we&#x27;re also looking for help on this issue!&lt;&#x2F;p&gt;
&lt;p&gt;Thanks for reading, and we hope you enjoy &lt;code&gt;cargo-audit&lt;&#x2F;code&gt; 0.9!&lt;&#x2F;p&gt;
</description>
        </item><item>
            <title>Welcome to the Inside Rust blog!</title>
            <pubDate>Wed, 25 Sep 2019 00:00:00 +0000</pubDate>
            <link>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/welcome/</link>
            <guid>https://xampprocky.github.io/blog.rust-lang.org/inside-rust/welcome/</guid>
            <description>&lt;p&gt;Welcome to the inaugural post of the &lt;strong&gt;Inside Rust&lt;&#x2F;strong&gt; blog! This is a
new blog where the various Rust teams and working groups can post
updates about new developments. It&#x27;s a great place to watch if you&#x27;re
interested in following along with Rust development -- and a
particularly great place to watch if you&#x27;re interested in contributing
to Rust. Expect to see updates on new projects, calls for help, design
notes, and other similar items. Thanks for reading!&lt;&#x2F;p&gt;
</description>
        </item>
    </channel>
</rss>
