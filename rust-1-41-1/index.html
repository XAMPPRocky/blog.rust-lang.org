<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="description" content="Empowering everyone to build reliable and efficient software.">
     <!-- Twitter card -->
 <meta name="twitter:card" content="summary">
 <meta name="twitter:site" content="@rustlang">
 <meta name="twitter:creator" content="@rustlang">
 <meta name="twitter:title" content="">
 <meta name="twitter:description" content="">
<meta name="twitter:image" content="https://www.rust-lang.org/static/images/rust-social.jpg">

<!-- Facebook OpenGraph -->
<meta property="og:title" content="" />
<meta property="og:description" content="">
<meta property="og:image" content="https://www.rust-lang.org/static/images/rust-social-wide.jpg" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />

<!-- styles -->
<link rel="stylesheet" href="https://xampprocky.github.io/blog.rust-lang.org/styles/skeleton.css"/>
<link rel="stylesheet" href="https://xampprocky.github.io/blog.rust-lang.org/styles/tachyons.css"/>
<link rel="stylesheet" href="https://xampprocky.github.io/blog.rust-lang.org/fonts.css"/>
<link rel="stylesheet" href="https://xampprocky.github.io/blog.rust-lang.org/app.css"/>

<!-- favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="https://xampprocky.github.io/blog.rust-lang.org/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xampprocky.github.io/blog.rust-lang.org/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://xampprocky.github.io/blog.rust-lang.org/images/favicon-16x16.png">
<link rel="shortcut icon" href="https://xampprocky.github.io/blog.rust-lang.org/images/favicon.ico">
<link rel="manifest" href="https://xampprocky.github.io/blog.rust-lang.org/images/site.webmanifest">
<link rel="mask-icon" color="#5bbad5" href="https://xampprocky.github.io/blog.rust-lang.org/images/safari-pinned-tab.svg">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">

 <!-- atom -->
 <link type="application/atom+xml" title="" rel="alternate" href="https://blog.rust-lang.org/feed.xml">

  </head>
  <body>
      <nav class="flex flex-row justify-center justify-end-l items-center flex-wrap ph2 pl3-ns pr4-ns">
          <div class="brand flex-auto w-100 w-auto-l self-start tc tl-l">
              <a href="
https:&#x2F;&#x2F;xampprocky.github.io&#x2F;blog.rust-lang.org&#x2F;
">
                  <img class="v-mid ml0-l" alt="Rust Logo" src="https:&#x2F;&#x2F;xampprocky.github.io&#x2F;blog.rust-lang.org&#x2F;images&#x2F;rust-logo-blk.svg">
                  <span class="dib ml1 ml0-l">Rust Blog</span>
              </a>
          </div>

          <ul class="nav list w-100 w-auto-l flex flex-none flex-row flex-wrap justify-center justify-end-l items-center pv2 ph0 ph4-ns">
              <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org">Rust</a></li>
              <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools/install">Install</a></li>
              <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/learn">Learn</a></li>
              <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools">Tools</a></li>
              <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/governance">Governance</a></li>
              <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/community">Community</a></li>
          </ul>
      </nav>
      
<section id="Announcing Rust 1.41.1" class="white">
  <div class="w-100 mw-none ph3 mw8-m mw8-l center f3">
    <header>
      <h2>Announcing Rust 1.41.1</h2>
      <div class="highlight"></div>
    </header>

    <div class="publish-date-author">Feb. 27 &middot; The Rust Release Team

    
    </div>

    <div class="post">
      <p>The Rust team has published a new point release of Rust, 1.41.1.
Rust is a programming language that is empowering everyone to build reliable and efficient software.</p>
<p>If you have a previous version of Rust installed via rustup, getting Rust 1.41.1 is as easy as:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">rustup update stable
</span></pre>
<p>If you don't have it already, you can <a href="https://www.rust-lang.org/tools/install">get <code>rustup</code></a> from the appropriate page on our website.</p>
<h2 id="what-s-in-1-41-1-stable">What's in 1.41.1 stable</h2>
<p>Rust 1.41.1 addresses two critical regressions introduced in Rust 1.41.0:
a soundness hole related to static lifetimes, and a miscompilation causing segfaults.
These regressions do not affect earlier releases of Rust,
and we recommend users of Rust 1.41.0 to upgrade as soon as possible.
Another issue related to interactions between <code>'static</code> and <code>Copy</code> implementations,
dating back to Rust 1.0, was also addressed by this release.</p>
<h3 id="a-soundness-hole-in-checking-static-items">A soundness hole in checking <code>static</code> items</h3>
<p>In Rust 1.41.0, due to some changes in the internal representation of <code>static</code> values,
the borrow checker accidentally allowed some unsound programs.
Specifically, the borrow checker would not check that <code>static</code> items had the correct type.
This in turn would allow the assignment of a temporary,
with a lifetime less than <code>'static</code>, to a <code>static</code> variable:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">static mut </span><span style="color:#d08770;">MY_STATIC</span><span style="color:#c0c5ce;">: &amp;</span><span style="color:#b48ead;">&#39;static u8 </span><span style="color:#c0c5ce;">= &amp;</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">;

</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span style="color:#c0c5ce;">() {
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> my_temporary = </span><span style="color:#d08770;">42</span><span style="color:#c0c5ce;">;
    </span><span style="color:#b48ead;">unsafe </span><span style="color:#c0c5ce;">{
        </span><span style="color:#65737e;">// Erroneously allowed in 1.41.0:
        </span><span style="color:#d08770;">MY_STATIC </span><span style="color:#c0c5ce;">= &amp;my_temporary;
    }
}
</span></pre>
<p>This was addressed in 1.41.1, with the program failing to compile:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">error[E0597]: `my_temporary` does not live long enough
 --&gt; src/main.rs:6:21
  |
6 |         MY_STATIC = &amp;my_temporary;
  |         ------------^^^^^^^^^^^^^
  |         |           |
  |         |           borrowed value does not live long enough
  |         assignment requires that `my_temporary` is borrowed for `&#39;static`
7 |     }
8 | }
  | - `my_temporary` dropped here while still borrowed

</span></pre>
<p>You can learn more about this bug in <a href="https://github.com/rust-lang/rust/issues/69114">issue #69114</a> and the <a href="https://github.com/rust-lang/rust/pull/69145">PR that fixed it</a>.</p>
<h3 id="respecting-a-static-lifetime-in-a-copy-implementation">Respecting a <code>'static</code> lifetime in a <code>Copy</code> implementation</h3>
<p>Ever since Rust 1.0, the following erroneous program has been compiling:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">#[</span><span style="color:#bf616a;">derive</span><span style="color:#c0c5ce;">(Clone)]
</span><span style="color:#b48ead;">struct </span><span style="color:#c0c5ce;">Foo&lt;</span><span style="color:#b48ead;">&#39;a</span><span style="color:#c0c5ce;">&gt;(&amp;</span><span style="color:#b48ead;">&#39;a u32</span><span style="color:#c0c5ce;">);
</span><span style="color:#b48ead;">impl </span><span style="color:#c0c5ce;">Copy </span><span style="color:#b48ead;">for </span><span style="color:#c0c5ce;">Foo&lt;</span><span style="color:#b48ead;">&#39;static</span><span style="color:#c0c5ce;">&gt; {}

</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span style="color:#c0c5ce;">() {
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> temporary = </span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">;
    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> foo = (Foo(&amp;temporary),);
    </span><span style="color:#96b5b4;">drop</span><span style="color:#c0c5ce;">(foo.</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">); </span><span style="color:#65737e;">// Accessing a part of `foo` is necessary.
    </span><span style="color:#96b5b4;">drop</span><span style="color:#c0c5ce;">(foo.</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">); </span><span style="color:#65737e;">// Indexing an array would also work.
</span><span style="color:#c0c5ce;">}
</span></pre>
<p>In Rust 1.41.1, this issue was fixed <a href="https://github.com/rust-lang/rust/pull/69145">by the same PR as the one above</a>.
Compiling the program now produces the following error:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">error[</span><span style="color:#d08770;">E0597</span><span style="color:#c0c5ce;">]: `temporary` does not live long enough
  --&gt; src/main.rs:</span><span style="color:#d08770;">7</span><span style="color:#c0c5ce;">:</span><span style="color:#d08770;">20
   </span><span style="color:#c0c5ce;">|
</span><span style="color:#d08770;">7  </span><span style="color:#c0c5ce;">|     </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> foo = (Foo(&amp;temporary),);
   |                    ^^^^^^^^^^ borrowed value does not live long enough
</span><span style="color:#d08770;">8  </span><span style="color:#c0c5ce;">|     </span><span style="color:#96b5b4;">drop</span><span style="color:#c0c5ce;">(foo.</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">);
   |          ----- copying this value requires </span><span style="color:#bf616a;">that
   </span><span style="color:#c0c5ce;">|                `temporary` is borrowed </span><span style="color:#b48ead;">for</span><span style="color:#c0c5ce;"> `</span><span style="color:#b48ead;">&#39;static</span><span style="color:#c0c5ce;">`
</span><span style="color:#d08770;">9  </span><span style="color:#c0c5ce;">|     </span><span style="color:#96b5b4;">drop</span><span style="color:#c0c5ce;">(foo.</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">);
</span><span style="color:#d08770;">10 </span><span style="color:#c0c5ce;">| }
   | - `temporary` dropped here </span><span style="color:#b48ead;">while</span><span style="color:#c0c5ce;"> still borrowed
</span></pre>
<p>This error occurs because <code>Foo&lt;'a&gt;</code>, for some <code>'a</code>, only implements <code>Copy</code> when <code>'a: 'static</code>.
However, the <code>temporary</code> variable,
with some lifetime <code>'0</code> does not outlive <code>'static</code> and hence <code>Foo&lt;'0&gt;</code> is not <code>Copy</code>,
so using <code>drop</code> the second time around should be an error.</p>
<h3 id="miscompiled-bound-checks-leading-to-segfaults">Miscompiled bound checks leading to segfaults</h3>
<p>In a few cases, programs compiled with Rust 1.41.0 were omitting bound checks in the memory allocation code.
This caused segfaults if out of bound values were provided.
The root cause of the miscompilation was a change in a LLVM optimization pass,
introduced in LLVM 9 and reverted in LLVM 10.</p>
<p>Rust 1.41.0 uses a snapshot of LLVM 9, so we cherry-picked the revert into Rust 1.41.1,
addressing the miscompilation. <a href="https://github.com/rust-lang/rust/issues/69225">You can learn more about this bug in issue #69225</a>.</p>
<h2 id="contributors-to-1-41-1">Contributors to 1.41.1</h2>
<p>Many people came together to create Rust 1.41.1.
We couldn't have done it without all of you. <a href="https://thanks.rust-lang.org/rust/1.41.1/">Thanks!</a></p>

    </div>
  </div>
</section>

      <footer>
    <div class="w-100 mw-none ph3 mw8-m mw9-l center f3">
        <div class="row">
            <div class="four columns mt3 mt0-l" id="get-help">
                <h4>Get help!</h4>
                <ul>
                    <li><a href="https://doc.rust-lang.org" target="_blank" rel="noopener">Documentation</a></li>
                    <li><a href="mailto:core-team@rust-lang.org">Contact the Rust Team</a></li>
                    <li><a href="http://ping.rust-lang.org">Check Website Status</a></li>
                </ul>
            </div>
            <div class="four columns mt3 mt0-l">
                <h4>Terms and policies</h4>
                <ul>
                    <li><a href="https://www.rust-lang.org/policies/code-of-conduct">Code of Conduct</a></li>
                    <li><a href="https://www.rust-lang.org/policies/licenses">Licenses</a></li>
                    <li><a href="https://www.rust-lang.org/policies/media-guide">Logo Policy and Media Guide</a></li>
                    <li><a href="https://www.rust-lang.org/policies/security">Security Disclosures</a></li>
                    <li><a href="https://www.rust-lang.org/policies">All Policies</a></li>
                </ul>
            </div>
            <div class="four columns mt3 mt0-l">
                <h4>Social</h4>
                <a href="https://twitter.com/rustlang" target="_blank" rel="noopener" alt="twitter link">
                    <img src="https:&#x2F;&#x2F;xampprocky.github.io&#x2F;blog.rust-lang.org&#x2F;images&#x2F;twitter.svg" alt="twitter logo" title="Twitter"/>
                </a>
                <a href="https://www.youtube.com/channel/UCaYhcUwRBNscFNUKTjgPFiA" target="_blank" rel="noopener" alt="youtube link">
                    <img src="https:&#x2F;&#x2F;xampprocky.github.io&#x2F;blog.rust-lang.org&#x2F;images&#x2F;youtube.svg" alt="youtube logo" title="YouTube" style="padding-top: 6px; padding-bottom:6px">
                </a>
                <a href="https://discord.gg/rust-lang" target="_blank" rel="noopener" alt="discord link">
                    <img src="https:&#x2F;&#x2F;xampprocky.github.io&#x2F;blog.rust-lang.org&#x2F;images&#x2F;discord.svg" alt="discord logo" title="Discord"/>
                </a>
                <a href="https://github.com/rust-lang" target="_blank" rel="noopener" alt="github link">
                    <img src="https:&#x2F;&#x2F;xampprocky.github.io&#x2F;blog.rust-lang.org&#x2F;images&#x2F;github.svg" alt="github logo" title="GitHub"/>
                </a>
            </div>

        </div>
        <div class="attribution">
            Maintained by the Rust Team. See a typo?
            <a href="https://github.com/rust-lang/blog.rust-lang.org" target="_blank" rel="noopener">Send a fix here</a>!
        </div>
    </div>
</footer>

  </body>
</html>
